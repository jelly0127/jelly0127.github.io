<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="音乐、运动、游戏、代码、旅行" />
       
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> Jelly</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/log.jpg" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="Jelly" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/jelly0127"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/index.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Jelly</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', 'Keep going', ''],
        startDelay: 0,
        typeSpeed: 300,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-Vue3"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/01/29/Vue3/"
    >Vue3</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/01/29/Vue3/" class="article-date">
  <time datetime="2023-01-29T14:39:43.000Z" itemprop="datePublished">2023-01-29</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="一、了解vue3"><a href="#一、了解vue3" class="headerlink" title="一、了解vue3"></a>一、了解vue3</h1><ul>
<li>Vue.js 3.0 “One Piece” 正式版在今年9月份发布</li>
<li>2年多开发, 100+位贡献者, 2600+次提交, 600+次PR</li>
<li><strong>Vue3支持vue2的大多数特性</strong></li>
<li><strong>更好的支持Typescript</strong></li>
</ul>
<h2 id="性能提升"><a href="#性能提升" class="headerlink" title="性能提升:"></a>性能提升:</h2><ul>
<li>打包大小减少41%</li>
<li>初次渲染快55%, 更新渲染快133%</li>
<li>内存减少54%</li>
<li><strong>使用Proxy代替defineProperty实现数据响应式</strong></li>
<li><strong>重写虚拟DOM的实现和Tree-Shaking</strong></li>
</ul>
<h2 id="新增特性"><a href="#新增特性" class="headerlink" title="新增特性"></a>新增特性</h2><ul>
<li><p><strong>Composition (组合) API</strong></p>
</li>
<li><p>setup</p>
</li>
<li><ul>
<li>ref 和 reactive</li>
<li>computed 和 watch</li>
<li>新的生命周期函数</li>
<li>provide与inject</li>
<li>…</li>
</ul>
</li>
<li><p>新组件</p>
</li>
<li><ul>
<li>Fragment - 文档碎片</li>
<li>Teleport - 瞬移组件的位置</li>
<li>Suspense - 异步加载组件的loading界面</li>
</ul>
</li>
<li><p>其它API更新</p>
</li>
<li><ul>
<li>全局API的修改</li>
<li>将原来的全局API转移到应用对象</li>
<li>模板语法变化</li>
</ul>
</li>
</ul>
<h1 id="二、创建vue3"><a href="#二、创建vue3" class="headerlink" title="二、创建vue3"></a>二、创建vue3</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">## 安装或者升级</span><br><span class="line">    npm install -g @vue/cli</span><br><span class="line">    ## 保证 vue cli 版本在 4.5.0 以上</span><br><span class="line">    vue --version</span><br><span class="line">    ## 创建项目</span><br><span class="line">    vue create my-project</span><br></pre></td></tr></table></figure>

<h2 id="然后的步骤"><a href="#然后的步骤" class="headerlink" title="然后的步骤"></a>然后的步骤</h2><ul>
<li>Please pick a preset - 选择 *<strong>Manually select features*</strong></li>
<li>Check the features needed for your project - 选择上 *<strong>TypeScript*</strong> ，特别注意点空格是选择，点回车是下一步</li>
<li>Choose a version of Vue.js that you want to start the project with - 选择 *<strong>3.x (Preview)*</strong></li>
<li>Use class-style component syntax - 直接回车</li>
<li>Use Babel alongside TypeScript - 直接回车</li>
<li>Pick a linter &#x2F; formatter config - 直接回车</li>
<li>Use history mode for router? - 直接回车</li>
<li>Pick a linter &#x2F; formatter config - 直接回车</li>
<li>Pick additional lint features - 直接回车</li>
<li>Where do you prefer placing config for Babel, ESLint, etc.? - 直接回车</li>
<li>Save this as a preset for future projects? - 直接回车</li>
</ul>
<h2 id="使用-vite-创建"><a href="#使用-vite-创建" class="headerlink" title="使用 vite 创建"></a>使用 vite 创建</h2><ul>
<li>vite 是一个由原生 ESM 驱动的 Web 开发构建工具。在开发环境下基于浏览器原生 ES imports 开发，</li>
<li>它做到了<em><strong>本地快速开发启动</strong></em>, 在生产环境下基于 Rollup 打包。</li>
<li>快速的冷启动，不需要等待打包操作；</li>
<li>即时的热模块更新，替换性能和模块数量的解耦让更新飞起；</li>
<li>真正的按需编译，不再等待整个应用编译完成，这是一个巨大的改变。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line">cd &lt;project-name&gt;</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h1 id="三、Composition-API-常用部分"><a href="#三、Composition-API-常用部分" class="headerlink" title="三、Composition API(常用部分)"></a>三、Composition API(常用部分)</h1><p>​	<a target="_blank" rel="noopener" href="https://composition-api.vuejs.org/zh/api.html">文档</a></p>
<h3 id="（1）setup"><a href="#（1）setup" class="headerlink" title="（1）setup"></a>（1）setup</h3><ul>
<li>新的option, 所有的组合API函数都在此使用, 只在初始化时执行一次</li>
<li>函数如果返回对象, 对象中的属性或方法, 模板中可以直接使用</li>
</ul>
<h3 id="（2）ref"><a href="#（2）ref" class="headerlink" title="（2）ref"></a>（2）ref</h3><ul>
<li><p>作用: 定义一个数据的响应式</p>
</li>
<li><p>语法: const xxx &#x3D; ref(initValue): </p>
</li>
<li><ul>
<li>创建一个包含响应式数据的引用(reference)对象</li>
<li>js中操作数据: xxx.value</li>
<li>模板中操作数据: 不需要.value</li>
</ul>
</li>
<li><p>一般用来定义一个基本类型的响应式数据</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;count&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;button @click=&quot;update&quot;&gt;更新&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">  ref</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line"></span><br><span class="line">  /* 在Vue3中依然可以使用data和methods配置, 但建议使用其新语法实现 */</span><br><span class="line">  // data () &#123;</span><br><span class="line">  //   return &#123;</span><br><span class="line">  //     count: 0</span><br><span class="line">  //   &#125;</span><br><span class="line">  // &#125;,</span><br><span class="line">  // methods: &#123;</span><br><span class="line">  //   update () &#123;</span><br><span class="line">  //     this.count++</span><br><span class="line">  //   &#125;</span><br><span class="line">  // &#125;</span><br><span class="line"></span><br><span class="line">  /* 使用vue3的composition API */</span><br><span class="line">  setup () &#123;</span><br><span class="line"></span><br><span class="line">    // 定义响应式数据 ref对象</span><br><span class="line">    const count = ref(1)</span><br><span class="line">    console.log(count)</span><br><span class="line"></span><br><span class="line">    // 更新响应式数据的函数</span><br><span class="line">    function update () &#123;</span><br><span class="line">      // alert(&#x27;update&#x27;)</span><br><span class="line">      count.value = count.value + 1</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      count,</span><br><span class="line">      update</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（3）reactive"><a href="#（3）reactive" class="headerlink" title="（3）reactive"></a>（3）reactive</h3><ul>
<li>作用: 定义多个数据的响应式</li>
<li>const proxy &#x3D; reactive(obj): 接收一个普通对象然后返回该普通对象的响应式代理器对象</li>
<li>响应式转换是“深层的”：会影响对象内部所有嵌套的属性</li>
<li>内部基于 ES6 的 Proxy 实现，通过代理对象操作源对象内部数据都是响应式的</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;name: &#123;&#123;state.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;age: &#123;&#123;state.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;wife: &#123;&#123;state.wife&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;button @click=&quot;update&quot;&gt;更新&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">/* </span><br><span class="line">reactive: </span><br><span class="line">    作用: 定义多个数据的响应式</span><br><span class="line">    const proxy = reactive(obj): 接收一个普通对象然后返回该普通对象的响应式代理器对象</span><br><span class="line">    响应式转换是“深层的”：会影响对象内部所有嵌套的属性</span><br><span class="line">    内部基于 ES6 的 Proxy 实现，通过代理对象操作源对象内部数据都是响应式的</span><br><span class="line">*/</span><br><span class="line">import &#123;</span><br><span class="line">  reactive,</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup () &#123;</span><br><span class="line">    /* </span><br><span class="line">    定义响应式数据对象</span><br><span class="line">    */</span><br><span class="line">    const state = reactive(&#123;</span><br><span class="line">      name: &#x27;tom&#x27;,</span><br><span class="line">      age: 25,</span><br><span class="line">      wife: &#123;</span><br><span class="line">        name: &#x27;marry&#x27;,</span><br><span class="line">        age: 22</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    console.log(state, state.wife)</span><br><span class="line"></span><br><span class="line">    const update = () =&gt; &#123;</span><br><span class="line">      state.name += &#x27;--&#x27;</span><br><span class="line">      state.age += 1</span><br><span class="line">      state.wife.name += &#x27;++&#x27;</span><br><span class="line">      state.wife.age += 2</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      state,</span><br><span class="line">      update,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（4）比较Vue2与Vue3的响应式-重要）"><a href="#（4）比较Vue2与Vue3的响应式-重要）" class="headerlink" title="（4）比较Vue2与Vue3的响应式(重要）"></a>（4）比较Vue2与Vue3的响应式(重要）</h3><h4 id="vue2的响应式"><a href="#vue2的响应式" class="headerlink" title="vue2的响应式"></a>vue2的响应式</h4><p>核心: </p>
<ul>
<li>对象: 通过defineProperty对对象的已有属性值的读取和修改进行劫持(监视&#x2F;拦截)</li>
<li>数组: 通过重写数组更新数组一系列更新元素的方法来实现元素修改的劫持</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Object.defineProperty(data, &#x27;count&#x27;, &#123;</span><br><span class="line">    get () &#123;&#125;, </span><br><span class="line">    set () &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>问题 </p>
</li>
<li><ul>
<li>对象直接新添加的属性或删除已有属性, 界面不会自动更新</li>
<li>直接通过下标替换元素或更新length, 界面不会自动更新 arr[1] &#x3D; {}</li>
</ul>
</li>
</ul>
<h4 id="Vue3的响应式"><a href="#Vue3的响应式" class="headerlink" title="Vue3的响应式"></a>Vue3的响应式</h4><p>核心: </p>
<ul>
<li><p>通过Proxy(代理): 拦截对data任意属性的任意(13种)操作, 包括属性值的读写, 属性的添加, 属性的删除等…</p>
</li>
<li><p>通过 Reflect(反射): 动态对被代理对象的相应属性进行特定的操作</p>
</li>
<li><p>文档: </p>
</li>
<li><ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">new Proxy(data, &#123;</span><br><span class="line">	// 拦截读取属性值</span><br><span class="line">    get (target, prop) &#123;</span><br><span class="line">    	return Reflect.get(target, prop)</span><br><span class="line">    &#125;,</span><br><span class="line">    // 拦截设置属性值或添加新属性</span><br><span class="line">    set (target, prop, value) &#123;</span><br><span class="line">    	return Reflect.set(target, prop, value)</span><br><span class="line">    &#125;,</span><br><span class="line">    // 拦截删除属性</span><br><span class="line">    deleteProperty (target, prop) &#123;</span><br><span class="line">    	return Reflect.deleteProperty(target, prop)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">proxy.name = &#x27;tom&#x27;   </span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;title&gt;Proxy 与 Reflect&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    </span><br><span class="line">    const user = &#123;</span><br><span class="line">      name: &quot;John&quot;,</span><br><span class="line">      age: 12</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    /* </span><br><span class="line">    proxyUser是代理对象, user是被代理对象</span><br><span class="line">    后面所有的操作都是通过代理对象来操作被代理对象内部属性</span><br><span class="line">    */</span><br><span class="line">    const proxyUser = new Proxy(user, &#123;</span><br><span class="line"></span><br><span class="line">      get(target, prop) &#123;</span><br><span class="line">        console.log(&#x27;劫持get()&#x27;, prop)</span><br><span class="line">        return Reflect.get(target, prop)</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      set(target, prop, val) &#123;</span><br><span class="line">        console.log(&#x27;劫持set()&#x27;, prop, val)</span><br><span class="line">        return Reflect.set(target, prop, val); // (2)</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      deleteProperty (target, prop) &#123;</span><br><span class="line">        console.log(&#x27;劫持delete属性&#x27;, prop)</span><br><span class="line">        return Reflect.deleteProperty(target, prop)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    // 读取属性值</span><br><span class="line">    console.log(proxyUser===user)</span><br><span class="line">    console.log(proxyUser.name, proxyUser.age)</span><br><span class="line">    // 设置属性值</span><br><span class="line">    proxyUser.name = &#x27;bob&#x27;</span><br><span class="line">    proxyUser.age = 13</span><br><span class="line">    console.log(user)</span><br><span class="line">    // 添加属性</span><br><span class="line">    proxyUser.sex = &#x27;男&#x27;</span><br><span class="line">    console.log(user)</span><br><span class="line">    // 删除属性</span><br><span class="line">    delete proxyUser.sex</span><br><span class="line">    console.log(user)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h3 id="（5）setup细节"><a href="#（5）setup细节" class="headerlink" title="（5）setup细节"></a>（5）setup细节</h3><ul>
<li><p>setup执行的时机</p>
</li>
<li><ul>
<li>在beforeCreate之前执行(一次), 此时组件对象还没有创建</li>
<li>this是undefined, 不能通过this来访问data&#x2F;computed&#x2F;methods &#x2F; props</li>
<li>其实所有的composition API相关回调函数中也都不可以</li>
</ul>
</li>
<li><p>setup的返回值</p>
</li>
<li><ul>
<li>一般都返回一个对象: 为模板提供数据, 也就是模板中可以直接使用此对象中的所有属性&#x2F;方法</li>
<li>返回对象中的属性会与data函数返回对象的属性合并成为组件对象的属性</li>
<li>返回对象中的方法会与methods中的方法合并成功组件对象的方法</li>
<li>如果有重名, setup优先</li>
<li>注意:</li>
<li>一般不要混合使用: methods中可以访问setup提供的属性和方法, 但在setup方法中不能访问data和methods</li>
<li>setup不能是一个async函数: 因为返回值不再是return的对象, 而是promise, 模板看不到return对象中的属性数据</li>
</ul>
</li>
<li><p>setup的参数</p>
</li>
<li><ul>
<li>setup(props, context) &#x2F; setup(props, {attrs, slots, emit})</li>
<li>props: 包含props配置声明且传入了的所有属性的对象</li>
<li>attrs: 包含没有在props配置中声明的属性的对象, 相当于 this.$attrs</li>
<li>slots: 包含所有传入的插槽内容的对象, 相当于 this.$slots</li>
<li>emit: 用来分发自定义事件的函数, 相当于 this.$emit</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;App&lt;/h2&gt;</span><br><span class="line">  &lt;p&gt;msg: &#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;button @click=&quot;fn(&#x27;--&#x27;)&quot;&gt;更新&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">  &lt;child :msg=&quot;msg&quot; msg2=&quot;cba&quot; @fn=&quot;fn&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123;</span><br><span class="line">  reactive,</span><br><span class="line">  ref,</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line">import child from &#x27;./child.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line"></span><br><span class="line">  components: &#123;</span><br><span class="line">    child</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  setup () &#123;</span><br><span class="line">    const msg = ref(&#x27;abc&#x27;)</span><br><span class="line"></span><br><span class="line">    function fn (content: string) &#123;</span><br><span class="line">      msg.value += content</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      msg,</span><br><span class="line">      fn</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123;n&#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123;m&#125;&#125;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;msg: &#123;&#123;msg&#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;msg2: &#123;&#123;$attrs.msg2&#125;&#125;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">    &lt;slot name=&quot;xxx&quot;&gt;&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">    &lt;button @click=&quot;update&quot;&gt;更新&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line"></span><br><span class="line">import &#123;</span><br><span class="line">  ref,</span><br><span class="line">  defineComponent</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  name: &#x27;child&#x27;,</span><br><span class="line"></span><br><span class="line">  props: [&#x27;msg&#x27;],</span><br><span class="line"></span><br><span class="line">  emits: [&#x27;fn&#x27;], // 可选的, 声明了更利于程序员阅读, 且可以对分发的事件数据进行校验</span><br><span class="line"></span><br><span class="line">  data () &#123;</span><br><span class="line">    console.log(&#x27;data&#x27;, this)</span><br><span class="line">    return &#123;</span><br><span class="line">      // n: 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  beforeCreate () &#123;</span><br><span class="line">    console.log(&#x27;beforeCreate&#x27;, this)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">    // update () &#123;</span><br><span class="line">    //   this.n++</span><br><span class="line">    //   this.m++</span><br><span class="line">    // &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // setup (props, context) &#123;</span><br><span class="line">  setup (props, &#123;attrs, emit, slots&#125;) &#123;</span><br><span class="line"></span><br><span class="line">    console.log(&#x27;setup&#x27;, this)</span><br><span class="line">    console.log(props.msg, attrs.msg2, slots, emit)</span><br><span class="line"></span><br><span class="line">    const m = ref(2)</span><br><span class="line">    const n = ref(3)</span><br><span class="line"></span><br><span class="line">    function update () &#123;</span><br><span class="line">      // console.log(&#x27;--&#x27;, this)</span><br><span class="line">      // this.n += 2 </span><br><span class="line">      // this.m += 2</span><br><span class="line"></span><br><span class="line">      m.value += 2</span><br><span class="line">      n.value += 2</span><br><span class="line"></span><br><span class="line">      // 分发自定义事件</span><br><span class="line">      emit(&#x27;fn&#x27;, &#x27;++&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      m,</span><br><span class="line">      n,</span><br><span class="line">      update,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（6）reactive与ref-细节"><a href="#（6）reactive与ref-细节" class="headerlink" title="（6）reactive与ref-细节"></a>（6）reactive与ref-细节</h3><ul>
<li>是Vue3的 composition API中2个最重要的响应式API</li>
<li>ref用来处理基本类型数据, reactive用来处理对象(递归深度响应式)</li>
<li>如果用ref对象&#x2F;数组, 内部会自动将对象&#x2F;数组转换为reactive的代理对象</li>
<li>ref内部: 通过给value属性添加getter&#x2F;setter来实现对数据的劫持</li>
<li>reactive内部: 通过使用Proxy来实现对对象内部所有数据的劫持, 并通过Reflect操作对象内部数据</li>
<li>ref的数据操作: 在js中要.value, 在模板中不需要(内部解析模板时会自动添加.value)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;App&lt;/h2&gt;</span><br><span class="line">  &lt;p&gt;m1: &#123;&#123;m1&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;m2: &#123;&#123;m2&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;m3: &#123;&#123;m3&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;button @click=&quot;update&quot;&gt;更新&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123;</span><br><span class="line">  reactive,</span><br><span class="line">  ref</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line"></span><br><span class="line">  setup () &#123;</span><br><span class="line">    const m1 = ref(&#x27;abc&#x27;)</span><br><span class="line">    const m2 = reactive(&#123;x: 1, y: &#123;z: &#x27;abc&#x27;&#125;&#125;)</span><br><span class="line"></span><br><span class="line">    // 使用ref处理对象  ==&gt; 对象会被自动reactive为proxy对象</span><br><span class="line">    const m3 = ref(&#123;a1: 2, a2: &#123;a3: &#x27;abc&#x27;&#125;&#125;)</span><br><span class="line">    console.log(m1, m2, m3)</span><br><span class="line">    console.log(m3.value.a2) // 也是一个proxy对象</span><br><span class="line"></span><br><span class="line">    function update() &#123;</span><br><span class="line">      m1.value += &#x27;--&#x27;</span><br><span class="line">      m2.x += 1</span><br><span class="line">      m2.y.z += &#x27;++&#x27;</span><br><span class="line"></span><br><span class="line">      m3.value = &#123;a1: 3, a2: &#123;a3: &#x27;abc---&#x27;&#125;&#125;</span><br><span class="line">      m3.value.a2.a3 += &#x27;==&#x27; // reactive对对象进行了深度数据劫持</span><br><span class="line">      console.log(m3.value.a2)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      m1,</span><br><span class="line">      m2,</span><br><span class="line">      m3,</span><br><span class="line">      update</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（7）计算属性与监视"><a href="#（7）计算属性与监视" class="headerlink" title="（7）计算属性与监视"></a>（7）计算属性与监视</h3><ul>
<li><p>computed函数:</p>
</li>
<li><ul>
<li>与computed配置功能一致</li>
<li>只有getter</li>
<li>有getter和setter</li>
</ul>
</li>
<li><p>watch函数</p>
</li>
<li><ul>
<li>与watch配置功能一致</li>
<li>监视指定的一个或多个响应式数据, 一旦数据变化, 就自动执行监视回调</li>
<li>默认初始时不执行回调, 但可以通过配置immediate为true, 来指定初始时立即执行第一次</li>
<li>通过配置deep为true, 来指定深度监视</li>
</ul>
</li>
<li><p>watchEffect函数</p>
</li>
<li><ul>
<li>不用直接指定要监视的数据, 回调函数中使用的哪些响应式数据就监视哪些响应式数据</li>
<li>默认初始时就会执行第一次, 从而可以收集需要监视的数据</li>
<li>监视数据发生变化时回调</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;App&lt;/h2&gt;</span><br><span class="line">  fistName: &lt;input v-model=&quot;user.firstName&quot;/&gt;&lt;br&gt;</span><br><span class="line">  lastName: &lt;input v-model=&quot;user.lastName&quot;/&gt;&lt;br&gt;</span><br><span class="line">  fullName1: &lt;input v-model=&quot;fullName1&quot;/&gt;&lt;br&gt;</span><br><span class="line">  fullName2: &lt;input v-model=&quot;fullName2&quot;&gt;&lt;br&gt;</span><br><span class="line">  fullName3: &lt;input v-model=&quot;fullName3&quot;&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123;</span><br><span class="line">  reactive,</span><br><span class="line">  ref,</span><br><span class="line">  computed,</span><br><span class="line">  watch,</span><br><span class="line">  watchEffect</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line"></span><br><span class="line">  setup () &#123;</span><br><span class="line">    const user = reactive(&#123;</span><br><span class="line">      firstName: &#x27;A&#x27;,</span><br><span class="line">      lastName: &#x27;B&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    // 只有getter的计算属性</span><br><span class="line">    const fullName1 = computed(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;fullName1&#x27;)</span><br><span class="line">      return user.firstName + &#x27;-&#x27; + user.lastName</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    // 有getter与setter的计算属性</span><br><span class="line">    const fullName2 = computed(&#123;</span><br><span class="line">      get () &#123;</span><br><span class="line">        console.log(&#x27;fullName2 get&#x27;)</span><br><span class="line">        return user.firstName + &#x27;-&#x27; + user.lastName</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      set (value: string) &#123;</span><br><span class="line">        console.log(&#x27;fullName2 set&#x27;)</span><br><span class="line">        const names = value.split(&#x27;-&#x27;)</span><br><span class="line">        user.firstName = names[0]</span><br><span class="line">        user.lastName = names[1]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    const fullName3 = ref(&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">    /* </span><br><span class="line">    watchEffect: 监视所有回调中使用的数据</span><br><span class="line">    */</span><br><span class="line">    /* </span><br><span class="line">    watchEffect(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;watchEffect&#x27;)</span><br><span class="line">      fullName3.value = user.firstName + &#x27;-&#x27; + user.lastName</span><br><span class="line">    &#125;) </span><br><span class="line">    */</span><br><span class="line"></span><br><span class="line">    /* </span><br><span class="line">    使用watch的2个特性:</span><br><span class="line">      深度监视</span><br><span class="line">      初始化立即执行</span><br><span class="line">    */</span><br><span class="line">    watch(user, () =&gt; &#123;</span><br><span class="line">      fullName3.value = user.firstName + &#x27;-&#x27; + user.lastName</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      immediate: true,  // 是否初始化立即执行一次, 默认是false</span><br><span class="line">      deep: true, // 是否是深度监视, 默认是false</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    /* </span><br><span class="line">    watch一个数据</span><br><span class="line">      默认在数据发生改变时执行回调</span><br><span class="line">    */</span><br><span class="line">    watch(fullName3, (value) =&gt; &#123;</span><br><span class="line">      console.log(&#x27;watch&#x27;)</span><br><span class="line">      const names = value.split(&#x27;-&#x27;)</span><br><span class="line">      user.firstName = names[0]</span><br><span class="line">      user.lastName = names[1]</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    /* </span><br><span class="line">    watch多个数据: </span><br><span class="line">      使用数组来指定</span><br><span class="line">      如果是ref对象, 直接指定</span><br><span class="line">      如果是reactive对象中的属性,  必须通过函数来指定</span><br><span class="line">    */</span><br><span class="line">    watch([() =&gt; user.firstName, () =&gt; user.lastName, fullName3], (values) =&gt; &#123;</span><br><span class="line">      console.log(&#x27;监视多个数据&#x27;, values)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      user,</span><br><span class="line">      fullName1,</span><br><span class="line">      fullName2,</span><br><span class="line">      fullName3</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（8）-生命周期"><a href="#（8）-生命周期" class="headerlink" title="（8） 生命周期"></a>（8） 生命周期</h3><p><strong>与 2.x 版本生命周期相对应的组合式 API</strong></p>
<ul>
<li>beforeCreate -&gt; 使用 setup()</li>
<li>created -&gt; 使用 setup()</li>
<li>beforeMount -&gt; onBeforeMount</li>
<li>mounted -&gt; onMounted</li>
<li>beforeUpdate -&gt; onBeforeUpdate</li>
<li>updated -&gt; onUpdated</li>
<li>beforeDestroy -&gt; onBeforeUnmount</li>
<li>destroyed -&gt; onUnmounted</li>
<li>errorCaptured -&gt; onErrorCaptured</li>
</ul>
<p><strong>新增的钩子函数</strong></p>
<p>组合式 API 还提供了以下调试钩子函数：</p>
<ul>
<li>onRenderTracked</li>
<li>onRenderTriggered</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;about&quot;&gt;</span><br><span class="line">  &lt;h2&gt;msg: &#123;&#123;msg&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;button @click=&quot;update&quot;&gt;更新&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123;</span><br><span class="line">  ref,</span><br><span class="line">  onMounted,</span><br><span class="line">  onUpdated,</span><br><span class="line">  onUnmounted, </span><br><span class="line">  onBeforeMount, </span><br><span class="line">  onBeforeUpdate,</span><br><span class="line">  onBeforeUnmount</span><br><span class="line">&#125; from &quot;vue&quot;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  beforeCreate () &#123;</span><br><span class="line">    console.log(&#x27;beforeCreate()&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  created () &#123;</span><br><span class="line">    console.log(&#x27;created&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  beforeMount () &#123;</span><br><span class="line">    console.log(&#x27;beforeMount&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  mounted () &#123;</span><br><span class="line">    console.log(&#x27;mounted&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  beforeUpdate () &#123;</span><br><span class="line">    console.log(&#x27;beforeUpdate&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  updated () &#123;</span><br><span class="line">    console.log(&#x27;updated&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  beforeUnmount () &#123;</span><br><span class="line">    console.log(&#x27;beforeUnmount&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  unmounted () &#123;</span><br><span class="line">     console.log(&#x27;unmounted&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  setup() &#123;</span><br><span class="line">    </span><br><span class="line">    const msg = ref(&#x27;abc&#x27;)</span><br><span class="line"></span><br><span class="line">    const update = () =&gt; &#123;</span><br><span class="line">      msg.value += &#x27;--&#x27;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    onBeforeMount(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;--onBeforeMount&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;--onMounted&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    onBeforeUpdate(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;--onBeforeUpdate&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    onUpdated(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;--onUpdated&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    onBeforeUnmount(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;--onBeforeUnmount&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    onUnmounted(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;--onUnmounted&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    return &#123;</span><br><span class="line">      msg,</span><br><span class="line">      update</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;App&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;isShow=!isShow&quot;&gt;切换&lt;/button&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;Child v-if=&quot;isShow&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line"></span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isShow: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  components: &#123;</span><br><span class="line">    Child</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（9）自定义hook函数"><a href="#（9）自定义hook函数" class="headerlink" title="（9）自定义hook函数"></a>（9）自定义hook函数</h3><ul>
<li>使用Vue3的组合API封装的可复用的功能函数</li>
<li>自定义hook的作用类似于vue2中的mixin技术</li>
<li>自定义Hook的优势: 很清楚复用功能代码的来源, 更清楚易懂</li>
<li>需求1: 收集用户鼠标点击的页面坐标hooks&#x2F;useMousePosition.ts</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">mport &#123; ref, onMounted, onUnmounted &#125; from &#x27;vue&#x27;</span><br><span class="line">/* </span><br><span class="line">收集用户鼠标点击的页面坐标</span><br><span class="line">*/</span><br><span class="line">export default function useMousePosition () &#123;</span><br><span class="line">  // 初始化坐标数据</span><br><span class="line">  const x = ref(-1)</span><br><span class="line">  const y = ref(-1)</span><br><span class="line"></span><br><span class="line">  // 用于收集点击事件坐标的函数</span><br><span class="line">  const updatePosition = (e: MouseEvent) =&gt; &#123;</span><br><span class="line">    x.value = e.pageX</span><br><span class="line">    y.value = e.pageY</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 挂载后绑定点击监听</span><br><span class="line">  onMounted(() =&gt; &#123;</span><br><span class="line">    document.addEventListener(&#x27;click&#x27;, updatePosition)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // 卸载前解绑点击监听</span><br><span class="line">  onUnmounted(() =&gt; &#123;</span><br><span class="line">    document.removeEventListener(&#x27;click&#x27;, updatePosition)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  return &#123;x, y&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;h2&gt;x: &#123;&#123;x&#125;&#125;, y: &#123;&#123;y&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">import &#123;</span><br><span class="line">  ref</span><br><span class="line">&#125; from &quot;vue&quot;</span><br><span class="line">/* </span><br><span class="line">在组件中引入并使用自定义hook</span><br><span class="line">自定义hook的作用类似于vue2中的mixin技术</span><br><span class="line">自定义Hook的优势: 很清楚复用功能代码的来源, 更清楚易懂</span><br><span class="line">*/</span><br><span class="line">import useMousePosition from &#x27;./hooks/useMousePosition&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line"></span><br><span class="line">    const &#123;x, y&#125; = useMousePosition()</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      x,</span><br><span class="line">      y,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>利用TS泛型强化类型检查</li>
<li>需求2: 封装发ajax请求的hook函数</li>
</ul>
<p>​       hooks&#x2F;useRequest.ts</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line"></span><br><span class="line">/* </span><br><span class="line">使用axios发送异步ajax请求</span><br><span class="line">*/</span><br><span class="line">export default function useUrlLoader&lt;T&gt;(url: string) &#123;</span><br><span class="line"></span><br><span class="line">  const result = ref&lt;T | null&gt;(null)</span><br><span class="line">  const loading = ref(true)</span><br><span class="line">  const errorMsg = ref(null)</span><br><span class="line"></span><br><span class="line">  axios.get(url)</span><br><span class="line">    .then(response =&gt; &#123;</span><br><span class="line">      loading.value = false</span><br><span class="line">      result.value = response.data</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(e =&gt; &#123;</span><br><span class="line">      loading.value = false</span><br><span class="line">      errorMsg.value = e.message || &#x27;未知错误&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  return &#123;</span><br><span class="line">    loading,</span><br><span class="line">    result,</span><br><span class="line">    errorMsg,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;about&quot;&gt;</span><br><span class="line">  &lt;h2 v-if=&quot;loading&quot;&gt;LOADING...&lt;/h2&gt;</span><br><span class="line">  &lt;h2 v-else-if=&quot;errorMsg&quot;&gt;&#123;&#123;errorMsg&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;!-- &lt;ul v-else&gt;</span><br><span class="line">    &lt;li&gt;id: &#123;&#123;result.id&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;name: &#123;&#123;result.name&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;distance: &#123;&#123;result.distance&#125;&#125;&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt; --&gt;</span><br><span class="line"></span><br><span class="line">  &lt;ul v-for=&quot;p in result&quot; :key=&quot;p.id&quot;&gt;</span><br><span class="line">    &lt;li&gt;id: &#123;&#123;p.id&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;title: &#123;&#123;p.title&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;price: &#123;&#123;p.price&#125;&#125;&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">  &lt;!-- &lt;img v-if=&quot;result&quot; :src=&quot;result[0].url&quot; alt=&quot;&quot;&gt; --&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123;</span><br><span class="line">  watch</span><br><span class="line">&#125; from &quot;vue&quot;</span><br><span class="line">import useRequest from &#x27;./hooks/useRequest&#x27;</span><br><span class="line"></span><br><span class="line">// 地址数据接口</span><br><span class="line">interface AddressResult &#123;</span><br><span class="line">  id: number;</span><br><span class="line">  name: string;</span><br><span class="line">  distance: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 产品数据接口</span><br><span class="line">interface ProductResult &#123;</span><br><span class="line">  id: string;</span><br><span class="line">  title: string;</span><br><span class="line">  price: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line"></span><br><span class="line">    // const &#123;loading, result, errorMsg&#125; = useRequest&lt;AddressResult&gt;(&#x27;/data/address.json&#x27;)</span><br><span class="line">    const &#123;loading, result, errorMsg&#125; = useRequest&lt;ProductResult[]&gt;(&#x27;/data/products.json&#x27;)</span><br><span class="line"></span><br><span class="line">    watch(result, () =&gt; &#123;</span><br><span class="line">      if (result.value) &#123;</span><br><span class="line">        console.log(result.value.length) // 有提示</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      loading,</span><br><span class="line">      result, </span><br><span class="line">      errorMsg</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（10）-toRefs"><a href="#（10）-toRefs" class="headerlink" title="（10） toRefs"></a>（10） toRefs</h3><p>把一个响应式对象转换成普通对象，该普通对象的每个 property 都是一个 ref</p>
<p>应用: 当从合成函数返回响应式对象时，toRefs 非常有用，这样消费组件就可以在不丢失响应式的情况下对返回的对象进行分解使用</p>
<p>问题: reactive 对象取出的所有属性值都是非响应式的</p>
<p>解决: 利用 toRefs 可以将一个响应式 reactive 对象的所有原始属性转换为响应式的 ref 属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;App&lt;/h2&gt;</span><br><span class="line">  &lt;h3&gt;foo: &#123;&#123;foo&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h3&gt;bar: &#123;&#123;bar&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h3&gt;foo2: &#123;&#123;foo2&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h3&gt;bar2: &#123;&#123;bar2&#125;&#125;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive, toRefs &#125; from &#x27;vue&#x27;</span><br><span class="line">/*</span><br><span class="line">toRefs:</span><br><span class="line">  将响应式对象中所有属性包装为ref对象, 并返回包含这些ref对象的普通对象</span><br><span class="line">  应用: 当从合成函数返回响应式对象时，toRefs 非常有用，</span><br><span class="line">        这样消费组件就可以在不丢失响应式的情况下对返回的对象进行分解使用</span><br><span class="line">*/</span><br><span class="line">export default &#123;</span><br><span class="line"></span><br><span class="line">  setup () &#123;</span><br><span class="line"></span><br><span class="line">    const state = reactive(&#123;</span><br><span class="line">      foo: &#x27;a&#x27;,</span><br><span class="line">      bar: &#x27;b&#x27;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    const stateAsRefs = toRefs(state)</span><br><span class="line"></span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      state.foo += &#x27;++&#x27;</span><br><span class="line">      state.bar += &#x27;++&#x27;</span><br><span class="line">    &#125;, 2000);</span><br><span class="line"></span><br><span class="line">    const &#123;foo2, bar2&#125; = useReatureX()</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      // ...state,</span><br><span class="line">      ...stateAsRefs,</span><br><span class="line">      foo2, </span><br><span class="line">      bar2</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function useReatureX() &#123;</span><br><span class="line">  const state = reactive(&#123;</span><br><span class="line">    foo2: &#x27;a&#x27;,</span><br><span class="line">    bar2: &#x27;b&#x27;,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    state.foo2 += &#x27;++&#x27;</span><br><span class="line">    state.bar2 += &#x27;++&#x27;</span><br><span class="line">  &#125;, 2000);</span><br><span class="line"></span><br><span class="line">  return toRefs(state)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（11）-ref获取元素"><a href="#（11）-ref获取元素" class="headerlink" title="（11） ref获取元素"></a>（11） ref获取元素</h3><p>利用ref函数获取组件中的标签元素</p>
<p>功能需求: 让输入框自动获取焦点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;App&lt;/h2&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot;&gt;---</span><br><span class="line">  &lt;input type=&quot;text&quot; ref=&quot;inputRef&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; onMounted, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">/* </span><br><span class="line">ref获取元素: 利用ref函数获取组件中的标签元素</span><br><span class="line">功能需求: 让输入框自动获取焦点</span><br><span class="line">*/</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const inputRef = ref&lt;HTMLElement|null&gt;(null)</span><br><span class="line"></span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      inputRef.value &amp;&amp; inputRef.value.focus()</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      inputRef</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Composition-API-其它部分"><a href="#Composition-API-其它部分" class="headerlink" title="Composition API(其它部分)"></a>Composition API(其它部分)</h2><h3 id="（1）shallowReactive-与-shallowRef"><a href="#（1）shallowReactive-与-shallowRef" class="headerlink" title="（1）shallowReactive 与 shallowRef"></a>（1）shallowReactive 与 shallowRef</h3><ul>
<li>shallowReactive : 只处理了对象内最外层属性的响应式(也就是浅响应式)</li>
<li>shallowRef: 只处理了value的响应式, 不进行对象的reactive处理</li>
<li>什么时候用浅响应式呢?</li>
<li>一般情况下使用ref和reactive即可</li>
<li>如果有一个对象数据, 结构比较深, 但变化时只是外层属性变化 &#x3D;&#x3D;&#x3D;&gt; shallowReactive</li>
<li>如果有一个对象数据, 后面会产生新的对象来替换 &#x3D;&#x3D;&#x3D;&gt; shallowRef</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;App&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">  &lt;h3&gt;m1: &#123;&#123;m1&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h3&gt;m2: &#123;&#123;m2&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h3&gt;m3: &#123;&#123;m3&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h3&gt;m4: &#123;&#123;m4&#125;&#125;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">  &lt;button @click=&quot;update&quot;&gt;更新&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive, ref, shallowReactive, shallowRef &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line"></span><br><span class="line">  setup () &#123;</span><br><span class="line"></span><br><span class="line">    const m1 = reactive(&#123;a: 1, b: &#123;c: 2&#125;&#125;)</span><br><span class="line">    const m2 = shallowReactive(&#123;a: 1, b: &#123;c: 2&#125;&#125;)</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    const m3 = ref(&#123;a: 1, b: &#123;c: 2&#125;&#125;)</span><br><span class="line">    const m4 = shallowRef(&#123;a: 1, b: &#123;c: 2&#125;&#125;)</span><br><span class="line"></span><br><span class="line">    const update = () =&gt; &#123;</span><br><span class="line">      // m1.b.c += 1</span><br><span class="line">      // m2.b.c += 1</span><br><span class="line"></span><br><span class="line">      // m3.value.a += 1</span><br><span class="line">      m4.value.a += 1</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      m1,</span><br><span class="line">      m2,</span><br><span class="line">      m3,</span><br><span class="line">      m4,</span><br><span class="line">      update,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（2）readonly-与-shallowReadonly"><a href="#（2）readonly-与-shallowReadonly" class="headerlink" title="（2）readonly 与 shallowReadonly"></a>（2）readonly 与 shallowReadonly</h3><ul>
<li><p>readonly: </p>
</li>
<li><ul>
<li>深度只读数据</li>
<li>获取一个对象 (响应式或纯对象) 或 ref 并返回原始代理的只读代理。</li>
<li>只读代理是深层的：访问的任何嵌套 property 也是只读的。</li>
</ul>
</li>
<li><p>shallowReadonly </p>
</li>
<li><ul>
<li>浅只读数据</li>
<li>创建一个代理，使其自身的 property 为只读，但不执行嵌套对象的深度只读转换</li>
</ul>
</li>
<li><p>应用场景: </p>
</li>
<li><ul>
<li>在某些特定情况下, 我们可能不希望对数据进行更新的操作, 那就可以包装生成一个只读代理对象来读取数据, 而不能修改或删除</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;App&lt;/h2&gt;</span><br><span class="line">  &lt;h3&gt;&#123;&#123;state&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;button @click=&quot;update&quot;&gt;更新&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive, readonly, shallowReadonly &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line"></span><br><span class="line">  setup () &#123;</span><br><span class="line"></span><br><span class="line">    const state = reactive(&#123;</span><br><span class="line">      a: 1,</span><br><span class="line">      b: &#123;</span><br><span class="line">        c: 2</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    // const rState1 = readonly(state)</span><br><span class="line">    const rState2 = shallowReadonly(state)</span><br><span class="line"></span><br><span class="line">    const update = () =&gt; &#123;</span><br><span class="line">      // rState1.a++ // error</span><br><span class="line">      // rState1.b.c++ // error</span><br><span class="line"></span><br><span class="line">      // rState2.a++ // error</span><br><span class="line">      rState2.b.c++</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return &#123;</span><br><span class="line">      state,</span><br><span class="line">      update</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（3）-toRaw-与-markRaw"><a href="#（3）-toRaw-与-markRaw" class="headerlink" title="（3） toRaw 与 markRaw"></a>（3） toRaw 与 markRaw</h3><ul>
<li><p>toRaw </p>
</li>
<li><ul>
<li>返回由 reactive 或 readonly 方法转换成响应式代理的普通对象。</li>
<li>这是一个还原方法，可用于临时读取，访问不会被代理&#x2F;跟踪，写入时也不会触发界面更新。</li>
</ul>
</li>
<li><p>markRaw </p>
</li>
<li><ul>
<li>标记一个对象，使其永远不会转换为代理。返回对象本身</li>
<li>应用场景:</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>有些值不应被设置为响应式的，例如复杂的第三方类实例或 Vue 组件对象。</li>
<li>当渲染具有不可变数据源的大列表时，跳过代理转换可以提高性能。</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;state&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;testToRaw&quot;&gt;测试toRaw&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;testMarkRaw&quot;&gt;测试markRaw&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">/* </span><br><span class="line">toRaw: 得到reactive代理对象的目标数据对象</span><br><span class="line">*/</span><br><span class="line">import &#123;</span><br><span class="line">  markRaw,</span><br><span class="line">  reactive, toRaw,</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup () &#123;</span><br><span class="line">    const state = reactive&lt;any&gt;(&#123;</span><br><span class="line">      name: &#x27;tom&#x27;,</span><br><span class="line">      age: 25,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    const testToRaw = () =&gt; &#123;</span><br><span class="line">      const user = toRaw(state)</span><br><span class="line">      user.age++  // 界面不会更新</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const testMarkRaw = () =&gt; &#123;</span><br><span class="line">      const likes = [&#x27;a&#x27;, &#x27;b&#x27;]</span><br><span class="line">      // state.likes = likes</span><br><span class="line">      state.likes = markRaw(likes) // likes数组就不再是响应式的了</span><br><span class="line">      setTimeout(() =&gt; &#123;</span><br><span class="line">        state.likes[0] += &#x27;--&#x27;</span><br><span class="line">      &#125;, 1000)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      state,</span><br><span class="line">      testToRaw,</span><br><span class="line">      testMarkRaw,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（4）toRef"><a href="#（4）toRef" class="headerlink" title="（4）toRef"></a>（4）toRef</h3><ul>
<li>为源响应式对象上的某个属性创建一个 ref对象, 二者内部操作的是同一个数据值, 更新时二者是同步的</li>
<li>区别ref: 拷贝了一份新的数据值单独操作, 更新时相互不影响</li>
<li>应用: 当要将 某个prop 的 ref 传递给复合函数时，toRef 很有用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;App&lt;/h2&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123;state&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123;foo&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123;foo2&#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">  &lt;button @click=&quot;update&quot;&gt;更新&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">  &lt;Child :foo=&quot;foo&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">/*</span><br><span class="line">toRef:</span><br><span class="line">  为源响应式对象上的某个属性创建一个 ref对象, 二者内部操作的是同一个数据值, 更新时二者是同步的</span><br><span class="line">  区别ref: 拷贝了一份新的数据值单独操作, 更新时相互不影响</span><br><span class="line">  应用: 当要将某个 prop 的 ref 传递给复合函数时，toRef 很有用</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">import &#123;</span><br><span class="line">  reactive,</span><br><span class="line">  toRef,</span><br><span class="line">  ref,</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line">import Child from &#x27;./Child.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line"></span><br><span class="line">  setup () &#123;</span><br><span class="line"></span><br><span class="line">    const state = reactive(&#123;</span><br><span class="line">      foo: 1,</span><br><span class="line">      bar: 2</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    const foo = toRef(state, &#x27;foo&#x27;)</span><br><span class="line">    const foo2 = ref(state.foo)</span><br><span class="line"></span><br><span class="line">    const update = () =&gt; &#123;</span><br><span class="line">      state.foo++</span><br><span class="line">      // foo.value++</span><br><span class="line">      // foo2.value++  // foo和state中的数据不会更新</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      state,</span><br><span class="line">      foo,</span><br><span class="line">      foo2,</span><br><span class="line">      update,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  components: &#123;</span><br><span class="line">    Child</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;Child&lt;/h2&gt;</span><br><span class="line">  &lt;h3&gt;&#123;&#123;foo&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h3&gt;&#123;&#123;length&#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed, defineComponent, Ref, toRef &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const component = defineComponent(&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    foo: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      require: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  setup (props, context) &#123;</span><br><span class="line">    const length = useFeatureX(toRef(props, &#x27;foo&#x27;))</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      length</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function useFeatureX(foo: Ref) &#123;</span><br><span class="line">  const lenth = computed(() =&gt; foo.value.length)</span><br><span class="line"></span><br><span class="line">  return lenth</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default component</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（5）customRef"><a href="#（5）customRef" class="headerlink" title="（5）customRef"></a>（5）customRef</h3><ul>
<li>创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制</li>
<li>需求: 使用 customRef 实现 debounce 的示例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;App&lt;/h2&gt;</span><br><span class="line">  &lt;input v-model=&quot;keyword&quot; placeholder=&quot;搜索关键字&quot;/&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123;keyword&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">/*</span><br><span class="line">customRef:</span><br><span class="line">  创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制</span><br><span class="line"></span><br><span class="line">需求: </span><br><span class="line">  使用 customRef 实现 debounce 的示例</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">import &#123;</span><br><span class="line">  ref,</span><br><span class="line">  customRef</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line"></span><br><span class="line">  setup () &#123;</span><br><span class="line">    const keyword = useDebouncedRef(&#x27;&#x27;, 500)</span><br><span class="line">    console.log(keyword)</span><br><span class="line">    return &#123;</span><br><span class="line">      keyword</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* </span><br><span class="line">实现函数防抖的自定义ref</span><br><span class="line">*/</span><br><span class="line">function useDebouncedRef&lt;T&gt;(value: T, delay = 200) &#123;</span><br><span class="line">  let timeout: number</span><br><span class="line">  return customRef((track, trigger) =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        // 告诉Vue追踪数据</span><br><span class="line">        track()</span><br><span class="line">        return value</span><br><span class="line">      &#125;,</span><br><span class="line">      set(newValue: T) &#123;</span><br><span class="line">        clearTimeout(timeout)</span><br><span class="line">        timeout = setTimeout(() =&gt; &#123;</span><br><span class="line">          value = newValue</span><br><span class="line">          // 告诉Vue去触发界面更新</span><br><span class="line">          trigger()</span><br><span class="line">        &#125;, delay)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（6）provide-与-inject"><a href="#（6）provide-与-inject" class="headerlink" title="（6）provide 与 inject"></a>（6）provide 与 inject</h3><ul>
<li>provide和inject提供依赖注入，功能类似 2.x 的provide&#x2F;inject</li>
<li>实现跨层级组件(祖孙)间通信</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;父组件&lt;/h1&gt;</span><br><span class="line">  &lt;p&gt;当前颜色: &#123;&#123;color&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;button @click=&quot;color=&#x27;red&#x27;&quot;&gt;红&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;color=&#x27;yellow&#x27;&quot;&gt;黄&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;color=&#x27;blue&#x27;&quot;&gt;蓝&lt;/button&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;Son /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; provide, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">/* </span><br><span class="line">- provide` 和 `inject` 提供依赖注入，功能类似 2.x 的 `provide/inject</span><br><span class="line">- 实现跨层级组件(祖孙)间通信</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">import Son from &#x27;./Son.vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;ProvideInject&#x27;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    Son</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    </span><br><span class="line">    const color = ref(&#x27;red&#x27;)</span><br><span class="line"></span><br><span class="line">    provide(&#x27;color&#x27;, color)</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      color</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;子组件&lt;/h2&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;GrandSon /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import GrandSon from &#x27;./GrandSon.vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    GrandSon</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h3 :style=&quot;&#123;color&#125;&quot;&gt;孙子组件: &#123;&#123;color&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  </span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; inject &#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const color = inject(&#x27;color&#x27;)</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      color</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（7）响应式数据的判断"><a href="#（7）响应式数据的判断" class="headerlink" title="（7）响应式数据的判断"></a>（7）响应式数据的判断</h3><ul>
<li>isRef: 检查一个值是否为一个 ref 对象</li>
<li>isReactive: 检查一个对象是否是由 reactive 创建的响应式代理</li>
<li>isReadonly: 检查一个对象是否是由 readonly 创建的只读代理</li>
<li>isProxy: 检查一个对象是否是由 reactive 或者 readonly 方法创建的代理</li>
</ul>
<h2 id="手写组合API"><a href="#手写组合API" class="headerlink" title="手写组合API"></a>手写组合API</h2><h3 id="（1）-shallowReactive-与-reactive"><a href="#（1）-shallowReactive-与-reactive" class="headerlink" title="（1） shallowReactive 与 reactive"></a>（1） shallowReactive 与 reactive</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reactiveHandler = &#123;</span><br><span class="line">  get (target, key) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (key===<span class="string">&#x27;_is_reactive&#x27;</span>) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  set (target, key, value) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, value)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据已更新, 去更新界面&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  deleteProperty (target, key) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, key)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据已删除, 去更新界面&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">自定义shallowReactive</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">shallowReactive</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, reactiveHandler)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">自定义reactive</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reactive</span> (target) &#123;</span><br><span class="line">  <span class="keyword">if</span> (target &amp;&amp; <span class="keyword">typeof</span> target===<span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (target <span class="keyword">instanceof</span> <span class="title class_">Array</span>) &#123; <span class="comment">// 数组</span></span><br><span class="line">      target.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        target[index] = <span class="title function_">reactive</span>(item)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// 对象</span></span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">keys</span>(target).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        target[key] = <span class="title function_">reactive</span>(target[key])</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, reactiveHandler)</span><br><span class="line">    <span class="keyword">return</span> proxy</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> target</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 测试自定义shallowReactive */</span></span><br><span class="line"><span class="keyword">const</span> proxy = <span class="title function_">shallowReactive</span>(&#123;</span><br><span class="line">  <span class="attr">a</span>: &#123;</span><br><span class="line">    <span class="attr">b</span>: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">proxy.<span class="property">a</span> = &#123;<span class="attr">b</span>: <span class="number">4</span>&#125; <span class="comment">// 劫持到了</span></span><br><span class="line">proxy.<span class="property">a</span>.<span class="property">b</span> = <span class="number">5</span> <span class="comment">// 没有劫持到</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 测试自定义reactive */</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">  <span class="attr">b</span>: [&#123;<span class="attr">x</span>: <span class="number">1</span>&#125;],</span><br><span class="line">  <span class="attr">c</span>: &#123;<span class="attr">x</span>: [<span class="number">11</span>]&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> proxy = <span class="title function_">reactive</span>(obj)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(proxy)</span><br><span class="line">proxy.<span class="property">b</span>[<span class="number">0</span>].<span class="property">x</span> += <span class="number">1</span></span><br><span class="line">proxy.<span class="property">c</span>.<span class="property">x</span>[<span class="number">0</span>] += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="（2）shallowRef-与-ref"><a href="#（2）shallowRef-与-ref" class="headerlink" title="（2）shallowRef 与 ref"></a>（2）shallowRef 与 ref</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">自定义shallowRef</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">shallowRef</span>(<span class="params">target</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = &#123;</span><br><span class="line">    <span class="attr">_value</span>: target, <span class="comment">// 用来保存数据的内部属性</span></span><br><span class="line">    <span class="attr">_is_ref</span>: <span class="literal">true</span>, <span class="comment">// 用来标识是ref对象</span></span><br><span class="line">    get value () &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_value</span></span><br><span class="line">    &#125;,</span><br><span class="line">    set value (val) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">_value</span> = val</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;set value 数据已更新, 去更新界面&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">自定义ref</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ref</span>(<span class="params">target</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (target &amp;&amp; <span class="keyword">typeof</span> target===<span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">    target = <span class="title function_">reactive</span>(target)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> result = &#123;</span><br><span class="line">    <span class="attr">_value</span>: target, <span class="comment">// 用来保存数据的内部属性</span></span><br><span class="line">    <span class="attr">_is_ref</span>: <span class="literal">true</span>, <span class="comment">// 用来标识是ref对象</span></span><br><span class="line">    get value () &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_value</span></span><br><span class="line">    &#125;,</span><br><span class="line">    set value (val) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">_value</span> = val</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;set value 数据已更新, 去更新界面&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 测试自定义shallowRef */</span></span><br><span class="line"><span class="keyword">const</span> ref3 = <span class="title function_">shallowRef</span>(&#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line">ref3.<span class="property">value</span> = <span class="string">&#x27;xxx&#x27;</span></span><br><span class="line">ref3.<span class="property">value</span>.<span class="property">a</span> = <span class="string">&#x27;yyy&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 测试自定义ref */</span></span><br><span class="line"><span class="keyword">const</span> ref1 = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">const</span> ref2 = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">  <span class="attr">b</span>: [&#123;<span class="attr">x</span>: <span class="number">1</span>&#125;],</span><br><span class="line">  <span class="attr">c</span>: &#123;<span class="attr">x</span>: [<span class="number">11</span>]&#125;,</span><br><span class="line">&#125;)</span><br><span class="line">ref1.<span class="property">value</span>++</span><br><span class="line">ref2.<span class="property">value</span>.<span class="property">b</span>[<span class="number">0</span>].<span class="property">x</span>++</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ref1, ref2)</span><br></pre></td></tr></table></figure>

<h3 id="（3）-shallowReadonly-与-readonly"><a href="#（3）-shallowReadonly-与-readonly" class="headerlink" title="（3） shallowReadonly 与 readonly"></a>（3） shallowReadonly 与 readonly</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> readonlyHandler = &#123;</span><br><span class="line">  get (target, key) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key===<span class="string">&#x27;_is_readonly&#x27;</span>) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  set () &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;只读的, 不能修改&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  deleteProperty () &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;只读的, 不能删除&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">自定义shallowReadonly</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">shallowReadonly</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, readonlyHandler)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">自定义readonly</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">readonly</span>(<span class="params">target</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (target &amp;&amp; <span class="keyword">typeof</span> target===<span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (target <span class="keyword">instanceof</span> <span class="title class_">Array</span>) &#123; <span class="comment">// 数组</span></span><br><span class="line">      target.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        target[index] = <span class="title function_">readonly</span>(item)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// 对象</span></span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">keys</span>(target).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        target[key] = <span class="title function_">readonly</span>(target[key])</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, readonlyHandler)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> proxy </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> target</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 测试自定义readonly */</span></span><br><span class="line"><span class="comment">/* 测试自定义shallowReadonly */</span></span><br><span class="line"><span class="keyword">const</span> objReadOnly = <span class="title function_">readonly</span>(&#123;</span><br><span class="line">  <span class="attr">a</span>: &#123;</span><br><span class="line">    <span class="attr">b</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> objReadOnly2 = <span class="title function_">shallowReadonly</span>(&#123;</span><br><span class="line">  <span class="attr">a</span>: &#123;</span><br><span class="line">    <span class="attr">b</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">objReadOnly.<span class="property">a</span> = <span class="number">1</span></span><br><span class="line">objReadOnly.<span class="property">a</span>.<span class="property">b</span> = <span class="number">2</span></span><br><span class="line">objReadOnly2.<span class="property">a</span> = <span class="number">1</span></span><br><span class="line">objReadOnly2.<span class="property">a</span>.<span class="property">b</span> = <span class="number">2</span></span><br></pre></td></tr></table></figure>

<h3 id="（4）-isRef-isReactive-与-isReadonly"><a href="#（4）-isRef-isReactive-与-isReadonly" class="headerlink" title="（4） isRef, isReactive 与 isReadonly"></a>（4） isRef, isReactive 与 isReadonly</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">判断是否是ref对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isRef</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> obj &amp;&amp; obj.<span class="property">_is_ref</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">判断是否是reactive对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isReactive</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> obj &amp;&amp; obj.<span class="property">_is_reactive</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">判断是否是readonly对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isReadonly</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> obj &amp;&amp; obj.<span class="property">_is_readonly</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">是否是reactive或readonly产生的代理对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isProxy</span> (obj) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">isReactive</span>(obj) || <span class="title function_">isReadonly</span>(obj)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 测试判断函数 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(<span class="title function_">reactive</span>(&#123;&#125;)))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isRef</span>(<span class="title function_">ref</span>(&#123;&#125;)))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReadonly</span>(<span class="title function_">readonly</span>(&#123;&#125;)))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isProxy</span>(<span class="title function_">reactive</span>(&#123;&#125;)))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isProxy</span>(<span class="title function_">readonly</span>(&#123;&#125;)))</span><br></pre></td></tr></table></figure>

<h2 id="Composition-API-VS-Option-API"><a href="#Composition-API-VS-Option-API" class="headerlink" title="Composition API VS Option API"></a>Composition API VS Option API</h2><h3 id="（1）Option-API的问题"><a href="#（1）Option-API的问题" class="headerlink" title="（1）Option API的问题"></a>（1）Option API的问题</h3><ul>
<li>在传统的Vue OptionsAPI中，新增或者修改一个需求，就需要分别在data，methods，computed里修改 ，滚动条反复上下移动</li>
</ul>
<h3 id="（2）-使用Compisition-API"><a href="#（2）-使用Compisition-API" class="headerlink" title="（2） 使用Compisition API"></a>（2） 使用Compisition API</h3><p>我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起</p>
<h1 id="四、其它新组合和API"><a href="#四、其它新组合和API" class="headerlink" title="四、其它新组合和API"></a>四、其它新组合和API</h1><h2 id="1-新组件"><a href="#1-新组件" class="headerlink" title="1. 新组件"></a>1. 新组件</h2><h3 id="（1）-Fragment-片断"><a href="#（1）-Fragment-片断" class="headerlink" title="（1） Fragment(片断)"></a>（1） Fragment(片断)</h3><ul>
<li>在Vue2中: 组件必须有一个根标签</li>
<li>在Vue3中: 组件可以没有根标签, 内部会将多个标签包含在一个Fragment虚拟元素中</li>
<li>好处: 减少标签层级, 减小内存占用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>aaaa<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>aaaa<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（2）-Teleport-瞬移"><a href="#（2）-Teleport-瞬移" class="headerlink" title="（2） Teleport(瞬移)"></a>（2） Teleport(瞬移)</h3><ul>
<li>Teleport 提供了一种干净的方法, 让组件的html在父组件界面外的特定标签(很可能是body)下插入显示</li>
</ul>
<p>ModalButton.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;modalOpen = true&quot;&gt;</span><br><span class="line">    Open full screen modal! (With teleport!)</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line"></span><br><span class="line">  &lt;teleport to=&quot;body&quot;&gt;</span><br><span class="line">    &lt;div v-if=&quot;modalOpen&quot; class=&quot;modal&quot;&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        I&#x27;m a teleported modal! </span><br><span class="line">        (My parent is &quot;body&quot;)</span><br><span class="line">        &lt;button @click=&quot;modalOpen = false&quot;&gt;</span><br><span class="line">          Close</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/teleport&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;modal-button&#x27;,</span><br><span class="line">    setup () &#123;</span><br><span class="line">      const modalOpen = ref(false)</span><br><span class="line">      return &#123;</span><br><span class="line">        modalOpen</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .modal &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 0; right: 0; bottom: 0; left: 0;</span><br><span class="line">    background-color: rgba(0,0,0,.5);</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    align-items: center;</span><br><span class="line">    justify-content: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .modal div &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    align-items: center;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    background-color: white;</span><br><span class="line">    width: 300px;</span><br><span class="line">    height: 300px;</span><br><span class="line">    padding: 5px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;App&lt;/h2&gt;</span><br><span class="line">  &lt;modal-button&gt;&lt;/modal-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import ModalButton from &#x27;./ModalButton.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  components: &#123;</span><br><span class="line">    ModalButton</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（3）-Suspense-不确定的"><a href="#（3）-Suspense-不确定的" class="headerlink" title="（3） Suspense(不确定的)"></a>（3） Suspense(不确定的)</h3><ul>
<li>它们允许我们的应用程序在等待异步组件时渲染一些后备内容，可以让我们创建一个平滑的用户体验</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Suspense&gt;</span><br><span class="line">    &lt;template v-slot:default&gt;</span><br><span class="line">      &lt;AsyncComp/&gt;</span><br><span class="line">      &lt;!-- &lt;AsyncAddress/&gt; --&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    &lt;template v-slot:fallback&gt;</span><br><span class="line">      &lt;h1&gt;LOADING...&lt;/h1&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/Suspense&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">/* </span><br><span class="line">异步组件 + Suspense组件</span><br><span class="line">*/</span><br><span class="line">// import AsyncComp from &#x27;./AsyncComp.vue&#x27;</span><br><span class="line">import AsyncAddress from &#x27;./AsyncAddress.vue&#x27;</span><br><span class="line">import &#123; defineAsyncComponent &#125; from &#x27;vue&#x27;</span><br><span class="line">const AsyncComp = defineAsyncComponent(() =&gt; import(&#x27;./AsyncComp.vue&#x27;))</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">     </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  components: &#123;</span><br><span class="line">    AsyncComp,</span><br><span class="line">    AsyncAddress</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>AsyncComp.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;AsyncComp22&lt;/h2&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;AsyncComp&#x27;,</span><br><span class="line">  setup () &#123;</span><br><span class="line">    // return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    //   setTimeout(() =&gt; &#123;</span><br><span class="line">    //     resolve(&#123;</span><br><span class="line">    //       msg: &#x27;abc&#x27;</span><br><span class="line">    //     &#125;)</span><br><span class="line">    //   &#125;, 2000)</span><br><span class="line">    // &#125;)</span><br><span class="line">    return &#123;</span><br><span class="line">      msg: &#x27;abc&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>AsyncAddress.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h2&gt;&#123;&#123;data&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  async setup() &#123;</span><br><span class="line">    const result = await axios.get(&#x27;/data/address.json&#x27;)</span><br><span class="line">    return &#123;</span><br><span class="line">      data: result.data</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="其他新的API"><a href="#其他新的API" class="headerlink" title="其他新的API"></a>其他新的API</h2><h3 id="全新的全局API"><a href="#全新的全局API" class="headerlink" title="全新的全局API"></a>全新的全局API</h3><ul>
<li>createApp()</li>
<li>defineProperty()</li>
<li>defineAsyncComponent()</li>
<li>nextTick()</li>
</ul>
<h3 id="将原来的全局API转移到应用对象"><a href="#将原来的全局API转移到应用对象" class="headerlink" title="将原来的全局API转移到应用对象"></a>将原来的全局API转移到应用对象</h3><ul>
<li>app.component()</li>
<li>app.config()</li>
<li>app.directive()</li>
<li>app.mount()</li>
<li>app.unmount()</li>
<li>app.use()</li>
</ul>
<h3 id="模板语法变化"><a href="#模板语法变化" class="headerlink" title="模板语法变化"></a>模板语法变化</h3><ul>
<li><p>v-model的本质变化 </p>
</li>
<li><ul>
<li>prop：value -&gt; modelValue；</li>
<li>event：input -&gt; update:modelValue；</li>
</ul>
</li>
<li><p>.sync修改符已移除, 由v-model代替 </p>
</li>
<li><p>v-if优先v-for解析</p>
</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Git"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/01/29/Git/"
    >Git</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/01/29/Git/" class="article-date">
  <time datetime="2023-01-29T14:37:45.000Z" itemprop="datePublished">2023-01-29</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="git常用指令面板"><a href="#git常用指令面板" class="headerlink" title="git常用指令面板"></a>git常用指令面板</h2><p><img src="https://pic.imgdb.cn/item/63d683edface21e9ef3b5ada.png"></p>
<h2 id="版本控制："><a href="#版本控制：" class="headerlink" title="版本控制："></a>版本控制：</h2><p>简单来说，版本控制在软件开发中，可以帮助程序员进行代码的追踪、维护、控制等等一系列的操作。</p>
<h3 id="版本控制的功能："><a href="#版本控制的功能：" class="headerlink" title="版本控制的功能："></a>版本控制的功能：</h3><h4 id="不同版本的存储管理："><a href="#不同版本的存储管理：" class="headerlink" title="不同版本的存储管理："></a>不同版本的存储管理：</h4><p>一个项目会不断进行版本的迭代，来修复之前的一些问题、增加新的功能、需求，甚至包括项目的重构； </p>
<p>如果我们通过手动来维护一系列的项目备份，简直是一场噩梦； </p>
<h4 id="重大版本的备份维护："><a href="#重大版本的备份维护：" class="headerlink" title="重大版本的备份维护："></a>重大版本的备份维护：</h4><p>对于很多重大的版本，我们会进行备份管理； </p>
<h4 id="恢复之前的项目版本："><a href="#恢复之前的项目版本：" class="headerlink" title="恢复之前的项目版本："></a>恢复之前的项目版本：</h4><p>当我们开发过程中发生一些严重的问题时，想要恢复之前的操作或者回到之前某个版本； </p>
<h4 id="记录项目的点点滴滴："><a href="#记录项目的点点滴滴：" class="headerlink" title="记录项目的点点滴滴："></a>记录项目的点点滴滴：</h4><p>如果我们每一个功能的修改、bug的修复、新的需求更改都需要记录下来，版本控制可以很好的解决； </p>
<h4 id="多人开发的代码合并："><a href="#多人开发的代码合并：" class="headerlink" title="多人开发的代码合并："></a>多人开发的代码合并：</h4><p>项目中通常都是多人开发，将多人代码进行合并，并且在出现冲突时更好的进行处理；</p>
<h3 id="检测当前的配置信息：git-config-–list"><a href="#检测当前的配置信息：git-config-–list" class="headerlink" title="检测当前的配置信息：git config –list"></a>检测当前的配置信息：git config –list</h3><p><img src="https://pic.imgdb.cn/item/63d6840aface21e9ef3bb691.png"></p>
<h2 id="获取Git仓库-–-git-init-x2F-git-clone"><a href="#获取Git仓库-–-git-init-x2F-git-clone" class="headerlink" title="获取Git仓库 – git init&#x2F;git clone"></a>获取Git仓库 – git init&#x2F;git clone</h2><p><strong>我们需要一个Git来管理源代码，那么我们本地也需要有一个Git仓库。</strong> </p>
<h3 id="通常有两种获取-Git-项目仓库的方式："><a href="#通常有两种获取-Git-项目仓库的方式：" class="headerlink" title="通常有两种获取 Git 项目仓库的方式："></a>通常有两种获取 Git 项目仓库的方式：</h3><p>方式一：初始化一个Git仓库，并且可以将当前项目的文件都添加到Git仓库中（目前很多的脚手架在创建项目时都会默认创建一个Git仓库）； </p>
<p>方式二：从其它服务器 克隆（clone） 一个已存在的 Git 仓库（第一天到公司通常我们需要做这个操作）； </p>
<h3 id="方式一：初始化Git仓库"><a href="#方式一：初始化Git仓库" class="headerlink" title="方式一：初始化Git仓库"></a>方式一：初始化Git仓库</h3><p>该命令将创建一个名为 .git 的子目录，这个子目录含有你初始化的 Git 仓库中所有的必须文件，这些文件是 Git 仓库的核心； </p>
<p>但是，在这个时候，我们仅仅是做了一个初始化的操作，你的项目里的文件还没有被跟踪； </p>
<p>git init</p>
<h3 id="方式二：从Git远程仓库"><a href="#方式二：从Git远程仓库" class="headerlink" title="方式二：从Git远程仓库"></a>方式二：从Git远程仓库</h3><p>git clone <a target="_blank" rel="noopener" href="https://github.com/coderwhy/hy-react-web-music.git">https://github.com/coderwhy/hy-react-web-music.git</a></p>
<h2 id="文件的状态划分"><a href="#文件的状态划分" class="headerlink" title="文件的状态划分"></a>文件的状态划分</h2><p><strong>现在我们的电脑上已经有一个Git仓库：</strong> </p>
<p>在实际开发中，你需要将某些文件交由这个Git仓库来管理； </p>
<p>并且我们之后会修改文件的内容，当达成某一个目标时，想要记录下来这次操作，就会将它提交到仓库中； </p>
<p><strong>那么我们需要对文件来划分不同的状态，以确定这个文件是否已经归于Git仓库的管理：</strong> </p>
<p>未跟踪：默认情况下，Git仓库下的文件也没有添加到Git仓库管理中，我们需要通过add命令来操作； </p>
<p>已跟踪：添加到Git仓库管理的文件处于已跟踪状态，Git可以对其进行各种跟踪管理； </p>
<p><strong>已跟踪的文件又可以进行细分状态划分：</strong> </p>
<p>staged：暂缓区中的文件状态； </p>
<p>Unmodified：commit命令，可以将staged中文件提交到Git仓库 </p>
<p>Modified：修改了某个文件后，会处于Modified状态； </p>
<p><strong>在工作时，你可以选择性地将这些修改过的文件放入暂存区；</strong> </p>
<p><strong>然后提交所有已暂存的修改，如此反复</strong></p>
<p><strong>检测文件的状态 - git status</strong></p>
<p><strong>我们在有Git仓库的目录下新建一个文件，查看文件的状态：</strong> </p>
<h3 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h3><p><img src="https://pic.imgdb.cn/item/63d6845bface21e9ef3c636b.png"></p>
<p><strong>Untracked files：未跟踪的文件</strong> </p>
<p>未跟踪的文件意味着 Git 在之前的提交中没有这些文件； </p>
<p>Git 不会自动将之纳入跟踪范围，除非你明明白白地告诉它“我需要跟踪该文件”； </p>
<p><strong>我们也可以查看更加简洁的状态信息：</strong> </p>
<p>git status –s              </p>
<p>git status –short               <img src="https://pic.imgdb.cn/item/63d68466face21e9ef3c7c74.png"></p>
<p>左栏指明了暂存区的状态，右栏指明了工作区的状态； </p>
<h2 id="文件添加到暂存区-–-git-add"><a href="#文件添加到暂存区-–-git-add" class="headerlink" title="文件添加到暂存区 – git add"></a>文件添加到暂存区 – git add</h2><h2 id="文件更新提交-–-git-commit"><a href="#文件更新提交-–-git-commit" class="headerlink" title="文件更新提交 – git commit"></a>文件更新提交 – git commit</h2><p><strong>现在的暂存区已经准备就绪，可以提交了。</strong> </p>
<p>每次准备提交前，先用 git status 看下，你所需要的文件是不是都已暂存起来了； </p>
<p>再运行提交命令 git commit； </p>
<p>可以在 commit 命令后添加 -m 选项，将提交信息与命令放在同一行; </p>
<p><strong>如果我们修改文件的add操作，加上commit的操作有点繁琐，那么可以将两个命令结合来使用：</strong> </p>
<p><strong>文件更新提交 – git commit</strong> </p>
<h3 id="git-commit-–m-“提交信息”"><a href="#git-commit-–m-“提交信息”" class="headerlink" title="git commit –m “提交信息”"></a>git commit –m “提交信息”</h3><p><img src="https://pic.imgdb.cn/item/63d68475face21e9ef3c9e13.png"></p>
<p><strong>如果我们修改文件的add操作，加上commit的操作有点繁琐，那么可以将两个命令结合来使用：</strong></p>
<h3 id="git-commit-a-m-“修改了bbb文件”"><a href="#git-commit-a-m-“修改了bbb文件”" class="headerlink" title="git commit -a -m “修改了bbb文件”"></a>git commit -a -m “修改了bbb文件”</h3><p><img src="https://pic.imgdb.cn/item/63d6847eface21e9ef3cb384.png"></p>
<h2 id="查看提交的历史-–-git-log"><a href="#查看提交的历史-–-git-log" class="headerlink" title="查看提交的历史 – git log"></a>查看提交的历史 – git log</h2><h3 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h3><p><img src="https://pic.imgdb.cn/item/63d6848dface21e9ef3cd43c.png"></p>
<h3 id="git-log-–pretty-x3D-oneline-–graph"><a href="#git-log-–pretty-x3D-oneline-–graph" class="headerlink" title="git log –pretty&#x3D;oneline –graph"></a>git log –pretty&#x3D;oneline –graph</h3><p><img src="https://pic.imgdb.cn/item/63d68496face21e9ef3ce899.png"></p>
<h2 id="版本回退-–-git-reset"><a href="#版本回退-–-git-reset" class="headerlink" title="版本回退 – git reset"></a>版本回退 – git reset</h2><p><strong>如果想要进行版本回退，我们需要先知道目前处于哪一个版本：Git通过HEAD指针记录当前版本。</strong> </p>
<p>HEAD 是当前分支引用的指针，它总是指向该分支上的最后一次提交； </p>
<p>理解 HEAD 的最简方式，就是将它看做 <strong>该分支上的最后一次提交</strong> 的快照；</p>
<p><strong>我们可以通过HEAD来改变Git目前的版本指向：</strong> </p>
<p>上一个版本就是HEAD^，上上一个版本就是HEAD^^； </p>
<p>如果是上1000个版本，我们可以使用HEAD~1000； </p>
<p>我们可以可以指定某一个commit id； </p>
<p>git reset –hard HEAD^ </p>
<p>git reset –hard HEAD~1000 </p>
<p>git reset –hard 2d44982</p>
<h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><p>GitHub：<a target="_blank" rel="noopener" href="https://github.com/">https://github.com/</a>   （主要使用）</p>
<p>Gitee：<a target="_blank" rel="noopener" href="https://gitee.com/">https://gitee.com/</a>     （国内）</p>
<h2 id="管理远程服务器"><a href="#管理远程服务器" class="headerlink" title="管理远程服务器"></a>管理远程服务器</h2><p><strong>查看远程地址：比如我们之前从GitHub上clone下来的代码，它就是有自己的远程仓库的：</strong> </p>
<p><strong>添加远程地址：我们也可以继续添加远程服务器（让本地的仓库和远程服务器仓库建立连接）：</strong> </p>
<p><strong>重命名远程地址：</strong> </p>
<p><strong>移除远程地址：</strong> </p>
<p>git remote </p>
<p>git remote –v </p>
<p>-v是—verbose的缩写(冗长的)</p>
<p><strong>添加远程地址：我们也可以继续添加远程服务器（让本地的仓库和远程服务器仓库建立连接）：</strong> </p>
<p>git remote add <shortname> <url> </p>
<p>git remote add gitlab <a target="_blank" rel="noopener" href="http://152.136.185.210:7888/coderwhy/gitremotedemo.git">http://152.136.185.210:7888/coderwhy/gitremotedemo.git</a></p>
<h3 id="重命名远程地址："><a href="#重命名远程地址：" class="headerlink" title="重命名远程地址："></a>重命名远程地址：</h3><p>git remote rename gitlab glab</p>
<h3 id="移除远程地址："><a href="#移除远程地址：" class="headerlink" title="移除远程地址："></a>移除远程地址：</h3><p>git remote remove gitlab</p>
<h2 id="远程仓库的交互"><a href="#远程仓库的交互" class="headerlink" title="远程仓库的交互"></a>远程仓库的交互</h2><p><strong>将代码push到远程仓库：将本地仓库的代码推送到远程仓库中；</strong></p>
<h3 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h3><h3 id="git-push-origin-master"><a href="#git-push-origin-master" class="headerlink" title="git push origin master"></a>git push origin master</h3><h3 id="从远程仓库fetch代码：从远程仓库获取最新的代码"><a href="#从远程仓库fetch代码：从远程仓库获取最新的代码" class="headerlink" title="从远程仓库fetch代码：从远程仓库获取最新的代码"></a>从远程仓库fetch代码：从远程仓库获取最新的代码</h3><h3 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h3><h3 id="git-fetch-origin"><a href="#git-fetch-origin" class="headerlink" title="git fetch origin"></a>git fetch origin</h3><p>获取到代码后默认并没有合并到本地仓库，我们需要通过merge来合并； </p>
<h3 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h3><p><strong>从远程仓库pull代码：上面的两次操作有点繁琐，我们可以通过一个命令来操作</strong></p>
<h3 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h3><h3 id="git-fetch-git-merge-rebase"><a href="#git-fetch-git-merge-rebase" class="headerlink" title="git fetch + git merge(rebase)"></a>git fetch + git merge(rebase)</h3><h3 id="Git创建分支：git-branch-testing"><a href="#Git创建分支：git-branch-testing" class="headerlink" title="Git创建分支：git branch testing"></a>Git创建分支：git branch testing</h3><h3 id="查看分支-：git-checkout-testing"><a href="#查看分支-：git-checkout-testing" class="headerlink" title="查看分支 ：git checkout testing"></a>查看分支 ：git checkout testing</h3><h3 id="创建分支同时切换：git-checkout-b"><a href="#创建分支同时切换：git-checkout-b" class="headerlink" title="创建分支同时切换：git checkout -b "></a>创建分支同时切换：git checkout -b <newbranchname></h3><p>查看和删除分支</p>
<h3 id="git-branch-查看当前所有的分支"><a href="#git-branch-查看当前所有的分支" class="headerlink" title="git branch # 查看当前所有的分支"></a>git branch # 查看当前所有的分支</h3><h3 id="git-branch-–v-同时查看最后一次提交"><a href="#git-branch-–v-同时查看最后一次提交" class="headerlink" title="git branch –v # 同时查看最后一次提交"></a>git branch –v # 同时查看最后一次提交</h3><h3 id="git-branch-–merged-查看所有合并到当前分支的分支"><a href="#git-branch-–merged-查看所有合并到当前分支的分支" class="headerlink" title="git branch –merged # 查看所有合并到当前分支的分支"></a>git branch –merged # 查看所有合并到当前分支的分支</h3><h3 id="git-branch-–no-merged-查看所有没有合并到当前分支的分支"><a href="#git-branch-–no-merged-查看所有没有合并到当前分支的分支" class="headerlink" title="git branch –no-merged # 查看所有没有合并到当前分支的分支"></a>git branch –no-merged # 查看所有没有合并到当前分支的分支</h3><h3 id="git-branch-–d-hotfix-删除当前分支"><a href="#git-branch-–d-hotfix-删除当前分支" class="headerlink" title="git branch –d hotfix # 删除当前分支"></a>git branch –d hotfix # 删除当前分支</h3><h3 id="git-branch-–D-hotfix-强制删除某一个分支"><a href="#git-branch-–D-hotfix-强制删除某一个分支" class="headerlink" title="git branch –D hotfix # 强制删除某一个分支"></a>git branch –D hotfix # 强制删除某一个分支</h3><h3 id="git-remote-set-url-origin-URL-更换远程仓库地址，URL为新地址"><a href="#git-remote-set-url-origin-URL-更换远程仓库地址，URL为新地址" class="headerlink" title="git remote set-url origin URL 更换远程仓库地址，URL为新地址"></a>git remote set-url origin URL 更换远程仓库地址，URL为新地址</h3><h2 id="远程分支的管理"><a href="#远程分支的管理" class="headerlink" title="远程分支的管理"></a>远程分支的管理</h2><h3 id="操作一：推送分支到远程"><a href="#操作一：推送分支到远程" class="headerlink" title="操作一：推送分支到远程"></a>操作一：推送分支到远程</h3><p>当你想要公开分享一个分支时，需要将其推送到有写入权限的远程仓库上； </p>
<p>运行 git push <remote> <branch>； </p>
<h3 id="操作二：跟踪远程分支"><a href="#操作二：跟踪远程分支" class="headerlink" title="操作二：跟踪远程分支"></a>操作二：跟踪远程分支</h3><p>当克隆一个仓库时，它通常会自动地创建一个跟踪 origin&#x2F;master 的 master 分支； </p>
<p>如果你愿意的话可以设置其他的跟踪分支，可以通过运行 git checkout –track <remote>&#x2F;<branch> </p>
<p>如果你尝试检出的分支 (a) 不存在且 (b) 刚好只有一个名字与之匹配的远程分支，那么 Git 就会为你创建一个跟踪分支； </p>
<h3 id="操作三：删除远程分支"><a href="#操作三：删除远程分支" class="headerlink" title="操作三：删除远程分支"></a>操作三：删除远程分支</h3><p>如果某一个远程分支不再使用，我们想要删除掉，可以运行带有 –delete 选项的 git push 命令来删除一个远程分支。 </p>
<p>git checkout –track <remote>&#x2F;<branch> </p>
<p>git checkout <branch> </p>
<p>git push origin –delete <branch></p>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Echarts"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/01/29/Echarts/"
    >Echarts</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/01/29/Echarts/" class="article-date">
  <time datetime="2023-01-29T14:26:44.000Z" itemprop="datePublished">2023-01-29</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Echarts"><a href="#Echarts" class="headerlink" title="Echarts"></a>Echarts</h1><p>Echarts好像也没有多大的难点，都是照着官方文档找API进行配置。刚好上个月公司有个React——Echart项目，就对此了解了一下，其实还是对其实例化对象与数据的赋值为主要点叭（做好一个类型，其它类型的图表也差不多）。</p>
<p>效果图：</p>
<p><img src="https://pic.imgdb.cn/item/63d6824fface21e9ef37148d.png"></p>
<p><img src="https://pic.imgdb.cn/item/63d68258face21e9ef372e20.png"></p>
<p>config.ts为配置项文件</p>
<p>countryMap.ts为自定义的国家显示数据（非必须）</p>
<p>worldMap.json为世界地图的JSON文件</p>
<p>WorldMap.tsx为主文件</p>
<p>WorldMap.tsx</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts/core&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BarChart</span>, <span class="title class_">LineChart</span>, <span class="title class_">MapChart</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/charts&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">TitleComponent</span>,</span><br><span class="line">  <span class="title class_">TooltipComponent</span>,</span><br><span class="line">  <span class="title class_">GridComponent</span>,</span><br><span class="line">  <span class="title class_">DatasetComponent</span>,</span><br><span class="line">  <span class="title class_">TransformComponent</span>,</span><br><span class="line">  <span class="title class_">LegendComponent</span>,</span><br><span class="line">  <span class="title class_">DataZoomComponent</span>,</span><br><span class="line">  <span class="title class_">ToolboxComponent</span>,</span><br><span class="line">  <span class="title class_">VisualMapComponent</span>,</span><br><span class="line">  <span class="title class_">GeoComponent</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/components&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LabelLayout</span>, <span class="title class_">UniversalTransition</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/features&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CanvasRenderer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/renderers&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapOption &#125; <span class="keyword">from</span> <span class="string">&#x27;./config&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CountryCard</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../../service&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Div</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  width: 68%;</span></span><br><span class="line"><span class="string">  height: 480px;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line">echarts.<span class="title function_">use</span>([</span><br><span class="line">  <span class="title class_">TitleComponent</span>,</span><br><span class="line">  <span class="title class_">TooltipComponent</span>,</span><br><span class="line">  <span class="title class_">GridComponent</span>,</span><br><span class="line">  <span class="title class_">DatasetComponent</span>,</span><br><span class="line">  <span class="title class_">TransformComponent</span>,</span><br><span class="line">  <span class="title class_">BarChart</span>,</span><br><span class="line">  <span class="title class_">LabelLayout</span>,</span><br><span class="line">  <span class="title class_">UniversalTransition</span>,</span><br><span class="line">  <span class="title class_">CanvasRenderer</span>,</span><br><span class="line">  <span class="title class_">LineChart</span>,</span><br><span class="line">  <span class="title class_">LegendComponent</span>,</span><br><span class="line">  <span class="title class_">DataZoomComponent</span>,</span><br><span class="line">  <span class="title class_">ToolboxComponent</span>,</span><br><span class="line">  <span class="title class_">VisualMapComponent</span>,</span><br><span class="line">  <span class="title class_">MapChart</span>,</span><br><span class="line">  <span class="title class_">GeoComponent</span>,</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">WorldMapProps</span> &#123;</span><br><span class="line">  <span class="attr">countryData</span>: <span class="title class_">CountryCard</span>[]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">WorldMap</span>: <span class="title class_">React</span>.<span class="property">FC</span>&lt;<span class="title class_">WorldMapProps</span>&gt; = <span class="function">(<span class="params">&#123; countryData &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1. get DOM</span></span><br><span class="line">  <span class="keyword">const</span> chartmap = <span class="title function_">useRef</span>(<span class="literal">null</span>)</span><br><span class="line">  echarts.<span class="title function_">registerMap</span>(<span class="string">&#x27;world&#x27;</span>, <span class="built_in">require</span>(<span class="string">&#x27;./worldMap.json&#x27;</span>))</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// init echarts map</span></span><br><span class="line">    <span class="keyword">const</span> map = echarts.<span class="title function_">init</span>(chartmap.<span class="property">current</span> <span class="keyword">as</span> <span class="built_in">unknown</span> <span class="keyword">as</span> <span class="title class_">HTMLDivElement</span>)</span><br><span class="line">    <span class="comment">// 4. get table data</span></span><br><span class="line">    map.<span class="title function_">setOption</span>(<span class="title function_">mapOption</span>(countryData))</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="function">() =&gt;</span> map.<span class="title function_">resize</span>()</span><br><span class="line">  &#125;, [countryData])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Div</span> <span class="attr">ref</span>=<span class="string">&#123;chartmap&#125;</span> /&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">WorldMap</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; countryFullName &#125; <span class="keyword">from</span> <span class="string">&#x27;../../helpers/utils&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; country &#125; <span class="keyword">from</span> <span class="string">&#x27;./countryMap&#x27;</span></span><br><span class="line"><span class="keyword">import</span> worldMap <span class="keyword">from</span> <span class="string">&#x27;./worldMap.json&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cn country abbreviation</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cen full name of country</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">filterUnmatchCountry</span> = (<span class="params">cn: <span class="built_in">string</span>, cen: <span class="built_in">string</span> | <span class="literal">undefined</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> newArr = worldMap.<span class="property">features</span></span><br><span class="line">  <span class="keyword">const</span> newMap = <span class="keyword">new</span> <span class="title class_">Map</span>(newArr.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> [item.<span class="property">id</span>, item.<span class="property">properties</span>.<span class="property">name</span>]))</span><br><span class="line">  <span class="keyword">if</span> (newMap.<span class="title function_">has</span>(cn)) &#123;</span><br><span class="line">    <span class="keyword">const</span> newCen = newMap.<span class="title function_">get</span>(cn)</span><br><span class="line">    <span class="keyword">if</span> (cen !== newCen) &#123;</span><br><span class="line">      <span class="keyword">return</span> newCen</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cen</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cn country abbreviation</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">transferCountry</span>(<span class="params">cn: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (country.<span class="title function_">has</span>(cn)) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="title function_">filterUnmatchCountry</span>(cn, country.<span class="title function_">get</span>(cn))</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;unknown&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">mapOption</span> = (<span class="params">countryData: <span class="built_in">Array</span>&lt;&#123; rank: <span class="built_in">number</span>; name: <span class="built_in">string</span>; <span class="built_in">number</span>: <span class="built_in">string</span> &#125;&gt;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// define map params</span></span><br><span class="line">    <span class="attr">tooltip</span>: &#123;</span><br><span class="line">      <span class="comment">// tooltip component</span></span><br><span class="line">      <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span>, <span class="comment">// if trigger tooltip component,when mouse hover, will show series&#x27;s data value</span></span><br><span class="line">      <span class="attr">textStyle</span>: &#123;</span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;#333&#x27;</span>,</span><br><span class="line">        <span class="attr">fontStyle</span>: <span class="string">&#x27;14px&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">borderWidth</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="string">&#x27;transparent&#x27;</span>,</span><br><span class="line">      <span class="comment">//  customize float layer css style -- remove box shadow here</span></span><br><span class="line">      <span class="attr">extraCssText</span>: <span class="string">&#x27;box-shadow: none&#x27;</span>,</span><br><span class="line">      <span class="comment">// mouse hover callback, use to modify tooltip component data format</span></span><br><span class="line">      <span class="attr">formatter</span>: <span class="function">(<span class="params">params: &#123; data: &#123; rank: <span class="built_in">string</span> &#125;; value: <span class="built_in">string</span>; name: <span class="built_in">string</span> &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> rank = params.<span class="property">data</span>?.<span class="property">rank</span> ? params.<span class="property">data</span>.<span class="property">rank</span> : <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">const</span> value = params.<span class="property">value</span> ? params.<span class="property">value</span> : <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;rank&#125;</span> <span class="subst">$&#123;params.name&#125;</span> <span class="subst">$&#123;value&#125;</span>`</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 映射组件</span></span><br><span class="line">    <span class="attr">visualMap</span>: &#123;</span><br><span class="line">      <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">min</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">max</span>: countryData[<span class="number">0</span>]?.<span class="property">number</span> + <span class="number">1</span>,</span><br><span class="line">      <span class="attr">calcuable</span>: <span class="literal">false</span>, <span class="comment">// close drag function</span></span><br><span class="line">      <span class="attr">realtime</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">inRange</span>: &#123;</span><br><span class="line">        <span class="attr">color</span>: [<span class="string">&#x27;#9BB2C0&#x27;</span>, <span class="string">&#x27;#6AB3D4&#x27;</span>, <span class="string">&#x27;#ABDCED&#x27;</span>, <span class="string">&#x27;#ABDCED&#x27;</span>], <span class="comment">// assign the color of the data from less to more</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">series</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;map&#x27;</span>,</span><br><span class="line">        <span class="attr">map</span>: <span class="string">&#x27;world&#x27;</span>,</span><br><span class="line">        <span class="attr">roam</span>: <span class="literal">false</span>, <span class="comment">// forbid mouse to &#x27;scale&#x27; and &#x27;move&#x27;</span></span><br><span class="line">        <span class="attr">data</span>: countryData.<span class="title function_">map</span>(<span class="function">(<span class="params">item: &#123; rank: <span class="built_in">number</span>; name: <span class="built_in">string</span>; <span class="built_in">number</span>: <span class="built_in">string</span> &#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="title function_">countryFullName</span>(item.<span class="property">name</span>),</span><br><span class="line">          <span class="attr">value</span>: item.<span class="property">number</span>,</span><br><span class="line">          <span class="attr">rank</span>: item.<span class="property">rank</span>,</span><br><span class="line">        &#125;)),</span><br><span class="line">        <span class="attr">selectedMode</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// zoom + aspectScale(stretch) = change map size</span></span><br><span class="line">        <span class="attr">zoom</span>: <span class="number">1.2</span>,</span><br><span class="line">        <span class="attr">aspectScale</span>: <span class="number">1.1</span>,</span><br><span class="line">        <span class="attr">boxWidth</span>: <span class="number">500</span>,</span><br><span class="line">        <span class="attr">left</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">          <span class="attr">normal</span>: &#123;</span><br><span class="line">            <span class="attr">borderWidth</span>: <span class="number">0</span>, <span class="comment">// modify map border</span></span><br><span class="line">            <span class="attr">areaColor</span>: <span class="string">&#x27;#D9E2E9&#x27;</span>, <span class="comment">// modify map basic color</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// modify hover area color</span></span><br><span class="line">        <span class="attr">emphasis</span>: &#123;</span><br><span class="line">          <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">            <span class="attr">areaColor</span>: <span class="string">&#x27;#F4E5BC&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="attr">label</span>: &#123;</span><br><span class="line">      <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Vue2全家桶"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/01/29/Vue2%E5%85%A8%E5%AE%B6%E6%A1%B6/"
    >Vue2全家桶</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/01/29/Vue2%E5%85%A8%E5%AE%B6%E6%A1%B6/" class="article-date">
  <time datetime="2023-01-29T14:22:56.000Z" itemprop="datePublished">2023-01-29</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h1><p>vue相对于react来说更简单、易上手。但由于公司转React开发，导致我对vue的学习与巩固又停了下来，只是简单的用vue做了三两个项目。此次回顾相当于复习一遍vue。</p>
<h1 id="一、vue基础"><a href="#一、vue基础" class="headerlink" title="一、vue基础"></a>一、vue基础</h1><h2 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h2><ul>
<li>是一套用于构建用户界面的前端框架</li>
<li>vue 框架的特性，主要体现在如下两方面：</li>
</ul>
<h3 id="数据驱动视图"><a href="#数据驱动视图" class="headerlink" title="数据驱动视图"></a>数据驱动视图</h3><p>在使用了 vue 的页面中，vue 会监听数据的变化，从而自动重新渲染页面的结构。</p>
<p>好处：当页面数据发生变化时，页面会自动重新渲染！ </p>
<p>注意：数据驱动视图是单向的数据绑定。</p>
<h3 id="双向数据绑定"><a href="#双向数据绑定" class="headerlink" title="双向数据绑定"></a>双向数据绑定</h3><p>在填写表单时，双向数据绑定可以辅助开发者在不操作 DOM 的前提下，自动把用户填写的内容同步到数据源 </p>
<p>中。</p>
<p>好处：开发者不再需要手动操作 DOM 元素，来获取表单元素最新的值！</p>
<h3 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h3><p>MVVM 是 vue 实现数据驱动视图和双向数据绑定的核心原理。MVVM 指的是 Model、View 和 ViewModel， </p>
<p>它把每个 HTML 页面都拆分成了这三个部分。</p>
<p><img src="https://pic.imgdb.cn/item/63d676ffface21e9ef1c11cd.png"></p>
<h4 id="工作原理："><a href="#工作原理：" class="headerlink" title="工作原理："></a>工作原理：</h4><p>ViewModel 作为 MVVM 的核心，是它把当前页面的数据源（Model）和页面的结构（View）连接在了一起。</p>
<p>当数据源发生变化时，会被 ViewModel 监听到，VM 会根据最新的数据源自动更新页面的结构 </p>
<p>当表单元素的值发生变化时，也会被 VM 监听到，VM 会把变化过后最新的值自动同步到 Model 数据源中</p>
<h2 id="vue的基本使用"><a href="#vue的基本使用" class="headerlink" title="vue的基本使用"></a>vue的基本使用</h2><h3 id="基本使用步骤"><a href="#基本使用步骤" class="headerlink" title="基本使用步骤"></a>基本使用步骤</h3><h4 id="①-导入-vue-js-的-script-脚本文件"><a href="#①-导入-vue-js-的-script-脚本文件" class="headerlink" title="① 导入 vue.js 的 script 脚本文件"></a>① 导入 vue.js 的 script 脚本文件</h4><h4 id="②-在页面中声明一个将要被-vue-所控制的-DOM-区域"><a href="#②-在页面中声明一个将要被-vue-所控制的-DOM-区域" class="headerlink" title="② 在页面中声明一个将要被 vue 所控制的 DOM 区域"></a>② 在页面中声明一个将要被 vue 所控制的 DOM 区域</h4><h4 id="③-创建-vm-实例对象（vue-实例对象）"><a href="#③-创建-vm-实例对象（vue-实例对象）" class="headerlink" title="③ 创建 vm 实例对象（vue 实例对象）"></a>③ 创建 vm 实例对象（vue 实例对象）</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  //2.在页面中声明一个将要被vue控制的DOM区域</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span>&#123;&#123;userName&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  //1.导入vue.js的script脚本文件</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;./lib/vue/2.6.12.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//3.创建VM实例对象（vue的实例对象）</span></span></span><br><span class="line"><span class="language-javascript">    coonst vm=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 3.1 指定vue控制页面的哪个区域</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 3.2 指定Model数据源</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">userName</span>:<span class="string">&#x27;jelly&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>





#### 基本代码与 MVVM 的对应关系

![](https://pic.imgdb.cn/item/63d6770dface21e9ef1c3174.png)

## vue的调试工具

###  安装 vue-devtools 调试工具 

vue 官方提供的 vue-devtools 调试工具，能够方便开发者对 vue 项目进行调试与开发。 

Chrome 浏览器在线安装 vue-devtools ： 

https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd



## vue的指令与过滤器

### 指令的概念

指令（Directives）是 vue 为开发者提供的模板语法，用于辅助开发者渲染页面的基本结构。 

vue 中的指令按照不同的用途可以分为如下 6 大类： 

#### ① 内容渲染指令 

#### ② 属性绑定指令 

#### ③ 事件绑定指令 

#### ④ 双向绑定指令 

#### ⑤ 条件渲染指令 

#### ⑥ 列表渲染指令 



### 内容渲染指令 

#### 内容渲染指令用来辅助开发者渲染 DOM 元素的文本内容。常用的内容渲染指令有如下 3 个： 

#### v-text 

#### {{ }} 

####  v-html

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//v-text 指令会覆盖元素内默认的值。</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">&#x27;userName&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">&#x27;gender&#x27;</span>&gt;</span>sex:<span class="tag">&lt;/<span class="name">p</span>&gt;</span>  //gender</span><br><span class="line"></span><br><span class="line">//&#123;&#123;&#125;&#125;用来解决 v-text 会覆盖默认文本内容的问题。这种 &#123;&#123; &#125;&#125; 语法的专业名称是插值表达</span><br><span class="line">式（英文名为：Mustache）。</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Name:&#123;&#123;jelly&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Sex:&#123;&#123;gender&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//相对于 v-text 指令来说，插值表达式在开发中更常用一些！因为它不会覆盖元素中默认的文本内容。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//v-text 指令和插值表达式只能渲染纯文本内容。如果要把包含 HTML 标签的字符串渲染为页面的 HTML 元素，</span><br><span class="line">则需要用到 v-html 这个指令</span><br><span class="line">假设discription=<span class="tag">&lt;<span class="name">h5</span> <span class="attr">style</span>=<span class="string">&#x27;color:red&#x27;</span>&gt;</span>123<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-html</span>=<span class="string">&#x27;discription&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span> // 红色字体的 123</span><br></pre></td></tr></table></figure>



### 属性绑定指令

#### 要为元素的属性动态绑定属性值，则需要用到 v-bind 属性绑定指令（简写为 : ）

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//data:&#123;</span><br><span class="line">inputValue:&#x27;Plase input&#x27;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#x27;text&#x27;</span> <span class="attr">v-bind:placeholder</span>=<span class="string">&#x27;inputValue&#x27;</span>/&gt;</span></span><br><span class="line">//简写</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#x27;text&#x27;</span> <span class="attr">:placeholder</span>=<span class="string">&#x27;inputValue&#x27;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">//支持JavaScript的表达式运算</span><br><span class="line">&#123;&#123;number=1&#125;&#125;</span><br><span class="line">&#123;&#123;ok?&#x27;yes&#x27;:&#x27;no&#x27;&#125;&#125;</span><br><span class="line">&#123;&#123;message.split(&#x27;&#x27;).sort.join(&#x27;&#x27;)&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:id</span>=<span class="string">&#x27;list-&#x27;</span> +<span class="attr">id</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

### 事件绑定指令

#### vue 提供了 v-on 事件绑定指令，用来辅助程序员为 DOM 元素绑定事件监听。（简写为 @）

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>count:&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&#x27;add&#x27;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">// 简写</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&#x27;add&#x27;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//原生 DOM 对象有 onclick、oninput、onkeyup 等原生事件，替换为 vue 的事件绑定形式后，</span><br><span class="line">分别为：v-on:click、v-on:input、v-on:keyup</span><br></pre></td></tr></table></figure>

事件参数对象

在原生的 DOM 事件绑定中，可以在事件处理函数的形参处，接收事件参数对象 event。同理，在 v-on 指令 （简写为 @ ）所绑定的事件处理函数中，同样可以接收到事件参数对象 event，示例代码如下：

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;<span class="attr">count</span>:&#123;&#123;count&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&#x27;add&#x27;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> nowBgc=e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span></span><br><span class="line">    e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span>=nowBgc===<span class="string">&#x27;red&#x27;</span>?<span class="string">&quot;&quot;</span>:<span class="string">&#x27;red&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span> +=<span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



#### 绑定事件并传参 

在使用 v-on 指令绑定事件时，可以使用 **( )** 进行传参，示例代码如下：

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;<span class="attr">count</span>:&#123;&#123;count&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&#x27;add(2)&#x27;</span>&gt;</span>+2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params">step</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span> +=step</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



#### $event 

$event 是 vue 提供的特殊变量，用来表示原生的事件参数对象 event。$event 可以解决事件参数对象 event 被覆盖的问题。示例用法如下：

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;<span class="attr">count</span>:&#123;&#123;count&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&#x27;add(2,$event)&#x27;</span>&gt;</span>+2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params">step,e</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> nowBgc=e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span></span><br><span class="line">    e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span>=nowBgc===<span class="string">&#x27;pink&#x27;</span>?<span class="string">&quot;&quot;</span>:<span class="string">&#x27;pink&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span> +=step</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

#### 事件修饰符

在事件处理函数中调用 event.preventDefault() 或 event.stopPropagation() 是非常常见的需求。因此， 

vue 提供了事件修饰符的概念，来辅助程序员更方便的对事件的触发进行控制。常用的 5 个事件修饰符如下：

.prevent          阻止默认行为

.stop                阻止事件冒泡

.captrue          以捕捉模式触发当前的事件处理函数

.once               绑定的事件只触发1次

.self                  只有在event.target是当前元素自身是触发事件处理函数



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//阻止默认跳转行为</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://www.baidu.com&#x27;</span> @<span class="attr">click</span>=<span class="string">&#x27;onLinkClick&#x27;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

### 双向绑定指令

#### vue 提供了 v-model 双向数据绑定指令，用来辅助开发者在不操作 DOM 的前提下，快速获取表单的数据。

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Name:&#123;&#123;userName&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">inpit</span> <span class="attr">type</span>=<span class="string">&#x27;text&#x27;</span>, <span class="attr">v-model</span>=<span class="string">&#x27;userName&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">inpit</span>&gt;</span></span><br><span class="line">//在输入框输入数值会立马显示在p标签中</span><br></pre></td></tr></table></figure>

#### v-model 指令的修饰符

为了方便对用户输入的内容进行处理，vue为v-model指令提供了3个修饰符

.number         值转为数值类型                                     <input v-model.number='age'>

.trim                去掉首位空格                                         <input v-model.number='msg'>

.lazy                 在change是时而非 input时更新         <input v-model.lazy='msg'>



### 条件渲染指令

条件渲染指令用来辅助开发者按需控制 DOM 的显示与隐藏。条件渲染指令有如下两个，分别是： 

#### v-if 可以单独使用，或配合 v-else/v-else-if 指令一起使用：

#### v-show 

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&#x27;networkState===200&#x27;</span>&gt;</span>请求成功，被v-if控制<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">P</span> <span class="attr">v-else</span>&gt;</span>error<span class="tag">&lt;/<span class="name">P</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">P</span> <span class="attr">v-else-if</span>&gt;</span>未知<span class="tag">&lt;/<span class="name">P</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">&#x27;networkState===200&#x27;</span>&gt;</span>请求成功，被v-show控制<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

#### 区别：

实现原理不同： 

v-if 指令会动态地创建或移除 DOM 元素，从而控制元素在页面上的显示与隐藏； 

v-show 指令会动态为元素添加或移除 style="display: none;" 样式，从而控制元素的显示与隐藏； 

性能消耗不同： 

v-if 有更高的切换开销，而 v-show 有更高的初始渲染开销。因此： 

如果需要非常频繁地切换，则使用 v-show 较好 

如果在运行时条件很少改变，则使用 v-if 较好



### 列表渲染指令

#### vue 提供了 v-for 列表渲染指令，用来辅助开发者基于一个数组来循环渲染一个列表结构。v-for 指令需要使 用 item in items 形式的特殊语法，其中： 

#### items 是待循环的数组 

#### tem 是被循环的每一项

当列表的数据变化时，默认情况下，vue 会尽可能的复用已存在的 DOM 元素，从而提升渲染的性能。但这种 默认的性能优化策略，会导致有状态的列表无法被正确更新。 为了给 vue 一个提示，以便它能跟踪每个节点的身份，从而在保证有状态的列表被正确更新的前提下，提升渲 染的性能。此时，需要为每项提供一个唯一的 key 属性：

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data:&#123;</span><br><span class="line">list:[&#123;id:1,name:&#x27;zs&#x27;&#125;,&#123;id:2,name:&#x27;ls&#x27;&#125;]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&#x27;(item,index) in list&#x27;</span> <span class="attr">:key</span>=<span class="string">&#x27;user.id&#x27;</span>&gt;</span>索引：&#123;&#123;index&#125;&#125;,名字：&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="key-的注意事项"><a href="#key-的注意事项" class="headerlink" title="key 的注意事项"></a>key 的注意事项</h4><p>① key 的值只能是字符串或数字类型 </p>
<p>② key 的值必须具有唯一性（即：key 的值不能重复） </p>
<p>③ 建议把数据项 id 属性的值作为 key 的值（因为 id 属性的值具有唯一性） </p>
<p>④ 使用 index 的值当作 key 的值没有任何意义（因为 index 的值不具有唯一性） </p>
<p>⑤ 建议使用 v-for 指令时一定要指定 key 的值（既提升性能、又防止列表状态紊乱）</p>
<h2 id="过滤器-vue2有，vue3无"><a href="#过滤器-vue2有，vue3无" class="headerlink" title="过滤器(vue2有，vue3无)"></a>过滤器(vue2有，vue3无)</h2><p>过滤器（Filters）是 vue 为开发者提供的功能，常用于文本的格式化。过滤器可以用在两个地方：插值表达式 和 v-bind 属性绑定。 </p>
<p>过滤器应该被添加在 JavaScript 表达式的尾部，由“管道符：| ”进行调用，示例代码如下：</p>
<h4 id="私有过滤器"><a href="#私有过滤器" class="headerlink" title="私有过滤器"></a>私有过滤器</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;&#123;&#123;message | captalize&#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:id</span>=<span class="string">&#x27;rawId | formatId&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在创建vue实例期间，在filters节点中可以定义过滤器</span></span><br><span class="line"><span class="keyword">const</span> vm= <span class="keyword">new</span> <span class="title function_">vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:#app;</span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line">  <span class="attr">message</span>:<span class="string">&#x27;hello Vue.js&#x27;</span>,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">filters</span>:&#123;</span><br><span class="line">  <span class="comment">//首字母大写过滤器</span></span><br><span class="line">  <span class="title function_">captalize</span>(<span class="params">str</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> str.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>()+str.<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//number过滤器</span></span><br><span class="line">  <span class="title function_">formatId</span>(<span class="params">id</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">number</span>(id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在 filters 节点下定义的过滤器，称为“私有过滤器”，因为它只能在当前 vm 实例所控制的 el 区域内使用。 </p>
<p>如果希望在多个 vue 实例之间共享过滤器，则可以按照如下的格式定义全局过滤器：</p>
<h4 id="全局过滤器"><a href="#全局过滤器" class="headerlink" title="全局过滤器"></a>全局过滤器</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局过滤器，独立于每个VM实例之外</span></span><br><span class="line"><span class="comment">// vue.filter(name,callBack)方法接收两个参数;名字、处理函数</span></span><br><span class="line">vue.<span class="property">filter</span>（<span class="string">&#x27;captalize&#x27;</span>,<span class="keyword">return</span> str.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>()+str.<span class="title function_">slice</span>(<span class="number">1</span>)+<span class="string">&#x27;--&#x27;</span>）</span><br><span class="line"></span><br><span class="line"><span class="comment">//连续调用多个过滤器</span></span><br><span class="line">&lt;p&gt;</span><br><span class="line">  &#123;&#123;message|filterA|filterB&#125;&#125;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line"><span class="comment">//过滤器传参</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  &#123;&#123;message|filterA（a,b&#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="watch侦听器"><a href="#watch侦听器" class="headerlink" title="watch侦听器"></a>watch侦听器</h2><p>watch 侦听器允许开发者监视数据的变化，从而针对数据的变化做特定的操作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm= <span class="keyword">new</span> <span class="title function_">vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:#app;</span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line">  <span class="attr">userName</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="attr">watch</span>:&#123;</span><br><span class="line">  <span class="comment">// 监听message值的变化</span></span><br><span class="line">  <span class="comment">// newVal是变化后的新值，oldVal是变化之前的旧值</span></span><br><span class="line">  <span class="title function_">userName</span>(<span class="params">newVal,oldVal</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal,oldVal)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//监听 username 值的变化，并使用 axios 发起 Ajax 请求，检测当前输入的用户名是否可用：</span></span><br><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">  <span class="comment">// 监听 username 值的变化</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">username</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (newVal === <span class="string">&#x27;&#x27;</span>) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// 使用 axios 发起请求，判断用户名是否可用</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://www.escook.cn/api/finduser/&#x27;</span> + newVal)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">  &#125; &#125;</span><br></pre></td></tr></table></figure>

<h3 id="immediate-选项"><a href="#immediate-选项" class="headerlink" title="immediate 选项"></a>immediate 选项</h3><p>默认情况下，组件在初次加载完毕后不会调用 watch 侦听器。如果想让 watch 侦听器立即被调用，则需要使 </p>
<p>用 immediate 选项。示例代码如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line"><span class="attr">username</span>: &#123;</span><br><span class="line"><span class="comment">// handler 是固定写法，表示当 username 的值变化时，自动调用 handler 处理函数</span></span><br><span class="line"><span class="attr">handler</span>: <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">newVal</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (newVal === <span class="string">&#x27;&#x27;</span>) <span class="keyword">return</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://www.escook.cn/api/finduser/&#x27;</span> + newVal)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 表示页面初次渲染好之后，就立即触发当前的 watch 侦听器</span></span><br><span class="line"><span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line">&#125; &#125;</span><br></pre></td></tr></table></figure>

<h3 id="deep-选项"><a href="#deep-选项" class="headerlink" title="deep 选项"></a>deep 选项</h3><p>如果 watch 侦听的是一个对象，如果对象中的属性值发生了变化，则无法被监听到。此时需要使用 deep 选项，代码示例如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm= <span class="keyword">new</span> <span class="title function_">vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:#app;</span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line">  <span class="attr">userName</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="attr">watch</span>:&#123;</span><br><span class="line">  <span class="comment">// 监听message值的变化</span></span><br><span class="line">  <span class="comment">// newVal是变化后的新值，oldVal是变化之前的旧值</span></span><br><span class="line">  <span class="title function_">userName</span>(<span class="params">newVal,oldVal</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal,oldVal)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">deep</span>:<span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>如果只想监听对象中单个属性的变化，则可以按照如下的方式定义 watch 侦听器：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm= <span class="keyword">new</span> <span class="title function_">vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:#app;</span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line">  <span class="attr">info</span>:&#123;<span class="attr">userName</span>:<span class="string">&#x27;hello&#x27;</span>&#125;</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="attr">watch</span>:&#123;</span><br><span class="line"> <span class="string">&#x27;info.userName&#x27;</span>:&#123;</span><br><span class="line">   <span class="title function_">handler</span>(<span class="params">newVal</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal)</span><br><span class="line">     </span><br><span class="line">   &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="data"><a href="#data" class="headerlink" title="data"></a>data</h2><p>存放页面中的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data:&#123;</span><br><span class="line">  info:&#123;userName:&#x27;hello&#x27;&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="computed计算属性"><a href="#computed计算属性" class="headerlink" title="computed计算属性"></a>computed计算属性</h2><p>计算属性指的是通过一系列运算之后，最终得到一个属性值。 </p>
<p>这个动态计算出来的属性值可以被模板结构或 methods 方法使用。</p>
<p>① 虽然计算属性在声明的时候被定义为方法，但是计算属性的本质是一个属性 </p>
<p>② 计算属性会缓存计算的结果，只有计算属性依赖的数据变化时，才会重新进行运算</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm= <span class="keyword">new</span> <span class="title function_">vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:#app;</span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line">r,<span class="number">0</span>,<span class="attr">g</span>:<span class="number">0</span>,<span class="attr">b</span>:<span class="number">0</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line"><span class="title function_">rgb</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="string">`rgb(<span class="subst">$&#123;<span class="variable language_">this</span>.r&#125;</span>),(<span class="subst">$&#123;<span class="variable language_">this</span>.g&#125;</span>),(<span class="subst">$&#123;<span class="variable language_">this</span>.b&#125;</span>)`</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">  <span class="title function_">show</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">rgb</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="methods方法"><a href="#methods方法" class="headerlink" title="methods方法"></a>methods方法</h2><p>存放vue中的函数，在methods中不能使用箭头函数，因为箭头函数的this指向的是父级，不能取到Vue实例对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">  show()&#123;</span><br><span class="line">    console.log(this.rgb)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="vue-cli"><a href="#vue-cli" class="headerlink" title="vue-cli"></a>vue-cli</h2><p>单页面应用程序（英文名：Single Page Application）简称 SPA，顾名 思义，指的是一个 Web 网站中只有唯一的一个 HTML 页面，所有的功能 与交互都在这唯一的一个页面内完成。</p>
<p>vue-cli 是 Vue.js 开发的标准工具。它简化了程序员基于 webpack 创建工程化的 Vue 项目的过程。</p>
<h3 id="安装和使用"><a href="#安装和使用" class="headerlink" title="安装和使用"></a>安装和使用</h3><p>vue-cli 是 npm 上的一个全局包，使用 npm install 命令，即可方便的把它安装到自己的电脑上： </p>
<p>npm install -g @vue&#x2F;cli </p>
<p>基于 vue-cli 快速生成工程化的 Vue 项目： </p>
<p>vue create 项目的名称</p>
<h3 id="运行流程"><a href="#运行流程" class="headerlink" title="运行流程"></a>运行流程</h3><p>在工程化的项目中，vue 要做的事情很单纯：通过 main.js 把 App.vue 渲染到 index.html 的指定区域中。 </p>
<p>其中： </p>
<p>① App.vue 用来编写待渲染的模板结构 </p>
<p>② index.html 中需要预留一个 el 区域 </p>
<p>③ main.js 把 App.vue 渲染到了 index.html 所预留的区域中</p>
<h2 id="vue组件"><a href="#vue组件" class="headerlink" title="vue组件"></a>vue组件</h2><p>组件化开发指的是：根据封装的思想，把页面上可重用的 UI 结构封装为组件，从而方便项目的开发和维护。</p>
<p>vue 是一个支持组件化开发的前端框架。 </p>
<p>vue 中规定：组件的后缀名是 .vue。之前接触到的 App.vue 文件本质上就是一个 vue 的组件。</p>
<h3 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h3><p>每个 .vue 组件都由 3 部分构成，分别是： </p>
<p>template -&gt; 组件的模板结构 </p>
<p>script -&gt; 组件的 JavaScript 行为 </p>
<p>style -&gt; 组件的样式 </p>
<p>其中，每个组件中必须包含 template 模板结构，而 script 行为和 style 样式是可选的组成部分。</p>
<h4 id="template"><a href="#template" class="headerlink" title="template"></a>template</h4><p>vue 规定：每个组件对应的模板结构，需要定义到 <template> 节点中。template 是 vue 提供的容器标签，只起到包裹性质的作用，它不会被渲染为真正的 DOM 元素 。</p>
<p> template 中只能包含唯一的根节点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">//组件dom结构</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="script"><a href="#script" class="headerlink" title="script"></a>script</h4><p>vue 规定：开发者可以在 <script> 节点中封装组件的 JavaScript 业务逻辑。 </p>
<script > 节点的基本结构如下：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  //data、methods</span><br><span class="line"></span><br><span class="line">  //导出对象</span><br><span class="line">  export default&#123;&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

vue 规定：.vue 组件中的 data 必须是一个函数，不能直接指向一个数据对象。 

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//error</span><br><span class="line">data:&#123;</span><br><span class="line">  count:0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



#### style

vue 规定：组件内的 <style> 节点是可选的，开发者可以在 <style> 节点中编写样式美化当前组件的 UI 结构。 

<script > 节点的基本结构如下：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  h1&#123;</span><br><span class="line">    font-size:16px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">//less语法</span><br><span class="line">  &lt;style lang=&#x27;less&#x27;&gt;</span><br><span class="line">  h1&#123;</span><br><span class="line">    font-size:16px;</span><br><span class="line">    span&#123;</span><br><span class="line">      color:pink;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

### 组件之间的父子关系

![](https://pic.imgdb.cn/item/63d67728face21e9ef1c6a1b.png)

### 使用组件的三个步骤

1.使用import语法导入组件

2.使用components节点注册组件

3.以标签形式使用已注册的组件

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1、import Test from ’../../components/Test.vue‘</span><br><span class="line"></span><br><span class="line">  3、&lt;templace&gt;</span><br><span class="line">    &lt;Test/&gt;</span><br><span class="line">  &lt;/templace&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      2、         export  default&#123;</span><br><span class="line">                 components:&#123;</span><br><span class="line">                   Test</span><br><span class="line">                 &#125;</span><br><span class="line">               &#125;</span><br></pre></td></tr></table></figure>



### 私有组件：

### 通过 components 注册的是私有子组件 全局组件：

在 vue 项目的 main.js 入口文件中，通过 Vue.component() 方法，可以注册全局组件。示例代码如下：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 导入</span><br><span class="line">import Count from ’@、components/Count.vue‘</span><br><span class="line"></span><br><span class="line">// 参数1：字符串表示，组件的名字</span><br><span class="line">// 参数2：要全局注册的组件</span><br><span class="line">  vue.component (&#x27;MyCount&#x27;,Count)</span><br></pre></td></tr></table></figure>

### 组件的props

props 是组件的自定义属性，在封装通用组件的时候，合理地使用 props 可以极大的提高组件的复用性！ 

它的语法格式如下：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">export default&#123;</span><br><span class="line">  props:[&#x27;自定义属性A&#x27;,&#x27;自定义属性B...&#x27;],</span><br><span class="line"></span><br><span class="line">    //组件的私有数据</span><br><span class="line">    data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

vue 规定：组件中封装的自定义属性是只读的，程序员不能直接修改 props 的值。否则会直接报错：

要想修改 props 的值，可以把 props 的值转存到 data 中，因为 data 中的数据都是可读可写的！

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">props:[&#x27;init&#x27;],</span><br><span class="line">  data()&#123;</span><br><span class="line">    return&#123;</span><br><span class="line">      count:this.init //把this。init的值存到count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

在声明自定义属性时，可以通过 default 来定义属性的默认值。通过 type 来定义属性的值类型。 required 选项，将属性设置为必填项，示例代码如下：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">export default&#123;</span><br><span class="line">  props:&#123;</span><br><span class="line">    init:&#123;</span><br><span class="line">      //用 default属性定义属性的默认值</span><br><span class="line">      default:0,</span><br><span class="line">        // 用type属性定义属性的值类型</span><br><span class="line">        //如果传递过来的值不符合此类型，则会报错</span><br><span class="line">        type:number,</span><br><span class="line">        required:true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

### 组件之间的样式冲突问题

默认情况下，写在 .vue 组件中的样式会全局生效，因此很容易造成多个组件之间的样式冲突问题。

### 导致组件之间样式冲突的根本原因是： 

#### ① 单页面应用程序中，所有组件的 DOM 结构，都是基于唯一的 index.html 页面进行呈现的。 

#### ② 每个组件中的样式，都会影响整个 index.html 页面中的 DOM 元素。

解决：为每个组件分配唯一的自定义属性，在编写组件样式时，通过属性选择器来控制样式的作用域，示例代码如下。

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&#x27;container&#x27; data-v-001&gt;</span><br><span class="line">    &lt;h3 data-v-001&gt;轮播图组件&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">//通过中括号&quot;属性选择器&quot;，来防止组件之间的样式冲突，因为每个组件分配的自定义属性是唯一的</span><br><span class="line">  .container[data-v-001]&#123;</span><br><span class="line">    boder:1px solid pink;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure>

为了提高开发效率和开发体验，vue 为 style 节点提供了 scoped 属性，从而防止组件之间的样式冲突问题；如果给当前组件的 style 节点添加了 scoped 属性，则当前组件的样式对其子组件是不生效的。如果想让某些样式对子组件生效，可以使用 /deep/ 深度选择器。

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&#x27;container&#x27;&gt;</span><br><span class="line">    &lt;h3 &gt;轮播图组件&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .container&#123;</span><br><span class="line">    boder:1px solid pink;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //deep</span><br><span class="line">  /deep/.container&#123;</span><br><span class="line">    boder:1px solid pink;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure>

## 生命周期

生命周期（Life Cycle）是指一个组件从创建 -> 运行 -> 销毁的整个阶段，强调的是一个时间段。 

生命周期函数：是由 vue 框架提供的内置函数，会伴随着组件的生命周期，自动按次序执行。 

注意：生命周期强调的是时间段，生命周期函数强调的是时间点。

### 生命周期分类

![](https://pic.imgdb.cn/item/63d67745face21e9ef1cb9aa.png)

### 组件之间的数据共享

#### 组件之间常见的关系

#### ① 父子关系 

父子组件之间的数据共享又分为： 

① 父 -> 子共享数据 

② 子 -> 父共享数据

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//父组件</span><br><span class="line">&lt;Son :msg=&quot;message&quot; :user=&#x27;userInfo&#x27;&gt;&lt;/Son&gt;</span><br><span class="line">data()&#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    message:&#x27;hello vue.js&#x27;,</span><br><span class="line">    userInfo:&#123;name:jelly,age:18&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  //子组件</span><br><span class="line">  &lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h5&gt;Son 组件&lt;/h5&gt;</span><br><span class="line">      &lt;p&gt;父组件传过来的mgs值:&#123;&#123;mag&#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;父组件传过来的user值:&#123;&#123;user&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;/templace&gt;</span><br><span class="line">  props:[&#x27;msg&#x27;,&#x27;user&#x27;]</span><br></pre></td></tr></table></figure>

子组件向父组件共享数据使用自定义事件

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//子组件</span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">    return &#123;count:0&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods :&#123;</span><br><span class="line">    add()&#123;</span><br><span class="line">    this.coutn+=1</span><br><span class="line">    //修改数据时，通过$emit()触发自定义事件</span><br><span class="line">    this.$emit(&#x27;numChange&#x27;,this.count)</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    //父组件</span><br><span class="line">&lt;Son @numChange=&#x27;getNewCount&#x27;&gt;&lt;/Son&gt;</span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">    return &#123;countFromSon:0&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods :&#123;</span><br><span class="line">    getNewCount(val)&#123;</span><br><span class="line">    this.countFromSon=val</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

#### ② 兄弟关系

EventBus

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">//在main中,在vue的原型链上挂载一个bus属性用来做兄弟组件传值</span><br><span class="line">    Vue.prototype.$bus = new Vue()</span><br><span class="line">//A组件</span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">    return &#123;count:0&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods :&#123;</span><br><span class="line">    add()&#123;</span><br><span class="line">    this.coutn+=1</span><br><span class="line">      //发送</span><br><span class="line">    this.$emit(&#x27;numChange&#x27;,this.count)</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">//B组件</span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">    return &#123;count:0&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods :&#123;</span><br><span class="line">    add()&#123;</span><br><span class="line">    //接收      </span><br><span class="line">    this.$on(&#x27;numChange&#x27;,val=&gt;&#123;</span><br><span class="line">      this.count=val</span><br><span class="line">    &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

## ref

ref 用来辅助开发者在不依赖于 jQuery 的情况下，获取 DOM 元素或组件的引用。 

每个 vue 的组件实例上，都包含一个 $refs 对象，里面存储着对应的 DOM 元素或组件的引用。默认情况下， 组件的 $refs 指向一个空对象。

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3 ref=&#x27;myh3&#x27;&gt;MyRef 组件&lt;/H3&gt;</span><br><span class="line">&lt;button @click=&#x27;getRef&#x27;&gt;获取$refs引用&lt;/button&gt;</span><br><span class="line">methods:&#123;</span><br><span class="line">  getRef()&#123;</span><br><span class="line">    //通过this.$refs.引用名称,可以获取到DOM元素</span><br><span class="line">    console.log(this.$refs.myh3)</span><br><span class="line"></span><br><span class="line">    //操作DOM元素，把文本颜色改成红色</span><br><span class="line">    this.$refs.myh3.style.color=&#x27;red&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

### 控制文本框和按钮的按需切换

通过布尔值inputVisible来控制组件中的文本框与按钮的按需切换

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&#x27;text&#x27; v-if=&#x27;inputVisible&#x27; ref=&#x27;ipt&#x27;&gt;&lt;/input&gt;</span><br><span class="line">  &lt;button v-else @click=&#x27;showInput&#x27;&gt;展示输入框&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">    return &#123;inputVisible:false&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods :&#123;</span><br><span class="line">    showInput()&#123;</span><br><span class="line">      this.inputVisible=true</span><br><span class="line">      //自动获取焦点</span><br><span class="line">      this.$refs.ipt.focus()</span><br><span class="line">      &#125;</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

## this.$nextTick

组件的 $nextTick(cb) 方法，会把 cb 回调推迟到下一个 DOM 更新周期之后执行。通俗的理解是：等组件的 DOM 更新完成之后，再执行 cb 回调函数。从而能保证 cb 回调函数可以操作到最新的 DOM 元素。

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&#x27;text&#x27; v-if=&#x27;inputVisible&#x27; ref=&#x27;ipt&#x27;&gt;&lt;/input&gt;</span><br><span class="line">  &lt;button v-else @click=&#x27;showInput&#x27;&gt;展示输入框&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">    return &#123;inputVisible:false&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods :&#123;</span><br><span class="line">    showInput()&#123;</span><br><span class="line">      this.inputVisible=true</span><br><span class="line">//把对input文本框的操作，推迟到DOM更新完后，否则页面上根部不存在文本框元素</span><br><span class="line">      this.$nextTick(()=&gt;&#123;</span><br><span class="line">        this.$refs.ipt.focus()</span><br><span class="line">        </span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      &#125;</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

## 动态组件

动态组件指的是动态切换组件的显示与隐藏。

vue 提供了一个内置的 <component> 组件，专门用来实现动态组件的渲染。 

默认情况下，切换动态组件时无法保持组件的状态。此时可以使用 vue 内置的 <keep-alive> 组件保持动态组 件的状态。示例代码如下

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data()&#123;</span><br><span class="line">  //1、当前要渲染的组件名称</span><br><span class="line">    return &#123;comName:&#x27;Left&#x27;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">//2、通过is属性，动态渲染</span><br><span class="line">&lt;keep-alive&gt;  </span><br><span class="line">   &lt;component :is=&#x27;comName&#x27;&gt;&lt;/component&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br><span class="line">  //3.点击按钮，切换组件</span><br><span class="line">  &lt;button @click=&#x27;comName&#x27;&gt;展示Left组件&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&#x27;comName&#x27;&gt;展示Riht组件&lt;/button&gt;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

### keep-alive 对应的生命周期函数

当组件被缓存时，会自动触发组件的 deactivated 生命周期函数。 

当组件被激活时，会自动触发组件的 activated 生命周期函数。

### include属性

include 属性用来指定：只有名称匹配的组件会被缓存。多个组件名之间使用英文的逗号分隔：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive include=&#x27;MyLeft,MyRight&#x27;&gt;  </span><br><span class="line">   &lt;component :is=&#x27;comName&#x27;&gt;&lt;/component&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

## 插槽

插槽（Slot）是 vue 为组件的封装者提供的能力。允许开发者在封装组件时，把不确定的、希望由用户指定的部分定义为插槽。

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p &gt;这是 MyCom1的第一个p标签&lt;/p&gt;</span><br><span class="line">  //通过slot标签，为用户预留内容占位符（插槽）</span><br><span class="line">  &lt;slot&gt;&lt;/slot&gt; //显示my-com1组件中的内容</span><br><span class="line">  &lt;p &gt;这是 MyCom1的第最后个p标签&lt;/p&gt;</span><br><span class="line">  </span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;my-com1&gt;</span><br><span class="line">  &lt;p&gt;自定义内容&lt;p&gt;</span><br><span class="line">&lt;/my-com1&gt;</span><br></pre></td></tr></table></figure>

### 具名插槽

在向具名插槽提供内容的时候，我们可以在一个 <template> 元素上使用 v-slot (简写为#)指令，并以 v-slot 的参数的 形式提供其名称。

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;header&gt;</span><br><span class="line">    &lt;slot name=&#x27;header&#x27;&gt;</span><br><span class="line">    &lt;/slot&gt;</span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">    </span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;template v-slot:header&gt;</span><br><span class="line">  &lt;p &gt;test&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">  &lt;template #header&gt;</span><br><span class="line">  &lt;p &gt;test&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

### 作用域插槽

在封装组件的过程中，可以为预留的 <slot> 插槽绑定 props 数据，这种带有 props 数据的 <slot> 叫做“作用 域插槽”。示例代码如下：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;tbody&gt;</span><br><span class="line"> &lt;slot v-for=&#x27;item in list&#x27; :user=&#x27;item&#x27;&gt;</span><br><span class="line"> &lt;/slot&gt;</span><br><span class="line">  </span><br><span class="line">&lt;/tbody&gt;</span><br><span class="line"></span><br><span class="line">  //使用作用域插槽</span><br><span class="line">  &lt;my-com3&gt;</span><br><span class="line">  &lt;template #default=&#x27;scope&#x27;&gt;</span><br><span class="line">     &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;scope&#125;&#125;&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/my-com3&gt;</span><br><span class="line"></span><br><span class="line">  //解构插槽props</span><br><span class="line">   &lt;my-com3&gt;</span><br><span class="line">  &lt;template #default=&#x27;&#123;user&#125;&#x27;&gt;</span><br><span class="line">     &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;user.id&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;user.name&#125;&#125;&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/my-com3&gt;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

## 自定义指令

vue 中的自定义指令分为两类，分别是： 

### 私有自定义指令 

在每个 vue 组件中，可以在 directives 节点下声明私有自定义指令。示例代码如下：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">//创建自定义指令</span><br><span class="line">directives;&#123;</span><br><span class="line">  color:&#123;</span><br><span class="line">    bind(el)&#123;</span><br><span class="line">      el.style.color=&#x27;pink&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  //使用自定义指令</span><br><span class="line">    &lt;h1 v-color&gt;App 组件&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//动态绑定参数</span><br><span class="line">data()&#123;</span><br><span class="line">  return&#123;</span><br><span class="line">    color:&#x27;pink&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">  &lt;h1 v-color=&#x27;color&#x27;&gt;App 组件&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//通过binding获取指令的参数值</span><br><span class="line">directives;&#123;</span><br><span class="line">  color:&#123;</span><br><span class="line">    bind(el,binding)&#123;</span><br><span class="line">      el.style.color=binding.value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//update 函数</span><br><span class="line">bind 函数只调用 1 次：当指令第一次绑定到元素时调用，当 DOM 更新时 bind 函数不会被触发。 update 函</span><br><span class="line">数会在每次 DOM 更新时被调用。示例代码如下：</span><br><span class="line">directives;&#123;</span><br><span class="line">  color:&#123;</span><br><span class="line">    bind(el,binding)&#123;</span><br><span class="line">      el.style.color=binding.value</span><br><span class="line">    &#125;,</span><br><span class="line">    update(el,binding)&#123;</span><br><span class="line">      el.style.color=binding.value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//如果 insert 和update 函数中的逻辑完全相同，则对象格式的自定义指令可以简写成函数格式：</span><br><span class="line">directives;&#123;</span><br><span class="line">  color(el,binding)&#123;</span><br><span class="line">      el.style.color=binding.value</span><br><span class="line">    &#125;,</span><br><span class="line">  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

### 全局自定义指令

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//参数1:字符串，名字</span><br><span class="line">//参数2:对象，用来接收指令的参数值</span><br><span class="line">  Vue.directive(&#x27;color&#x27;,function(el,binding)&#123;</span><br><span class="line">    el.style.color=bing.value</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

# 二、路由

SPA 指的是一个 web 网站只有唯一的一个 HTML 页面，所有组件的展示与切换都在这唯一的一个页面内完成。 

此时，不同组件之间的切换需要通过前端路由来实现。 

结论：在 SPA 项目中，不同功能之间的切换，要依赖于前端路由来完成！

## 前端路由 

通俗易懂的概念：Hash 地址与组件之间的对应关系。

### 前端路由的工作方式 

#### ① 用户点击了页面上的路由链接 

#### ② 导致了 URL 地址栏中的 Hash 值发生了变化 

#### ③ 前端路由监听了到 Hash 地址的变化 

#### ④ 前端路由把当前 Hash 地址对应的组件渲染都浏览器中



## vue-router

vue-router 是 vue.js 官方给出的路由解决方案。它只能结合 vue 项目进行使用，能够轻松的管理 SPA 项目 中组件的切换。

###  vue-router 安装和配置的步骤 

#### 在 vue2 的项目中，安装 vue-router 的命令如下：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-router@3.5.2 -S</span><br></pre></td></tr></table></figure>

### 创建路由模块

#### 在 src 源代码目录下，新建 router/index.js 路由模块

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import vue from &#x27;vue&#x27;</span><br><span class="line">import vueRouter from &#x27;vue-router&#x27;</span><br><span class="line"></span><br><span class="line">  vue.use(vueRouter)</span><br><span class="line">  const router=new vueRouter()</span><br><span class="line">  export defaule router</span><br></pre></td></tr></table></figure>

### 导入并挂载路由

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import vue from &#x27;vue&#x27;</span><br><span class="line">import APP from &#x27;./App.vue&#x27;</span><br><span class="line">import router from &#x27;@/router&#x27;</span><br><span class="line">  new Vue(&#123;</span><br><span class="line">  render:h=&gt;h(App),</span><br><span class="line">    router:router</span><br><span class="line">  &#125;).$mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>

## vue-router基本用法

### <router-link> 

### <router-view> 

在 src/App.vue 组件中，使用 vue-router 提供的 <router-link> 和 <router-view> 声明路由链接和占位符：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;templace&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">  &lt;h1&gt;App组件&lt;/h1&gt;</span><br><span class="line">    &lt;router-link to=&#x27;/home&#x27;&gt;首页&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&#x27;/movie&#x27;&gt;电影&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&#x27;/about&#x27;&gt;关于&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    //路由占位符（路由出口）</span><br><span class="line">    &lt;router-view/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/templace&gt;</span><br></pre></td></tr></table></figure>

### 声明路由规则

在 src/router/index.js 路由模块中，通过 routes 数组声明路由的匹配规则。示例代码如下：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import Home from &#x27;@/components/home.vue&#x27;</span><br><span class="line">import Movie from &#x27;@/components/Movie.vue&#x27;</span><br><span class="line">import About from &#x27;@/components/about.vue&#x27;</span><br><span class="line"></span><br><span class="line">  const router=new VueRouter(&#123;</span><br><span class="line">  routers:[</span><br><span class="line">  &#123;path:&#x27;/home&#x27;,component:Home&#125;,</span><br><span class="line">  &#123;path:&#x27;/movie&#x27;,component:Movie&#125;,</span><br><span class="line">  &#123;path:&#x27;/about&#x27;,component:About&#125;</span><br><span class="line">  ]</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

### 路由重定向

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const router=new VueRouter(&#123;</span><br><span class="line">  routers:[</span><br><span class="line">  &#123;path:&#x27;/&#x27;,redirect:&#x27;/home&#x27;&#125;,</span><br><span class="line">  &#123;path:&#x27;/home&#x27;,component:Home&#125;,</span><br><span class="line">  &#123;path:&#x27;/movie&#x27;,component:Movie&#125;,</span><br><span class="line">  &#123;path:&#x27;/about&#x27;,component:About&#125;</span><br><span class="line">  ]</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

###  嵌套路由

![](https://pic.imgdb.cn/item/63d6775cface21e9ef1cef4b.png)

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;templace&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;App组件&lt;/h3&gt;</span><br><span class="line">    &lt;router-link to=&#x27;/about/tab1&gt;tab1&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&#x27;/about/tab2&gt;tab2&lt;/router-link&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;router-view/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/templace&gt;</span><br></pre></td></tr></table></figure>

#### 通过 children 属性声明子路由规则

在 src/router/index.js 路由模块中，导入需要的组件，并使用 children 属性声明子路由规则：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import Tab1 from &#x27;@/components/tab1.vue&#x27;</span><br><span class="line">import Tab2 from &#x27;@/components/tab2.vue&#x27;</span><br><span class="line"></span><br><span class="line">  const router=new VueRouter(&#123;</span><br><span class="line">  routers:[</span><br><span class="line">  &#123;path:&#x27;/about&#x27;,</span><br><span class="line">  component:About,</span><br><span class="line">  children:[</span><br><span class="line">  &#123;path:&#x27;tab1&#x27;,component:Tab1&#125;,</span><br><span class="line">  &#123;path:&#x27;tab2&#x27;,component:Tab2&#125;,</span><br><span class="line">    ]</span><br><span class="line">   &#125;]</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

### 动态路由

动态路由指的是：把 Hash 地址中可变的部分定义为参数项，从而提高路由规则的复用性。 

在 vue-router 中使用英文的冒号（**:**）来定义路由的参数项。示例代码如下：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//&#123;path:&#x27;/movie:id&#x27;,component:Movie&#125;,</span><br><span class="line"></span><br><span class="line">&#123;path:&#x27;/movie/1&#x27;,component:Movie&#125;,</span><br><span class="line">&#123;path:&#x27;/movie/2&#x27;,component:Movie&#125;,</span><br><span class="line">&#123;path:&#x27;/movie/3&#x27;,component:Movie&#125;,</span><br></pre></td></tr></table></figure>

#### $route.params 参数对象

在动态路由渲染出来的组件中，可以使用 this.$route.params 对象访问到动态匹配的参数值。

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;templace&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;Movie组件&#123;&#123;this.router.params.id&#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/templace&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Movie&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

#### 使用 props 接收路由参数

为了简化路由参数的获取形式，vue-router 允许在路由规则中开启 props 传参。示例代码如下：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  //定义</span><br><span class="line">  &#123;path:&#x27;/movie/1&#x27;,component:Movie,props:true&#125;,</span><br><span class="line"></span><br><span class="line">  &lt;templace&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;Movie组件&#123;&#123;id&#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/templace&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Movie&#x27;,</span><br><span class="line">    props:[&#x27;id&#x27;]</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

###  声明式导航 & 编程式导航

在浏览器中，点击链接实现导航的方式，叫做声明式导航。例如： 

普通网页中点击 <a> 链接、vue 项目中点击 <router-link> 都属于声明式导航 

在浏览器中，调用 API 方法实现导航的方式，叫做编程式导航。例如： 

普通网页中调用 location.href 跳转到新页面的方式，属于编程式导航

### 编程式导航

#### $router.push

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  &lt;templace&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;Home组件&lt;/h3&gt;</span><br><span class="line">    &lt;button @click=&#x27;gotoMovie&#x27;&gt;</span><br><span class="line">    跳转到Movie页面</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/templace&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">   methods:&#123;</span><br><span class="line">     gotoMovie()&#123;</span><br><span class="line">       this.$router.push(&#x27;/movie/1&#x27;)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>



#### $router.replace

调用 this.$router.replace() 方法，可以跳转到指定的 hash 地址，从而展示对应的组件页面。 

push 和 replace 的区别： 

push 会增加一条历史记录 

replace 不会增加历史记录，而是替换掉当前的历史记录

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  &lt;templace&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;Home组件&lt;/h3&gt;</span><br><span class="line">    &lt;button @click=&#x27;gotoMovie&#x27;&gt;</span><br><span class="line">    跳转到Movie页面</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/templace&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">   methods:&#123;</span><br><span class="line">     gotoMovie()&#123;</span><br><span class="line">       this.$router.replace(&#x27;/movie/1&#x27;)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>



#### $router.go

调用 this.$router.go() 方法，可以在浏览历史中前进和后退。

$router.back()  在历史记录中，后退到上一个页面 。

 $router.forward()  在历史记录中，前进到下一个页面。

示例代码如下：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  &lt;templace&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;Home组件&lt;/h3&gt;</span><br><span class="line">    &lt;button @click=&#x27;gotoMovie&#x27;&gt;</span><br><span class="line">    跳转到Movie页面</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/templace&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">   methods:&#123;</span><br><span class="line">     gotoMovie()&#123;</span><br><span class="line">       this.$router.go(-1)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

### 路由守卫

控制路由的访问权限

####  全局前置守卫

每次发生路由的导航跳转时，都会触发全局前置守卫。因此，在全局前置守卫中，程序员可以对每个路由进行访问权限的控制：

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//创建路由实例对象</span><br><span class="line">const router=new VueRouter(&#123;...&#125;)</span><br><span class="line">router.beforeEach((to,from,next)=&gt;&#123;</span><br><span class="line">    //to 目的</span><br><span class="line">    //from 来源</span><br><span class="line">    // next 放行</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">    //netx的调用状态</span><br><span class="line">    next()、next(&#x27;/login&#x27;)、next（false）</span><br><span class="line">    </span><br><span class="line">// 控制后台主页的访问权限</span><br><span class="line">    router.beforeEach((to,from,next)=&gt;&#123;</span><br><span class="line"> if(token)&#123;</span><br><span class="line">    next()</span><br><span class="line"> &#125;else&#123;</span><br><span class="line">    next(&#x27;/login&#x27;)</span><br><span class="line"> &#125;else&#123;</span><br><span class="line">    next()</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

# 三、vuex状态机

vuex是使用vue中必不可少的一部分，基于父子、兄弟组件，我们传值可能会很方便，但是如果是没有关联的组件之间要使用同一组数据，就显得很无能为力，那么vuex就很好的解决了我们这种问题，它相当于一个公共仓库，保存着所有组件都能共用的数据。

1、在store文件夹，新建个index.js文件

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &quot;vue&quot;</span><br><span class="line">import Vuex from &quot;vuex&quot;</span><br><span class="line"> </span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"> </span><br><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">    state:&#123;</span><br><span class="line">        pathName: &quot;&quot;,</span><br><span class="line">        currDbSource: &#123;&#125;,</span><br><span class="line">        currJobData: &#123;&#125;,</span><br><span class="line">        DbSource: []</span><br><span class="line">    &#125;,</span><br><span class="line">    mutations:&#123;</span><br><span class="line">        // 保存当前菜单栏的路径</span><br><span class="line">        savePath(state,pathName)&#123;</span><br><span class="line">            state.pathName = pathName;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 保存当前点击的数据源</span><br><span class="line">        saveCurrDbSource(state,currDbSource)&#123;</span><br><span class="line">            state.currDbSource = currDbSource;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 保存当前点击的元数据</span><br><span class="line">        saveCurrJobData(state,currJobData)&#123;</span><br><span class="line">            state.currJobData = currJobData;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 保存所有数据源</span><br><span class="line">        saveDbSource(state,DbSource)&#123;</span><br><span class="line">            state.DbSource = DbSource;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

2、main.js引用：（注意路径即可）

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 引入vuex-store</span><br><span class="line">import store from &#x27;./store/index&#x27;;</span><br><span class="line"> </span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &#x27;#app&#x27;,</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: h =&gt; h(App)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

3、保存数据：（场景举例：当我点击按钮后，我需要把当前的数据保存到vuex中，然后跳转到别的路由，然后使用这些数据）

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">    click()&#123;</span><br><span class="line">        // 点击按钮进行一些操作，然后保存数据</span><br><span class="line">        this.$store.commit(&#x27;saveCurrDbSource&#x27;,this.db)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  第一个参数是要触发的方法，也就是上面mutations中的方法，</span><br><span class="line">  第二个参数是你要传递的数据</span><br></pre></td></tr></table></figure>

4、获取变量：（当数据初始获取不到时，可以使用计算属性用来获取）

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">this.$store.state.变量名</span><br><span class="line"> </span><br><span class="line">// 例如</span><br><span class="line">this.$store.state.currDbSource</span><br></pre></td></tr></table></figure>

# 四、ElementUI库

一个现成的ui库，相对于其它ui库较为简单。

## [Element UI官网](https://element.eleme.cn/#/zh-CN)

### 1、安装

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i element-ui -S</span><br></pre></td></tr></table></figure>

### 2、引入

打开项目的**main.js**

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import ElementUI from &#x27;element-ui&#x27;</span><br><span class="line">import &#x27;element-ui/lib/theme-chalk/index.css&#x27;</span><br><span class="line">Vue.use(ElementUI)</span><br></pre></td></tr></table></figure>

### 开发后台管理系统的常用标签

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">el-container：构建整个页面框架</span><br><span class="line">el-aside：构建左侧菜单</span><br><span class="line">el-menu：左侧菜单内容，常用属性：</span><br><span class="line">:default-openeds=[&#x27;index&#x27;]：默认展开的菜单，通过菜单的index值来关联</span><br><span class="line">:default-active=[&#x27;index&#x27;]：默认选中菜单，通过index关联</span><br><span class="line">el-submenu：可展开的菜单，常用属性：</span><br><span class="line">index：菜单的下标，文本类型，不是数值类型。例&lt;el-submenu index=&quot;xx&quot;&gt;</span><br><span class="line">template：对应el-submenu的菜单名。</span><br><span class="line">i标签：设置菜单图标，通过class属性来设置。&lt;i calss=&quot;el-icon-iconName&quot;/&gt;</span><br><span class="line">el-menu-item：设置菜单的子节点，不可再展开</span><br><span class="line">index：菜单的下标，文本类型，不是数值类型。例&lt;el-menu-item index=&quot;xx&quot;&gt;</span><br></pre></td></tr></table></figure>

## 使用实例

### App.vue

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-container style=&quot;height: 500px; border: 1px solid #eee&quot;&gt;</span><br><span class="line">  &lt;!--左侧菜单--&gt;</span><br><span class="line">    &lt;el-aside width=&quot;200px&quot; style=&quot;background-color: white&quot;&gt;</span><br><span class="line">      &lt;!--一级菜单，默认打开导航1和导航2--&gt;</span><br><span class="line">      &lt;el-menu router :default-openeds=&quot;[&#x27;0&#x27;,&#x27;1&#x27;]&quot;&gt; </span><br><span class="line">      	&lt;!-- 遍历一级菜单的内容,若show为true则显示出来--&gt;</span><br><span class="line">        &lt;el-submenu v-for=&quot;(item,index) in $router.options.routes&quot; :index=&quot;index+&#x27;&#x27;&quot; v-if=&quot;item.show&quot;&gt;</span><br><span class="line">          &lt;template slot=&quot;title&quot;&gt;&lt;i class=&quot;el-icon-message&quot;&gt;&lt;/i&gt;&#123;&#123; item.name &#125;&#125;&lt;/template&gt;</span><br><span class="line">          &lt;!--遍历二级菜单内容并显示，class是选择某页面后展示的样式--&gt;</span><br><span class="line">          &lt;el-menu-item v-for=&quot;(item2,index2) in item.children&quot; :index=&quot;item2.path&quot;</span><br><span class="line">            :class=&quot;$route.path==item2.path?&#x27;is-active&#x27;:&#x27;&#x27;&quot;&gt;&#123;&#123; item2.name &#125;&#125;&lt;/el-menu-item&gt;</span><br><span class="line">        &lt;/el-submenu&gt;</span><br><span class="line">      &lt;/el-menu&gt;</span><br><span class="line">    &lt;/el-aside&gt;</span><br><span class="line">    &lt;!--右侧主页面--&gt;</span><br><span class="line">    &lt;el-main&gt;</span><br><span class="line">      &lt;!--展示选择的页面--&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/el-main&gt;</span><br><span class="line">  &lt;/el-container&gt;</span><br></pre></td></tr></table></figure>

### index.vue

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

### router/index.js

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">const routes =[</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#x27;/&#x27;,</span><br><span class="line">    name: &#x27;导航1&#x27;,</span><br><span class="line">    component:Index,</span><br><span class="line">    show:true,</span><br><span class="line">    redirect:&quot;/PageOne&quot;,	//默认页面</span><br><span class="line">    children:[&#123;</span><br><span class="line">        path: &#x27;/PageOne&#x27;,</span><br><span class="line">        name: &#x27;页面1&#x27;,</span><br><span class="line">        component:PageOne&#125;,</span><br><span class="line">      &#123;path: &#x27;/页面2&#x27;,</span><br><span class="line">        name: &#x27;添加图书&#x27;,</span><br><span class="line">        component:PageTwo&#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path:&#x27;/navigation&#x27;,</span><br><span class="line">    name:&#x27;导航二&#x27;,</span><br><span class="line">    show:true,</span><br><span class="line">    component:Index,</span><br><span class="line">    children:[&#123;</span><br><span class="line">        path: &#x27;/PageThree&#x27;,</span><br><span class="line">        name: &#x27;页面3&#x27;,</span><br><span class="line">        component:PageThree</span><br><span class="line">      &#125;]</span><br><span class="line">  &#125;]</span><br></pre></td></tr></table></figure>

### 效果图：

![](https://pic.imgdb.cn/item/63d67776face21e9ef1d28a3.png)

# 五、axios与vue-axios

## [axios](https://so.csdn.net/so/search?q=axios&spm=1001.2101.3001.7020)和vue-axios区别

1、axios是基于promise的HTTP库，可以使用在浏览器和node.js中，它不是vue的第三方插件

2、axios使用的时候不能像vue的插件（如：Vue-Router、VueX等）通过Vue.use()安装插件，需要在原型上进行绑定：Vue.prototype.$axios = axios;

3、vue-axios是axios集成到Vue.js的小包装器，可以像插件一样安装:Vue.use(vueAxios);

注意: 使用vue的插件的写法（vue-axios）更符合vue整体的生态环境，直接写原型链会有些粗暴，且直接写原型链你取名为$http，你的项目成员可能取另外的名字，维护起来比较麻烦，而统一使用vue-axios就没有太多歧义.



## axios的使用

### 安装

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 安装axios</span><br><span class="line">npm install axios -S  </span><br></pre></td></tr></table></figure>

### 引入

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import ElementUI from &#x27;element-ui&#x27;;</span><br><span class="line">import &#x27;element-ui/lib/theme-chalk/index.css&#x27;;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line"></span><br><span class="line">Vue.use(ElementUI);</span><br><span class="line">Vue.use(axios);</span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">axios.defaults.baseURL = &#x27;http://test.fastadmin.cn&#x27; //全局方式生成环境使用的地址</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  render: h =&gt; h(App),</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>

### 使用

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">//get请求</span><br><span class="line">axios.get(&#x27;/user&#x27;, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">      ID: 12345</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  //post请求</span><br><span class="line">    axios.post(&#x27;/user&#x27;, &#123;</span><br><span class="line">    firstName: &#x27;Fred&#x27;,</span><br><span class="line">    lastName: &#x27;Flintstone&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //执行多个并发请求</span><br><span class="line">function getUserAccount() &#123;</span><br><span class="line">  return axios.get(&#x27;/user/12345&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getUserPermissions() &#123;</span><br><span class="line">  return axios.get(&#x27;/user/12345/permissions&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.all([getUserAccount(), getUserPermissions()])</span><br><span class="line">  .then(axios.spread(function (acct, perms) &#123;</span><br><span class="line">    // 两个请求现在都执行完成</span><br><span class="line">  &#125;));</span><br></pre></td></tr></table></figure>

## vue-axios的使用

### 安装

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 安装axios</span><br><span class="line">npm install axios -S  </span><br><span class="line"># 安装vue-axios</span><br><span class="line">npm install --save axios vue-axios</span><br></pre></td></tr></table></figure>

### 引入

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import ElementUI from &#x27;element-ui&#x27;;</span><br><span class="line">import &#x27;element-ui/lib/theme-chalk/index.css&#x27;;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">import VueAxios from &#x27;vue-axios&#x27;</span><br><span class="line"></span><br><span class="line">Vue.use(ElementUI);</span><br><span class="line">Vue.use(VueAxios, axios);</span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  render: h =&gt; h(App),</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>

### 使用

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//get请求</span><br><span class="line">Vue.axios.get(&#x27;url&#x27;,&#123;params:userId:1&#125;).then(res =&gt; &#123;&#125;).catch(err =&gt; &#123;&#125;);</span><br><span class="line">this.axios.get(&#x27;url&#x27;,&#123;params:userId:1&#125;).then(res =&gt; &#123;&#125;).catch(err =&gt; &#123;&#125;);</span><br><span class="line">this.$http.get(&#x27;url&#x27;,&#123;params:userId:1&#125;).then(res =&gt; &#123;&#125;).catch(err =&gt; &#123;&#125;);</span><br><span class="line"></span><br><span class="line">//post请求</span><br><span class="line">Vue.axios.post(&#x27;url&#x27;,&#123;params:userId:1&#125;).then(res =&gt; &#123;&#125;).catch(err =&gt; &#123;&#125;);</span><br><span class="line">    </span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-TypeSrcipt"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/01/29/TypeSrcipt/"
    >TypeSrcipt</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/01/29/TypeSrcipt/" class="article-date">
  <time datetime="2023-01-29T13:37:05.000Z" itemprop="datePublished">2023-01-29</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h2><p>由微软开发的一个开源JavaScript的超集，主要提供了类型系统和对ES6的支持，他可以编译成纯JavaScript，任何现有的JavaScript都是合法的TypeScript的程序。</p>
<p>ts编写的文件采用ts作为文件后缀。</p>
<h2 id="二、与Flow区别"><a href="#二、与Flow区别" class="headerlink" title="二、与Flow区别"></a>二、与Flow区别</h2><p>本质区别上Flow是一种JavaScript的静态类型检查工具， 和TypeScript是一种语言。</p>
<h2 id="三、优势以及缺点"><a href="#三、优势以及缺点" class="headerlink" title="三、优势以及缺点"></a>三、优势以及缺点</h2><p><strong>TypeScript 增加了代码的可读性和可维护性</strong></p>
<ul>
<li>类型系统实际上是最好的文档，大部分的函数看看类型的定义就可以知道如何使用了</li>
<li>可以在编译阶段就发现大部分错误，这总比在运行时候出错好</li>
<li>增强了编辑器和 IDE 的功能，包括代码补全、接口提示、跳转到定义、重构等</li>
</ul>
<p><strong>TypeScript 非常包容</strong></p>
<ul>
<li>TypeScript 是 JavaScript 的超集，.js 文件可以直接重命名为 .ts 即可</li>
<li>即使不显式的定义类型，也能够自动做出类型推论</li>
<li>可以定义从简单到复杂的几乎一切类型</li>
<li>即使 TypeScript 编译报错，也可以生成 JavaScript 文件</li>
<li>兼容第三方库，即使第三方库不是用 TypeScript 写的，也可以编写单独的类型文件供 TypeScript 读取</li>
</ul>
<p><strong>TypeScript 拥有活跃的社区</strong></p>
<ul>
<li>大部分第三方库都有提供给 TypeScript 的类型定义文件</li>
<li>Google 开发的 Angular2 就是使用 TypeScript 编写的</li>
<li>TypeScript 拥抱了 ES6 规范，也支持部分 ESNext 草案的规范</li>
</ul>
<p><strong>TypeScript 的缺点</strong></p>
<p>任何事物都是有两面性的，我认为 TypeScript 的弊端在于：</p>
<ul>
<li>有一定的学习成本，需要理解接口（Interfaces）、泛型（Generics）、类（Classes）、枚举类型（Enums）等前端工程师可能不是很熟悉的概念</li>
<li>短期可能会增加一些开发成本，毕竟要多写一些类型的定义，不过对于一个需要长期维护的项目，TypeScript 能够减少其维护成本</li>
<li>集成到构建流程需要一些工作量</li>
<li>可能和一些库结合的不是很完美</li>
</ul>
<p>大家可以根据自己团队和项目的情况判断是否需要使用 TypeScript。</p>
<h2 id="四、安装"><a href="#四、安装" class="headerlink" title="四、安装"></a>四、安装</h2><p><strong>TypeScript</strong> 提供一个cli工具， 让我们可以直接在命令行使用他。</p>
<p><strong>NPM安装</strong></p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure>

<p>安装完成以后， 我们会得到一个全局命令 tsc</p>
<p>我们可以很轻易的去使用它。</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc hello.ts</span><br></pre></td></tr></table></figure>

<p>如果你的代码没有出现任何问题，你将会得到一个<strong>hello.js</strong>， 这是通过ts编译器转换而成的js文件， 可直接运行。</p>
<h2 id="五、配置文件"><a href="#五、配置文件" class="headerlink" title="五、配置文件"></a>五、配置文件</h2><p>通过cli工具，快速创建配置文件</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc --init</span><br></pre></td></tr></table></figure>


<p>将ts代码转换成哪个es规范的代码，默认是es5</p>
<p><strong>module</strong></p>
<p>将ts代码转换成js代码之后，使用的模块化标准，默认是commonjs</p>
<p><strong>outDir</strong></p>
<p>将ts代码转换成js代码后的输出路径，默认是.&#x2F;, 我们习惯.&#x2F;dist</p>
<p><strong>rootDir</strong></p>
<p>将哪个目录中的ts代码进行转换，默认是.&#x2F; ，我们习惯 .&#x2F;src</p>
<p><strong>strict</strong></p>
<p>是否转换成采用严格模式的js代码</p>
<h3 id="使用配置文件"><a href="#使用配置文件" class="headerlink" title="使用配置文件"></a>使用配置文件</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc -p ./tsconfig.json</span><br></pre></td></tr></table></figure>

<p>指定ts配置文件</p>
<h2 id="六、类型声明"><a href="#六、类型声明" class="headerlink" title="六、类型声明"></a>六、类型声明</h2><p>我们可以通过：冒号对变量进行类型声明</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">name</span>:<span class="built_in">string</span> = <span class="string">&#x27;jelly&#x27;</span> </span><br></pre></td></tr></table></figure>

<p>当我们去试图修改name这个变量的时候，修改成其他类型的时候是不被允许的</p>
<p>类型声明还有非常多的类型比如：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">isActive</span>:<span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">age</span>:<span class="built_in">number</span> = <span class="number">18</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">no</span>:<span class="literal">undefined</span> = <span class="literal">undefined</span></span><br></pre></td></tr></table></figure>



<h3 id="数组Array"><a href="#数组Array" class="headerlink" title="数组Array"></a>数组Array</h3><p>可以利用 <strong>&lt;&gt;</strong> 泛型去定义一个数组，描述数组的元素的类型组成</p>
<p>或者直接在元素类型在前，[]在后的形式去声明数组</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> girlFriend : Array&lt;string&gt; = [<span class="comment">&#x27;bb&#x27;,&#x27;cc&#x27;,&#x27;dd&#x27;]</span></span><br><span class="line"><span class="keyword">let</span> girlFriend : string[] = [<span class="comment">&#x27;bb&#x27;,&#x27;cc&#x27;,&#x27;dd&#x27;]</span></span><br></pre></td></tr></table></figure>



<h3 id="元组Tuple"><a href="#元组Tuple" class="headerlink" title="元组Tuple"></a>元组Tuple</h3><p>对于已经了解数组的元素类型和元素个数的情况，我们直接可以使用<strong>元组Tuple</strong>去定义这个数组</p>
<p>比如说我这边需要一个数组，去存我三个朋友的名字，那么我可以利用<strong>元组的写法</strong>去声明类型</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> friends : [<span class="built_in">string</span>,<span class="built_in">string</span>,<span class="built_in">string</span>] = [<span class="string">&#x27;bb&#x27;</span>,<span class="string">&#x27;vv&#x27;</span>,<span class="string">&#x27;dd&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>或者说这边使用一个数组去装我其中一个女朋友的信息，名字和年龄还有身高</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> friends : [<span class="built_in">string</span>,<span class="built_in">number</span>,<span class="built_in">number</span>] = [<span class="string">&#x27;bb&#x27;</span>,<span class="number">18</span>,<span class="number">168</span>]</span><br></pre></td></tr></table></figure>

<h3 id="空值void"><a href="#空值void" class="headerlink" title="空值void"></a>空值void</h3><p>与Flow一致，只能赋值为undefined</p>
<p><strong>注意：早期的TS版本void类型可以赋值为null，在最新版本void只能赋值为undefined</strong></p>
<h3 id="undefined，null"><a href="#undefined，null" class="headerlink" title="undefined，null"></a>undefined，null</h3><p>只能赋值undefined或者null类型</p>
<h3 id="never"><a href="#never" class="headerlink" title="never"></a>never</h3><p>一般用于定义一个函数永远不可以出现终点，即这个函数不可能执行完毕，常见的要么报错，要么死循环。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> err = ():<span class="function"><span class="params">never</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里要区分与无返回值函数的区别。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这代码其实是可行的，void不代表函数不可以有return关键字， 只是限制了return必须返回void类型</span></span><br><span class="line"><span class="keyword">const</span> fn = ():<span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// never表示函数一旦执行了， 无法跳出这个函数。</span></span><br><span class="line"><span class="keyword">const</span> deelLoop = ():<span class="function"><span class="params">never</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="任意类型any"><a href="#任意类型any" class="headerlink" title="任意类型any"></a>任意类型any</h3><p>任意类型都可以，即为不对其进行类型检查。</p>
<p><strong>如果声明变量的时候没有对变量类型进行声明 并且没有赋值 ，那么将会默认声明成any类型的变量。</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> variable; </span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">variable</span>:<span class="built_in">any</span> = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure>

<p>可以认为，<strong>声明一个变量为任意值之后，对它的任何操作，返回的内容的类型都是任意值</strong>。</p>
<h3 id="类型推断"><a href="#类型推断" class="headerlink" title="类型推断"></a>类型推断</h3><p>声明变量的时候如果没有声明类型，那么会自动根据赋值的类型进行类型推断</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">name</span> = <span class="comment">&#x27;jelly&#x27;</span></span><br><span class="line">//等价于</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">name</span>:string = <span class="comment">&#x27;jelly&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="object表示非原始类型"><a href="#object表示非原始类型" class="headerlink" title="object表示非原始类型"></a>object表示非原始类型</h3><p><strong>object</strong>表示非原始类型，也就是除number，string，boolean，symbol，null或undefined之外的类型。</p>
<p>这里要注意，null在ts中不属于object类型，即使在js中typeof null &#x3D;&#x3D; ‘object’</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">obj</span>:<span class="built_in">object</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span> == <span class="string">&#x27;object&#x27;</span></span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="枚举enum"><a href="#枚举enum" class="headerlink" title="枚举enum"></a>枚举enum</h3><p>typescript提供一种JavaScript中不存在的枚举类型，可以方便显性地为某一类数据的可能性做出命名声明。使其代码约束性更强， 可读性也更强。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> myname &#123;</span><br><span class="line">  oldName=<span class="string">&#x27;GD&#x27;</span>,</span><br><span class="line">  newName=<span class="string">&#x27;jelly&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我的新名字是:&#x27;</span> + myname.<span class="property">newName</span>)</span><br><span class="line"><span class="comment">//&#x27;我的新名字是：jelly&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sayName = (<span class="attr">name</span>:myname):<span class="function"><span class="params">void</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我的名字是:&#x27;</span>+ name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">sayName</span>(myname.<span class="property">newName</span>)</span><br><span class="line"><span class="comment">// &#x27;我的名字是:jelly&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>枚举自增</strong></p>
<ul>
<li>枚举的内容可以不为其赋值， 当所有内容都没有赋值的时候，所有枚举内容都为0</li>
<li>当为其中一个值赋于数字值，该枚举类型之后的值递增，之前的值从0递增</li>
<li>不可只为其中一个值赋予除数字类型以外的值，除非该值为枚举类型的最后一个</li>
</ul>
<h3 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h3><p>类型别名（自定义类型）：为任意类型起别名。 </p>
<p>使用场景：当同一类型（复杂）被多次使用时，可以通过类型别名，简化该类型的使用</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">CustomArray</span>=(<span class="built_in">number</span>|<span class="built_in">string</span>)[]</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>:<span class="title class_">CustomArray</span>=[<span class="number">1</span>,<span class="string">&#x27;a&#x27;</span>,<span class="number">3</span>,<span class="string">&#x27;b&#x27;</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>:<span class="title class_">CustomArray</span>=[‘s’,<span class="string">&#x27;e&#x27;</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 使用 <span class="keyword">type</span> 关键字来创建类型别名。</span><br><span class="line"><span class="number">2.</span> 类型别名（比如，此处的 <span class="title class_">CustomArray</span>），可以是任意合法的变量名称。</span><br><span class="line"><span class="number">3.</span> 创建类型别名后，直接使用该类型别名作为变量的类型注解即可。</span><br></pre></td></tr></table></figure>



<h3 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h3><p>函数的类型实际上指的是：函数参数和返回值的类型。 </p>
<p>为函数指定类型的两种方式：</p>
<p>1 单独指定参数、返回值的类型 2 同时指定参数、返回值的类型。 </p>
<p>\2. 同时指定参数、返回值的类型：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">add</span>:<span class="function">(<span class="params">num1:<span class="built_in">number</span>,num2:<span class="built_in">number</span></span>)=&gt;</span><span class="function">(<span class="params">num1,num2</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//无返回值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">get</span>(<span class="params">name:<span class="built_in">string</span></span>):<span class="built_in">void</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello&#x27;</span>,name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="七、高级特性"><a href="#七、高级特性" class="headerlink" title="七、高级特性"></a>七、高级特性</h2><h3 id="联合类型"><a href="#联合类型" class="headerlink" title="联合类型"></a>联合类型</h3><p>表示可以取值为多种类型中的一种。类似<strong>Flow的或</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">variable</span>:<span class="built_in">string</span>|<span class="built_in">number</span> = <span class="string">&#x27;jelly&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="交叉类型"><a href="#交叉类型" class="headerlink" title="交叉类型"></a>交叉类型</h3><p>表示为两个类型的合并类型，使用 <strong>&amp;</strong> 连接</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> interfaceA  &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> interfaceB &#123;</span><br><span class="line">  <span class="attr">sayHi</span>:<span class="function">()=&gt;</span><span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: interfaceA &amp; interfaceB  = &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;ahreal&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">  <span class="attr">sayHi</span>:<span class="function">()=&gt;</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">name</span>: <span class="built_in">string</span> &amp; <span class="built_in">number</span> = <span class="string">&#x27;ahreal&#x27;</span></span><br><span class="line"><span class="comment">// error , 基本类型合并以后会得到never类型, 字符串无法赋值给never类型</span></span><br></pre></td></tr></table></figure>

<h3 id="类型保护"><a href="#类型保护" class="headerlink" title="类型保护"></a>类型保护</h3><p>TS能够在代码编译阶段进行错误检查，但有一些情况必须只有在代码运行时候才知道是否是可靠的。</p>
<p>我们可以创建一个函数，这个函数返回值为boolean类型，可以声明函数的执行结果为类型声明。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">arr</span>: [<span class="built_in">string</span>,<span class="built_in">number</span>] = [</span><br><span class="line">  <span class="string">&#x27;ahreal&#x27;</span>,</span><br><span class="line">  <span class="number">18</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">randomSelect</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> randomNum = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">100</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(randomNum&gt;<span class="number">50</span>) <span class="keyword">return</span> arr[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> arr[<span class="number">1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">randomSelect</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型保护函数</span></span><br><span class="line"><span class="keyword">const</span> isString = (value): value is <span class="built_in">string</span> =&gt;&#123;</span><br><span class="line">  <span class="keyword">if</span>(value.<span class="property">length</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="title function_">isString</span>(result))&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">length</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="title function_">toFixed</span>(<span class="number">2</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>当然，js内置的 typeof 方法也可解决这个方法，类型保护函数更适用于适用于复杂的类型判断</strong></p>
<p><strong>且typeof 类型保护在 TS中仅使用于 string&#x2F;number&#x2F;boolean&#x2F;symbol</strong></p>
<h3 id="字面量类型"><a href="#字面量类型" class="headerlink" title="字面量类型"></a>字面量类型</h3><p>字面量类型分为数字字面量以及字符串字面量类型。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">name</span>:<span class="string">&#x27;jelly&#x27;</span>|<span class="string">&#x27;gd&#x27;</span> = <span class="string">&#x27;GD&#x27;</span></span><br><span class="line"><span class="comment">// error</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">name</span>:<span class="string">&#x27;jelly&#x27;</span>|<span class="string">&#x27;gd&#x27;</span> = <span class="string">&#x27;gd&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">name</span>:<span class="string">&#x27;jelly&#x27;</span>|<span class="string">&#x27;gd&#x27;</span> = <span class="string">&#x27;GD&#x27;</span></span><br><span class="line"><span class="comment">// success</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">age</span>:<span class="number">19</span> = <span class="number">19</span></span><br><span class="line"><span class="comment">// success</span></span><br></pre></td></tr></table></figure>

<h3 id="keyof"><a href="#keyof" class="headerlink" title="keyof"></a>keyof</h3><p>可将一个接口类型的所有属性名提取成一个字面量联合类型</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = keyof <span class="title class_">Person</span></span><br><span class="line"><span class="comment">// &quot;name&quot; | &quot;age&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Props</span>:<span class="title class_">Props</span> = <span class="string">&#x27;age&#x27;</span></span><br><span class="line"><span class="comment">// success</span></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Props</span>:<span class="title class_">Props</span> = <span class="string">&#x27;name&#x27;</span></span><br><span class="line"><span class="comment">// success</span></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Props</span>:<span class="title class_">Props</span> = <span class="string">&#x27;sex&#x27;</span></span><br><span class="line"><span class="comment">// error</span></span><br></pre></td></tr></table></figure>

<p>有了keyof以后，我们可以判断动态属性名类型。</p>
<p>假设我有一个函数，函数接收两个参数</p>
<ul>
<li>对象</li>
<li>属性名</li>
</ul>
<p>函数返回对象属性名的值</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">func1</span> = (<span class="params">obj:<span class="built_in">object</span>, key:<span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[key]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;ahreal&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="number">19</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">func1</span>(person,<span class="string">&#x27;sex&#x27;</span>)</span><br><span class="line"><span class="comment">// 得到undefined，显然这些是可以在编译阶段检查出来的</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">我们可以很容易的限制参数obj为一个对象，key为一个字符串，但是我们如果不使用keyof，</span><br><span class="line">便很难限制，key必须为obj的一个属性名。</span><br><span class="line">使用keyof以后。</span><br><span class="line"><span class="keyword">const</span> func1 = <span class="language-xml"><span class="tag">&lt;<span class="name">T</span> <span class="attr">extneds</span> &#123;[<span class="attr">prop:string</span>]<span class="attr">:any</span>&#125;&gt;</span>(obj:T, key:keyof T) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">  return obj[key]</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">const person = &#123;</span></span><br><span class="line"><span class="language-xml">  name:&#x27;ahreal&#x27;,</span></span><br><span class="line"><span class="language-xml">  age:19</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">func1(person,&#x27;sex&#x27;)</span></span><br><span class="line"><span class="language-xml">// error</span></span><br></pre></td></tr></table></figure>

<h3 id="索引访问操作符"><a href="#索引访问操作符" class="headerlink" title="索引访问操作符[]"></a>索引访问操作符[]</h3><p>我们如何才能访问接口中某个属性的类型呢，使用[]即可</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyStringType</span> = <span class="title class_">MyInterface</span>[<span class="string">&#x27;name&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="映射类型"><a href="#映射类型" class="headerlink" title="映射类型"></a>映射类型</h3><p>TypeScript内置了几种映射类型，映射类型可以简单的认为是对接口的属性进行遍历操作。</p>
<ul>
<li>Readonly 只读</li>
<li>Partial 可选</li>
<li>Pick 选出接口中指定属性的类型</li>
<li>Record 用于描述接口属性类型以及属性值类型，返回一个新的接口</li>
</ul>
<p>假设我们有一个接口，我们需要为接口所有属性添加readonly描述。</p>
<p>我们可以手动添加readonly关键字</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可以使用<strong>Readonly</strong>映射类型</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> readonlyMyInterFace = <span class="title class_">Readonly</span>&lt;<span class="title class_">MyInterface</span>&gt;</span><br></pre></td></tr></table></figure>

<p>同理，需要将所有属性转换为可选属性，使用<strong>Partial</strong>。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialMyInterFace</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">MyInterface</span>&gt;</span><br></pre></td></tr></table></figure>

<p>假设，我们需要一个类型是某个接口精简过的，我们可使用<strong>Pick</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">  <span class="attr">address</span>:<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PickInterFace</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">MyInterface</span>, <span class="string">&#x27;name&#x27;</span>|<span class="string">&#x27;age&#x27;</span>&gt;</span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//   name:string</span></span><br><span class="line"><span class="comment">//   age:number</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<p>假设我们需要定义一组animals数据，用一个对象承载，对象属性名为动物的种类，对象属性值为动物的名字和属性。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> animals = &#123;</span><br><span class="line">  <span class="attr">dog</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;jack&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">cat</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;tom&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">20</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mouse</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;jerry&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">15</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以用<strong>Record</strong>快速的定义类型。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Animals</span> = <span class="title class_">Record</span>&lt;<span class="string">&#x27;dog&#x27;</span>|<span class="string">&#x27;cat&#x27;</span>|<span class="string">&#x27;mouse&#x27;</span>, <span class="title class_">Animal</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">animals</span>:<span class="title class_">Animals</span> = &#123;</span><br><span class="line">  <span class="attr">dog</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;jack&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">cat</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;tom&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">20</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mouse</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;jerry&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">15</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="增加或删除属性修饰符"><a href="#增加或删除属性修饰符" class="headerlink" title="增加或删除属性修饰符"></a>增加或删除属性修饰符</h3><p>可在类型修饰符前面使用+或者-号</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> readOnly&lt;T&gt; = &#123;</span><br><span class="line">  +<span class="keyword">readonly</span> [ p <span class="keyword">in</span> keyof T ] : T[p]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> unReadOnly&lt;T&gt; = &#123;</span><br><span class="line">  -<span class="keyword">readonly</span> [ p <span class="keyword">in</span> keyof T ] : T[p]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="unknown"><a href="#unknown" class="headerlink" title="unknown"></a>unknown</h3><ul>
<li>任何类型的值都可赋值给unknown</li>
<li>如果没有类型断言，unknown不可赋值给其他类型（除了any和unknown）</li>
<li>与其他类型组合的交叉类型，都等于其他类型</li>
<li>与其他类型组合（除了any）的联合类型，都为unknown</li>
<li>never是unknown的子类型</li>
</ul>
<h3 id="infer"><a href="#infer" class="headerlink" title="infer"></a>infer</h3><p>表示等待推断的类型</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> inferType&lt;T&gt; = T <span class="keyword">extends</span> <span class="title class_">Array</span>&lt;infer U&gt; ? U : <span class="built_in">never</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> type1 = inferType&lt;<span class="built_in">string</span>&gt;</span><br><span class="line"><span class="comment">// never</span></span><br><span class="line"><span class="keyword">type</span> type2 = inferType&lt;<span class="built_in">string</span>[]&gt;</span><br><span class="line"><span class="comment">// string</span></span><br><span class="line"><span class="keyword">type</span> type3 = unType&lt;[<span class="built_in">string</span>,<span class="built_in">number</span>]&gt;</span><br><span class="line"><span class="comment">// string | number</span></span><br></pre></td></tr></table></figure>

<h3 id="Exclude"><a href="#Exclude" class="headerlink" title="Exclude"></a>Exclude</h3><p>接收两个类型参数，返回类型参数一中<strong>不兼容</strong>类型参数二的类型</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="keyword">type</span> = <span class="title class_">Exclude</span>&lt;<span class="built_in">number</span>|<span class="built_in">string</span>|<span class="built_in">boolean</span>, <span class="built_in">string</span>|<span class="built_in">number</span>&gt;</span><br><span class="line"><span class="comment">// boolean</span></span><br></pre></td></tr></table></figure>

<h3 id="Extract"><a href="#Extract" class="headerlink" title="Extract"></a>Extract</h3><p>接收两个类型参数，返回类型参数一中<strong>兼容</strong>类型参数二的类型</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="keyword">type</span> = <span class="title class_">Extract</span>&lt;<span class="built_in">number</span>|<span class="built_in">string</span>|<span class="built_in">boolean</span>, <span class="built_in">string</span>|<span class="built_in">number</span>&gt;</span><br><span class="line"><span class="comment">// number | string</span></span><br></pre></td></tr></table></figure>

<h3 id="NonNullable"><a href="#NonNullable" class="headerlink" title="NonNullable"></a>NonNullable</h3><p>找出参数类型中所有不为undefined, null, never类型。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="keyword">type</span> = <span class="title class_">NonNullable</span>&lt;<span class="built_in">number</span>|<span class="built_in">string</span>&gt;</span><br><span class="line"><span class="comment">// number|string</span></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">type</span> = <span class="title class_">NonNullable</span>&lt;<span class="built_in">string</span>|<span class="built_in">never</span>&gt;</span><br><span class="line"><span class="comment">// string</span></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">type</span> = <span class="title class_">NonNullable</span>&lt;<span class="built_in">number</span>|<span class="built_in">string</span>|<span class="literal">undefined</span>&gt;</span><br><span class="line"><span class="comment">// number|string</span></span><br></pre></td></tr></table></figure>

<h3 id="ReturnType"><a href="#ReturnType" class="headerlink" title="ReturnType"></a>ReturnType</h3><p>返回函数类型的返回值类型</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> fnType = <span class="function">()=&gt;</span><span class="built_in">string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> returnType = <span class="title class_">ReturnType</span>&lt;fnType&gt;</span><br><span class="line"><span class="comment">// string</span></span><br></pre></td></tr></table></figure>

<h2 id="八、类型断言"><a href="#八、类型断言" class="headerlink" title="八、类型断言"></a>八、类型断言</h2><p>通常发生在你明白一个类型有比它现有类型更加确切的类型，这时候可以使用类型断言。</p>
<p>有两种写法：</p>
<p><strong>尖括号</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">someValue</span>: <span class="built_in">any</span> = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">strLength</span>: <span class="built_in">number</span> = (&lt;<span class="built_in">string</span>&gt;someValue).<span class="property">length</span>;</span><br></pre></td></tr></table></figure>

<p><strong>as</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">someValue</span>: <span class="built_in">any</span> = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">strLength</span>: <span class="built_in">number</span> = (someValue <span class="keyword">as</span> <span class="built_in">string</span>).<span class="property">length</span>;</span><br></pre></td></tr></table></figure>

<p>注意， 在<strong>jsx</strong>中，只可以使用as对类型进行断言</p>
<h2 id="九、TS中的类"><a href="#九、TS中的类" class="headerlink" title="九、TS中的类"></a>九、TS中的类</h2><p>与ES6的类大抵相似，稍微有些不同。</p>
<p>假设我们在ES6声明一个person类。</p>
<p><strong>ES6</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name,age</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sayName</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>TypeScript</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name:<span class="built_in">string</span>,age:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sayName</span>():<span class="built_in">void</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TS与ES6不同的是：</p>
<ul>
<li>使用到的类属性，需要事先定义。</li>
<li>类属性必须在<strong>constructor</strong>中赋值， 否则得事先声明默认值</li>
</ul>
<h3 id="访问修饰符"><a href="#访问修饰符" class="headerlink" title="访问修饰符"></a>访问修饰符</h3><p>可以在类成员前通过添加关键字来设置当前类成员的访问权限</p>
<p>修饰符有三种：</p>
<ul>
<li>public 公开的，默认</li>
<li>privcate 私有的，只能在当前类中访问</li>
<li>protected 受保护的，只能在当前类中或者子类中访问</li>
</ul>
<p><strong>public</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认即为public， 加与不加效果一致</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name:<span class="built_in">string</span>,age:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sayName</span>():<span class="built_in">void</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;jelly&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>)</span><br><span class="line"><span class="comment">// allen</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">age</span>)</span><br><span class="line"><span class="comment">// 18</span></span><br></pre></td></tr></table></figure>

<p><strong>private</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// private能且只能在当前类中访问</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name:<span class="built_in">string</span>,age:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">sayName</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sayName</span>():<span class="built_in">void</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">   <span class="comment">// private可以在当前类中访问</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;jelly&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>)</span><br><span class="line"><span class="comment">// error</span></span><br></pre></td></tr></table></figure>

<p><strong>protected</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// protected能在当前类或者子类中进行访问</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name:<span class="built_in">string</span>,age:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> <span class="title function_">sayName</span>():<span class="built_in">void</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">  <span class="title function_">sayFatherName</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">sayName</span>()</span><br><span class="line">    <span class="comment">// protected 的成员属性可在子类中访问</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="参数属性"><a href="#参数属性" class="headerlink" title="参数属性"></a>参数属性</h3><p>前面的例子， 我们在使用类的属性的时候，必须事先在类里面声明。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TS提供了一种能让我们更加快速定义类的方式， 即 <strong>参数属性</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只需要在构造函数参数前面加上访问修饰符， 即可视为声明了相应类的属性</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> name:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="类的只读属性"><a href="#类的只读属性" class="headerlink" title="类的只读属性"></a>类的只读属性</h3><p>我们可以声明某个类属性为只读属性，使用<strong>readonly</strong>关键字，只读具有只可访问，不可修改的特点。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Sex</span> &#123;</span><br><span class="line">  male = <span class="number">0</span>,</span><br><span class="line">  female = <span class="number">1</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> name:<span class="built_in">string</span>, <span class="keyword">public</span> <span class="keyword">readonly</span> sex:Sex</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sex</span> = sex</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;GD&#x27;</span>, <span class="title class_">Sex</span>.<span class="property">male</span>)</span><br><span class="line"></span><br><span class="line">person.<span class="property">name</span> = <span class="string">&#x27;jelly&#x27;</span></span><br><span class="line"></span><br><span class="line">person.<span class="property">sex</span> = <span class="title class_">Sex</span>.<span class="property">female</span></span><br><span class="line"><span class="comment">// error sex is a read-only property</span></span><br></pre></td></tr></table></figure>

<h3 id="类属性存取器"><a href="#类属性存取器" class="headerlink" title="类属性存取器"></a>类属性存取器</h3><p>我们可以显性的为类的属性添加get和set方法，当用户访问实例属性的时候，会调用get方法，当用户设置实例属性的时候，会调用set方法。</p>
<p>假设我们有一个场景，我们需要在设置属性之前检查一下属性的合法性。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">_name</span>:<span class="built_in">string</span> = <span class="string">&#x27;default&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">name</span>():<span class="built_in">string</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">name:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="title function_">validate</span>(name)) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;名字长度不合法&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// 我们检查了参数的合法性</span></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">validate</span>(<span class="params">name:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(name.<span class="property">length</span> &gt; <span class="number">5</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;jelly&#x27;</span>)</span><br><span class="line"></span><br><span class="line">person.<span class="property">name</span> = <span class="string">&#x27;jellyGD&#x27;</span></span><br><span class="line"><span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">_name</span>)</span><br><span class="line"><span class="comment">// error</span></span><br></pre></td></tr></table></figure>

<p>当某一个类属性具有存取器时， 这个类属性的访问修饰符最好设置为private，不允许外部直接访问属性。而是必须通过get和set进行访问</p>
<h2 id="十、接口"><a href="#十、接口" class="headerlink" title="十、接口"></a>十、接口</h2><p><strong>interface</strong>，是对格式的一种规范，接口不会去检查属性的顺序，<strong>只会检查属性是否存在以及属性的类型</strong></p>
<p><strong>接口也是一种类型</strong></p>
<h3 id="第一个例子"><a href="#第一个例子" class="headerlink" title="第一个例子"></a>第一个例子</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> boy&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">money</span>:<span class="built_in">number</span>,</span><br><span class="line">  <span class="attr">success</span>:<span class="function">(<span class="params">data:<span class="built_in">Object</span></span>)=&gt;</span><span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">change</span>(<span class="params">option:boy</span>):<span class="built_in">void</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">change</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;jelly&#x27;</span>,</span><br><span class="line">  <span class="attr">money</span>:<span class="number">100</span>,</span><br><span class="line">  <span class="attr">success</span>:<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>我们定义了一个change函数，change函数的接收的参数option必须是boy接口类型。</p>
<h3 id="可选属性"><a href="#可选属性" class="headerlink" title="可选属性"></a>可选属性</h3><p><strong>?表示可选属性</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> boy &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="built_in">string</span>;	<span class="comment">//一个boy，可以没钱，但是必须要有自己的名字</span></span><br><span class="line">	money?:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>？如果我们把参数名字拼错，TS还会帮我们检查其参数名错误</strong></p>
<h3 id="接口的只读属性"><a href="#接口的只读属性" class="headerlink" title="接口的只读属性"></a>接口的只读属性</h3><p>readonly 只读属性，只可以在声明的时候赋值</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> boy &#123;</span><br><span class="line">	<span class="keyword">readonly</span> <span class="attr">sex</span>:<span class="built_in">string</span>;	<span class="comment">//一个boy，一出生就定好性别，不可以改变</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>数组也可以作为一个只读的数组，ReadonlyArray<T></strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>:<span class="built_in">number</span>[] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">ro</span>:<span class="title class_">ReadonlyArray</span>&lt;<span class="built_in">number</span>&gt; = a	<span class="comment">//这样a数组就不可以被修改了</span></span><br></pre></td></tr></table></figure>

<p><strong>接口同时也可帮助我们限制对象某些属性为只读属性</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> boy &#123;</span><br><span class="line">	<span class="keyword">readonly</span> <span class="attr">sex</span>:<span class="built_in">string</span>;	<span class="comment">//一个boy，一出生就定好性别，不可以改变</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">b</span>:boy = &#123; <span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line">b.<span class="property">sex</span> = <span class="string">&#x27;女&#x27;</span></span><br><span class="line"><span class="comment">// error</span></span><br></pre></td></tr></table></figure>

<h3 id="可索引的类型"><a href="#可索引的类型" class="headerlink" title="可索引的类型"></a>可索引的类型</h3><p>对索引类型得到值的类型进行定义</p>
<p><strong>值得注意的是，设置number索引的时候，ts会将其转换成对应的字符串形式进行索引。</strong></p>
<p>**所以，你 数字 1 索引的结果应当和字符串 ‘1’ 索引的结果一致 **</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Boy</span> &#123;</span><br><span class="line">  [<span class="attr">props</span>:<span class="built_in">string</span>]:<span class="built_in">string</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 我们声明string类型的索引，得到的属性值一定是string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b</span>:<span class="title class_">Boy</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;jelly&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="number">19</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line"><span class="comment">// 因为我们规定string类型的索引返回值一定是string类型，我们如上定义的b[&#x27;age&#x27;]的值确为number</span></span><br></pre></td></tr></table></figure>

<p>我们常用<strong>可索引的类型</strong>这个特性，来帮助我们规定除接口<strong>定义以外的属性的类型</strong>。</p>
<p>比如说我们现在有个接口Boy，规范了b这个对象的类型</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Boy</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b</span>:<span class="title class_">Boy</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;jelly&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在我们需要在b身上添加属性</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b.<span class="property">hobby</span> = <span class="string">&#x27;game&#x27;</span></span><br><span class="line"><span class="comment">// error， 因为Boy这个接口未定义hobby</span></span><br></pre></td></tr></table></figure>

<p>但其实我们并不希望这个Boy接口去约束hobby，Boy只约束他事先声明的属性，我们可以</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Boy</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span>,</span><br><span class="line">  [<span class="attr">props</span>:<span class="built_in">string</span>]:<span class="built_in">any</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>规定了字符串类型的索引得到的属性类型为 <strong>any</strong></p>
<p>这样我们就可以在boy身上任意设置除了name, age以外的属性。</p>
<h3 id="函数类型接口"><a href="#函数类型接口" class="headerlink" title="函数类型接口"></a>函数类型接口</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> myFn &#123;</span><br><span class="line">	(<span class="attr">name</span>:<span class="built_in">string</span>,<span class="attr">age</span>:<span class="built_in">number</span>,<span class="attr">isBoy</span>:<span class="built_in">boolean</span>):<span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> logInfo : myFn</span><br><span class="line"></span><br><span class="line">logInfo = <span class="keyword">function</span>(<span class="params">name:<span class="built_in">string</span>,age:<span class="built_in">number</span>,isBoy:<span class="built_in">boolean</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`my name is <span class="subst">$&#123;name&#125;</span>,im a <span class="subst">$&#123;isBoy?<span class="string">&#x27;boy&#x27;</span>:<span class="string">&#x27;gril&#x27;</span>&#125;</span>,i&#x27;m <span class="subst">$&#123;age&#125;</span> year&#x27;s old`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="类类型接口"><a href="#类类型接口" class="headerlink" title="类类型接口"></a>类类型接口</h3><p>我们可以定义一个接口来规定类的属性以及类的方法。</p>
<p>使用 <strong>implements</strong> 关键性声明类所实现的接口。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> person &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span>,</span><br><span class="line">  <span class="attr">eat</span>:<span class="function">()=&gt;</span><span class="built_in">void</span>,</span><br><span class="line">  [<span class="attr">props</span>:<span class="built_in">string</span>]:<span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> person &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">  <span class="attr">sex</span>:<span class="built_in">number</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name:<span class="built_in">string</span>, age:<span class="built_in">number</span>, sex:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span>= age</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sex</span> = sex</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">eat</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="接口继承"><a href="#接口继承" class="headerlink" title="接口继承"></a>接口继承</h3><p>接口继承接口， 子接口拥有父接口的所有特性。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> twoPoint &#123;</span><br><span class="line">  <span class="attr">x</span>:<span class="built_in">number</span>,</span><br><span class="line">  <span class="attr">y</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> threePoint <span class="keyword">extends</span> twoPoint &#123;</span><br><span class="line">  <span class="attr">z</span>:<span class="built_in">number</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">p</span>:threePoint = &#123;</span><br><span class="line">  <span class="attr">x</span>:<span class="number">1</span>,</span><br><span class="line">  <span class="attr">y</span>:<span class="number">1</span>,</span><br><span class="line">  <span class="attr">z</span>:<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>接口可实现多继承</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> twoPoint &#123;</span><br><span class="line">  <span class="attr">x</span>:<span class="built_in">number</span>,</span><br><span class="line">  <span class="attr">y</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> pointInfo &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> threePoint <span class="keyword">extends</span> twoPoint, pointInfo &#123;</span><br><span class="line">  <span class="attr">z</span>:<span class="built_in">number</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">p</span>:threePoint = &#123;</span><br><span class="line">  <span class="attr">x</span>:<span class="number">1</span>,</span><br><span class="line">  <span class="attr">y</span>:<span class="number">1</span>,</span><br><span class="line">  <span class="attr">z</span>:<span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;点点&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>无法随意重写父接口的类型声明</strong></p>
<h2 id="十一、泛型"><a href="#十一、泛型" class="headerlink" title="十一、泛型"></a>十一、泛型</h2><p>有时候我们使用TS能够十分好的去控制我们想要得到的结果，但是有时候我们希望我们的做的API能够拥有良好的可重用性，不仅支持我们预期的类型， 还支持一些未知的类型，这种类型我们称之为泛型。</p>
<h3 id="类型变量"><a href="#类型变量" class="headerlink" title="类型变量"></a>类型变量</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例子中，我们定义了我们接收的arg参数，它的类型是变量T（当然我们需要事先使用&lt;&gt;声明这个变量）。</p>
<p>有了这个变量，例子中我们做到了输入的类型和输出的类型始终保持一致。</p>
<p>以上的例子中的identity函数，我们称其为<strong>泛型函数</strong></p>
<p>与any不同的是，any是<strong>不可控</strong>的。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">identity</span>(<span class="params">arg: <span class="built_in">any</span></span>): <span class="built_in">any</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在未使用类型变量时，我们<strong>无法确保</strong>参数类型和返回值类型始终保持一致。</p>
<p><strong>类型变量其实是函数的第二种参数</strong></p>
<p>我们可知，函数可以接收参数，声明于括号里面<strong>（）</strong></p>
<p>类型参数是函数的第二种参数，声明于 <strong>&lt;&gt;</strong> 里面</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> fn&lt;T&gt;(<span class="attr">arg</span>: <span class="title class_">Array</span>&lt;T&gt;): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">length</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn&lt;<span class="built_in">string</span>&gt;([<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>])</span><br></pre></td></tr></table></figure>

<p>例子中，我们声明了一个函数fn，函数fn接收一个数组参数， 数组元素类型为T，而具体T是什么类型是由调用者传递。</p>
<p><strong>调用泛型函数时也可以不传递类型参数</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> fn&lt;T&gt;(<span class="attr">arg</span>: <span class="title class_">Array</span>&lt;T&gt;): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">length</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fn</span>([<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>])</span><br></pre></td></tr></table></figure>

<p>例子中，我们没有传递类型参数，TS会自动帮助我们推断T我们传递的类型参数是string</p>
<h2 id="十二、声明合并"><a href="#十二、声明合并" class="headerlink" title="十二、声明合并"></a>十二、声明合并</h2><h3 id="接口合并"><a href="#接口合并" class="headerlink" title="接口合并"></a>接口合并</h3><ul>
<li>从根本上说，合并的机制是把双方的成员放到一个同名的接口里。</li>
<li>接口的非函数的成员应该是唯一的。如果它们不是唯一的，那么它们必须是相同的类型。</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Box</span> &#123;</span><br><span class="line">  <span class="attr">width</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">height</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="title function_">transform</span>(<span class="attr">force</span>: <span class="built_in">string</span>): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Box</span> &#123;</span><br><span class="line">  <span class="comment">// width: string; // 后续属性声明必须属于同一类型。</span></span><br><span class="line">  <span class="title function_">transform</span>(<span class="attr">force</span>: <span class="built_in">number</span>, <span class="attr">radius</span>: <span class="built_in">number</span>): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">box</span>: <span class="title class_">Box</span> = (&#123;</span><br><span class="line">  <span class="attr">width</span>: <span class="number">400</span>,</span><br><span class="line">  <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">  <span class="title function_">transform</span>(<span class="params">force: <span class="built_in">number</span>, radius: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">&#125;)  <span class="keyword">as</span> <span class="title class_">Box</span></span><br></pre></td></tr></table></figure>

<p>命名空间的合并</p>
<ul>
<li>对于命名空间的合并，模块导出的同名接口进行合并，构成单一命名空间内含合并后的接口。</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Human</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Man</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property">Human</span>); </span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * Person &#123;</span></span><br><span class="line"><span class="comment"> *  Human() &#123;&#125;,</span></span><br><span class="line"><span class="comment"> *  Man() &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ul>
<li>接口合并&amp;命名空间合并，其实就是往自己内部添加；</li>
<li>类，函数与命名空间合并，其实就是往函数体上增加属性；</li>
<li>枚举与命名空间合并，就是往枚举对象内部添加命名空间导出的属性；</li>
</ul>
<h2 id="十三、类型兼容性"><a href="#十三、类型兼容性" class="headerlink" title="十三、类型兼容性"></a>十三、类型兼容性</h2><p>在TypeScript中类型存在包含关系，当变量类型兼容时可以正常赋值。</p>
<h3 id="接口兼容性"><a href="#接口兼容性" class="headerlink" title="接口兼容性"></a>接口兼容性</h3><p>先来个错误的例子🎃</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> infoInterFace&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>:infoInterFace = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;jelly&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">    <span class="comment">// error infoInterFace不存在age属性的类型定义</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改成这样写编译竟然能通过</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> infoInterFace&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>:infoInterFace</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;jelly&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj3</span>:<span class="built_in">any</span> = <span class="string">&#x27;string&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj4 = &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj = obj2</span><br><span class="line"><span class="comment">// success</span></span><br><span class="line">obj = obj3</span><br><span class="line"><span class="comment">// success</span></span><br><span class="line">obj = obj4</span><br><span class="line"><span class="comment">// error</span></span><br></pre></td></tr></table></figure>

<ul>
<li>TypeScript对变量字面量赋值时候进行了严格的类型检查</li>
<li>对变量赋值给变量时，等号右边的类型必须<strong>大于或等于</strong>左边的类型， 小于则会不兼容。</li>
</ul>
<h3 id="函数兼容性"><a href="#函数兼容性" class="headerlink" title="函数兼容性"></a>函数兼容性</h3><p><strong>参数个数兼容性</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">func1</span> = (<span class="params">name:<span class="built_in">string</span></span>) =&gt; <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">func2</span> = (<span class="params">name:<span class="built_in">string</span>, age:<span class="built_in">number</span></span>) =&gt; <span class="number">0</span></span><br><span class="line"></span><br><span class="line">func1 = func2</span><br><span class="line"><span class="comment">// success</span></span><br><span class="line"></span><br><span class="line">func2 = func1</span><br><span class="line"><span class="comment">// error</span></span><br></pre></td></tr></table></figure>

<ul>
<li>函数参数个数必须小于或者等于函数类型定义的参数个数</li>
</ul>
<p><strong>参数类型兼容性</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">func1</span> = (<span class="params">age:<span class="built_in">string</span></span>) =&gt; <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">func2</span> = (<span class="params">age:<span class="built_in">number</span></span>) =&gt; <span class="number">0</span></span><br><span class="line"></span><br><span class="line">func1 = func2 </span><br><span class="line"><span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">func3</span> = (<span class="params">opt:&#123; age:<span class="built_in">number</span>, name:<span class="built_in">string</span> &#125;</span>) =&gt; <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">func4</span> = (<span class="params">opt:&#123; age:<span class="built_in">number</span> &#125;</span>) =&gt; <span class="number">0</span></span><br><span class="line"></span><br><span class="line">func4 = func3</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">func3 = func4</span><br><span class="line"><span class="comment">// success</span></span><br></pre></td></tr></table></figure>

<ul>
<li>函数参数类型必须小于或者等于函数定义的参数类型。</li>
<li>函数参数具有逆变兼容，返回值具有协变兼容</li>
</ul>
<h2 id="十四、声明文件"><a href="#十四、声明文件" class="headerlink" title="十四、声明文件"></a>十四、声明文件</h2><p>当我们使用第三方库的时候，我们需要引用他的声明文件，才能获得对应的代码补全，接口提示等功能。</p>
<p>一个 ***.d.ts** 文件为一个声明文件。</p>
<h3 id="第三方文件声明"><a href="#第三方文件声明" class="headerlink" title="第三方文件声明"></a>第三方文件声明</h3><p>一些著名的库一般都已经有了对应的声明文件。</p>
<p>我们可以直接下载下来使用，但是更推荐的是使用 @types 统一管理第三方库的声明文件。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Cookie与Session"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/01/29/Cookie%E4%B8%8ESession/"
    >Cookie与Session</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/01/29/Cookie%E4%B8%8ESession/" class="article-date">
  <time datetime="2023-01-29T13:34:25.000Z" itemprop="datePublished">2023-01-29</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>基础概念<br>cookie<br>cookie，翻译过来就是 饼干&#x2F;小甜点 的意思，cookie一种在浏览器用于存储来自不同域的信息，cookie由键值对的形式存储，能够永久存储于浏览器的一种数据形式，因为cookie是存储于浏览器（客户端）的，所以浏览器对cookie做了一些限制确保cookie不会被恶意使用，同时又不会占据太多空间，所以每个域能够在客户端存储的cookie是有限的。<br>文中提到的session和token都是以cookie的形式存储在客户端的浏览器的。<br>session<br>session，会话，用于标记每个不同客户端。<br>首先我们要知道HTTP是一种无状态的协议，这也就意味着，每次客户端访问服务器，服务器收到的都是一个全新的请求，不知道谁是谁，等于说一次访问前后就失去了关联。<br>张三（客户端）：你好，我是张三。					&#x2F;&#x2F;客户端登录<br>李四（服务端）：好的，张三，我知道你，你是我们这儿的会员，请问你需要什么帮助？&#x2F;&#x2F;服务端验证通过<br>张三（客户端）：我想要查询我的个人信息。		&#x2F;&#x2F;客户端操作（新的请求）<br>李四（服务端）：你是谁？你还没告诉我？		&#x2F;&#x2F;服务端提示未登录<br>。。。<br>session的出现，解决了HTTP无状态带来的问题，客户端舒服了，但是服务器就惨了，具体由session引发的问题在下面发展史会讲。</p>
<p>token<br>token的出现，是为了解决由于session带来的问题，一种升级版的HTTP无状态问题解决方案。<br>首先token是一串通过HMAC-SHA256算法加密过的字符串<br>一次完整的token验证流程为：</p>
<ol>
<li>客户端首次发起请求，带上自己的独有信息（例如浏览器信息，ip地址，用户名等等）</li>
<li>服务端接收到请求，将客户端的带来的信息，和自己一串私有的密钥，通过HMAC-SHA256算法加密生成一串token字符串，响应的时候讲这串token字符串返回，自己不存储这串token。</li>
<li>客户端将token保存在自己的本地，再次发起请求的时候带上这串token。</li>
<li>服务端将客户端带来的独有信息，通过和自己私有的密钥，通过HMAC-SHA256算法加密生成一串token字符串，再将这串新生成的token和客户端带来的token进行比较，如果一致，则访问通过。</li>
</ol>
<p>发展史<br>早期的上网模式，浏览器访问某个网站都是文档形式浏览，服务端仅仅是将客户端请求的东西返回回去，不需要记录谁再某一段时间内浏览了什么内容，所以每次HTTP请求都是一次全新的请求，服务端也不用管对方是谁，你要啥我给你啥就完事了。<br>随着web的发展，像购物网站，论坛等的发展，最简单的，只要是需要登录的网站，服务器必须管理会话，必须知道谁是谁，而不是你要啥我就给你啥，这时候session出现了。<br>你访问我，我给你一串session id，我自己备份一个，你下次过来，我对比下我自己记录的session id，我就可以知道你是谁了。<br>随机带来的问题也很严重：</p>
<ol>
<li>内存开销：因为往往一个网站是有成千上万的人同时来访问，如果每个人我都要存一份session id在我这，那么对于我的服务器的存储是一个巨大的开销。</li>
<li>拓展限制：服务器A想拓展自己的服务器，多开一个服务器B来做负载均衡，那就是一个棘手的问题：<br>  a. 例如客户端小a访问服务器A，服务器A给了小a一份session id，自己存一份，小a又来发请求，但是这次请求被转发到了服务器B，服务器B并没有存储小a的session id，那么小a这时候又得重新验证。<br>  b. 如果每次服务器创建一个新的session id，就往自己其他的服务器复制粘贴一份，开销代价就会升高。<br>  c. 如果统一集中将session id都存在一个服务器，其他的服务器都来这里做验证，万一这个session服务器挂了，那么全部都挂了。</li>
<li>安全问题：客户端session id一旦泄露，他人便可带着这个session id来访问我的服务器，我服务器经过验证这个session id是可以通过的（之前存储过），那么便会造成了其他人冒名顶替的问题，这里有个专业名词叫CSRF(跨站请求伪造)<br>于是乎token横空出世，我服务器不保存这个可恶的session id，我给你个token，你下次来访问我带上token，我临时再赶紧算一下这个token对不对，对就让你过了，所以事情目前也就得到了解决方案。<br>小结<br>token的出现解决的大头问题的服务器端的压力，但是本质上换汤不换药（个人理解），新的验证形式罢了。</li>
</ol>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-HTTP"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/01/29/HTTP/"
    >HTTP</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/01/29/HTTP/" class="article-date">
  <time datetime="2023-01-29T13:30:16.000Z" itemprop="datePublished">2023-01-29</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="一、HyperText-Transfer-Protocol"><a href="#一、HyperText-Transfer-Protocol" class="headerlink" title="一、HyperText Transfer Protocol"></a>一、HyperText Transfer Protocol</h1><p>超文本传输协议</p>
<h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><p>为了实现相同的目标，约束多方参与人的行为。</p>
<p>即你想参与进某一件事，那么就得遵守这件事所定下的标准，才能流畅和第三方合作。</p>
<p>http本身就是一份协议，是交流通信的规范，以及各种控制和错误的处理方式。</p>
<h2 id="传输"><a href="#传输" class="headerlink" title="传输"></a>传输</h2><p>传输是个动词，表示把某些数据从A搬运到B，A为请求方，B为应答方，一应一答，就实现了数据了搬运。<br>所以 <strong>传输</strong> 表示http是用于描述两点之间传输数据的协议</p>
<h2 id="超文本"><a href="#超文本" class="headerlink" title="超文本"></a>超文本</h2><p>表示http传输的不是普通的文本，而是文字、图片、音频和视频等的混合体</p>
<p>总结下来就是：</p>
<p><strong>HTTP 是一个在计算机世界里专门在两点之间传输文字、图片、音频、视频等超文本数据的约定和规范。</strong></p>
<h1 id="二、TCP-x2F-IP网络分层模型"><a href="#二、TCP-x2F-IP网络分层模型" class="headerlink" title="二、TCP&#x2F;IP网络分层模型"></a>二、TCP&#x2F;IP网络分层模型</h1><p><strong>分层图例</strong></p>
<p><img src="https://pic.imgdb.cn/item/63d674fdface21e9ef17b2d1.png"></p>
<p>TCP&#x2F;IP网络分层就是我们常说的四层协议，模型是一个自下而上的模型，每层协议都依托下层协议的支持。</p>
<h2 id="link-链接层"><a href="#link-链接层" class="headerlink" title="link 链接层"></a>link 链接层</h2><p>底层网络协议，工作在网卡层级，传输原始数据包，使用MAC地址来标记。</p>
<h2 id="internet-网际层"><a href="#internet-网际层" class="headerlink" title="internet 网际层"></a>internet 网际层</h2><p>又叫“网络互连层”，IP协议所在的分层，描述了如何将各个小型的本地网络，串联起来。用IP地址取代MAC地址，在需要寻找某一个具体设备时，在通过IP地址转换成MAC地址。</p>
<h2 id="transport-传输层"><a href="#transport-传输层" class="headerlink" title="transport 传输层"></a>transport 传输层</h2><p>描述两个IP地址之间如何进行传输，TCP&#x2F;UDP工作在这层。</p>
<p>TCP 是一个有状态的协议，需要先与对方建立连接然后才能发送数据，而且保证数据不丢失不重复。</p>
<p>而 UDP 则比较简单，它无状态，不用事先建立连接就可以任意发送数据，但不保证数据一定会发到对方。两个协议的另一个重要区别在于数据的形式。</p>
<p>TCP 的数据是连续的“字节流”，有先后顺序，而 UDP 则是分散的小数据包，是顺序发，乱序收。</p>
<h2 id="application-应用层"><a href="#application-应用层" class="headerlink" title="application 应用层"></a>application 应用层</h2><p>SSH、FTP、SMTP 、HTTP等</p>
<p>MAC 层的传输单位是帧（frame），IP 层的传输单位是包（packet），TCP 层的传输单位是段（segment），HTTP 的传输单位则是消息或报文（message）。但这些名词并没有什么本质的区分，可以统称为数据包。</p>
<h1 id="三、OSI网络分层模型"><a href="#三、OSI网络分层模型" class="headerlink" title="三、OSI网络分层模型"></a>三、OSI网络分层模型</h1><p>即为七层协议<strong>，OSI，全称是“开放式系统互联通信参考模型”</strong></p>
<p><img src="https://pic.imgdb.cn/item/63d6750bface21e9ef17d180.png"></p>
<p>OSI也是一个自底向上的协议栈</p>
<ol>
<li>第一层：物理层，网络的物理形式，例如电缆、光纤、网卡、集线器等等；</li>
<li>第二层：数据链路层，它基本相当于 TCP&#x2F;IP 的链接层；</li>
<li>第三层：网络层，相当于 TCP&#x2F;IP 里的网际层；</li>
<li>第四层：传输层，相当于 TCP&#x2F;IP 里的传输层；</li>
<li>第五层：会话层，维护网络中的连接状态，即保持会话和同步；</li>
<li>第六层：表示层，把数据转换为合适、可理解的语法和语义；</li>
<li>第七层：应用层，面向具体的应用传输数据。</li>
</ol>
<p>OSI更多是一个理论层面的模型，实际现实中跑的更多还是TCP&#x2F;IP模型。</p>
<h1 id="四、TCP-x2F-IP协议栈工作方式"><a href="#四、TCP-x2F-IP协议栈工作方式" class="headerlink" title="四、TCP&#x2F;IP协议栈工作方式"></a>四、TCP&#x2F;IP协议栈工作方式</h1><p><img src="https://pic.imgdb.cn/item/63d6751cface21e9ef17f0f4.png"></p>
<p>一些数据的发送，需要自顶向下层层封包，加上TCP头，IP头、MAC头，再经过链接层传输到远端，远端收到数据包以后，再自底向上层层解包，最终到达应用层。</p>
<p>层的传输过程对于上层是完全“透明”的，上层也不需要关心下层的具体实现细节，所以就 HTTP 层次来看，它不管下层是不是 TCP&#x2F;IP 协议，看到的只是一个可靠的传输链路，只要把数据加上自己的头，对方就能原样收到。</p>
<h1 id="五、域名"><a href="#五、域名" class="headerlink" title="五、域名"></a>五、域名</h1><p>我们都知道，访问一个服务，我们可以通过公网ip地址找到，但是ip地址是纯数字组成，难以记忆。所以就诞生了域名，域名是一串用“.”分隔的多个单词，最右边的被称为“顶级域名”，然后是“二级域名”，层级关系向左依次降低。</p>
<h2 id="DNS解析"><a href="#DNS解析" class="headerlink" title="DNS解析"></a>DNS解析</h2><p>就像 IP 地址必须转换成 MAC 地址才能访问主机一样，域名也必须要转换成 IP 地址，这个过程就是“<strong>域名解析”</strong>。</p>
<p>由左到右，挨个查询。</p>
<p>DNS 的核心系统是一个三层的树状、分布式服务，基本对应域名的结构：</p>
<ol>
<li>根域名服务器（Root DNS Server）：管理顶级域名服务器，返回“com”“net”“cn”等顶级域名服务器的 IP 地址；</li>
<li>顶级域名服务器（Top-level DNS Server）：管理各自域名下的权威域名服务器，比如 com 顶级域名服务器可以返回 apple.com 域名服务器的 IP 地址；</li>
<li>权威域名服务器（Authoritative DNS Server）：管理自己域名下主机的 IP 地址，比如 apple.com 权威域名服务器可以返回 IP 地址。</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/63d6752aface21e9ef180bfa.png"></p>
<h2 id="DNS缓存"><a href="#DNS缓存" class="headerlink" title="DNS缓存"></a>DNS缓存</h2><p>各大运营商，或者公司内网会自己搭建DNS服务器，作为用户DNS查询的代理，代替访问DNS核心系统。<br>一般来说，如果之前查询过的域名，则会缓存查询结果的IP地址，从而加快DNS解析的速度。</p>
<p>并且操作系统也会自己记录DNS解析的记录，并写入host文件，以后再访问这个域名，就可以直接拿到本地记录的IP地址了。</p>
<h1 id="六、报文结构"><a href="#六、报文结构" class="headerlink" title="六、报文结构"></a>六、报文结构</h1><p>HTTP报文是一个<strong>纯文本</strong>协议，所有头数据都是ASCII码文本。</p>
<p>HTTP报文分为<strong>请求报文</strong>和<strong>响应报文</strong>，首先两种报文的结构一致，只有在头上有所区别。</p>
<p>结构：</p>
<p><img src="https://pic.imgdb.cn/item/63d67535face21e9ef18241a.png"></p>
<ol>
<li>起始行：描述请求或响应的基本信息</li>
<li>头字段（头部）：使用key：value描述报文</li>
<li>消息正文（实体）：实际传输的数据，不一定是文本，也可以是二进制数据</li>
</ol>
<p><strong>请求行</strong></p>
<p>请求的起始行也叫请求行，由三部分构成：</p>
<p><img src="https://pic.imgdb.cn/item/63d67542face21e9ef18559c.png"></p>
<ol>
<li>请求方法：是一个动词，如 GET&#x2F;POST，表示对资源的操作；</li>
<li>请求目标：通常是一个 URI，标记了请求方法要操作的资源；</li>
<li>版本号：表示报文使用的 HTTP 协议版本。</li>
</ol>
<p><strong>状态行</strong></p>
<p>响应的起始行也叫状态行，由三部分构成：</p>
<p><img src="https://pic.imgdb.cn/item/63d6754dface21e9ef187117.png"></p>
<ol>
<li>版本号：表示报文使用的 HTTP 协议版本；</li>
<li>状态码：一个三位数，用代码的形式表示处理的结果，比如 200 是成功，500 是服务器错误；</li>
<li>原因：作为数字状态码补充，是更详细的解释文字，帮助人理解原因。</li>
</ol>
<p><strong>头字段</strong></p>
<p><img src="https://pic.imgdb.cn/item/63d6755dface21e9ef18992a.png"></p>
<p>头部字段是 key-value 的形式，key 和 value 之间用“:”分隔，最后用 CRLF 换行表示字段结束。</p>
<p>HTTP 协议规定了非常多的头部字段，实现各种各样的功能，但基本上可以分为四大类：</p>
<ol>
<li>通用字段：在请求头和响应头里都可以出现；</li>
<li>请求字段：仅能出现在请求头里，进一步说明请求信息或者额外的附加条件；</li>
<li>响应字段：仅能出现在响应头里，补充说明响应报文的信息；</li>
<li>实体字段：它实际上属于通用字段，但专门描述 body 的额外信息。</li>
</ol>
<h1 id="七、Method"><a href="#七、Method" class="headerlink" title="七、Method"></a>七、Method</h1><p>Method表示一次请求执行的具体动作，比如是获取，更改，还是删除等。</p>
<p>目前 HTTP&#x2F;1.1 规定了八种方法。</p>
<ol>
<li>GET：获取资源，可以理解为读取或者下载数据；</li>
<li>HEAD：获取资源的元信息；</li>
<li>POST：向资源提交数据，相当于写入或上传数据；</li>
<li>PUT：类似 POST；</li>
<li>DELETE：删除资源；</li>
<li>CONNECT：建立特殊的连接隧道；</li>
<li>OPTIONS：列出可对资源实行的方法；</li>
<li>TRACE：追踪请求 - 响应的传输路径。</li>
</ol>
<p><strong>GET&#x2F;HEAD</strong></p>
<p>HEAD 方法与 GET 方法类似，也是请求从服务器获取资源，服务器的处理机制也是一样的，但服务器不会返回请求的实体数据，只会传回响应头，也就是资源的 <strong>元信息</strong>。</p>
<p>HEAD 方法可以看做是 GET 方法的一个“简化版”或者“轻量版”。因为它的响应头与 GET 完全相同，所以可以用在很多并不真正需要资源的场合，避免传输 body 数据的浪费。</p>
<p><strong>PUT&#x2F;POST</strong></p>
<p>PUT 的作用与 POST 类似，也可以向服务器提交数据，但与 POST 存在微妙的不同，通常 POST 表示的是<strong>“新建”“create”</strong>的含义，而 PUT 则是<strong>“修改”“update”</strong>的含义。</p>
<p>在实际应用中，PUT 用到的比较少。而且，因为它与 POST 的语义、功能太过近似，有的服务器甚至就直接禁止使用 PUT 方法，只用 POST 方法上传数据。</p>
<h2 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h2><p>在 HTTP 协议里，<strong>“安全”</strong> 是指请求方法不会“破坏”服务器上的资源，即不会对服务器上的资源造成实质的修改。</p>
<p>按照这个定义，只有 GET 和 HEAD 方法是“安全”的，因为它们是“只读”操作，只要服务器不故意曲解请求方法的处理方式，无论 GET 和 HEAD 操作多少次，服务器上的数据都是“安全的”。</p>
<p>而 POST&#x2F;PUT&#x2F;DELETE 操作会修改服务器上的资源，增加或删除数据，所以是“不安全”的。</p>
<h2 id="幂等"><a href="#幂等" class="headerlink" title="幂等"></a>幂等</h2><p><strong>“幂等”</strong> 实际上是一个数学用语，被借用到了 HTTP 协议里，意思是多次执行相同的操作，结果也都是相同的，即多次“幂”后结果“相等”。</p>
<p>很显然，GET 和 HEAD 既是安全的也是幂等的，DELETE 可以多次删除同一个资源，效果都是“资源不存在”，所以也是幂等的。</p>
<p>按照 RFC 里的语义，POST 是“新增或提交数据”，多次提交数据会创建多个资源，所以不是幂等的；而 PUT 是“替换或更新数据”，多次更新一个资源，资源还是会第一次更新的状态，所以是幂等的。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-ES6后续语法"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/01/29/ES6%E5%90%8E%E7%BB%AD%E8%AF%AD%E6%B3%95/"
    >ES6后续语法</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/01/29/ES6%E5%90%8E%E7%BB%AD%E8%AF%AD%E6%B3%95/" class="article-date">
  <time datetime="2023-01-29T13:26:44.000Z" itemprop="datePublished">2023-01-29</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="一、变量："><a href="#一、变量：" class="headerlink" title="一、变量："></a>一、变量：</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//let声明变量：</span></span><br><span class="line"><span class="number">1.</span>变量不可重复声明，</span><br><span class="line"><span class="keyword">let</span> star = <span class="string">&#x27;jelly&#x27;</span> <span class="keyword">let</span> star = <span class="string">&#x27;gd&#x27;</span></span><br><span class="line"><span class="comment">//报错</span></span><br><span class="line"><span class="number">2.</span>块级作用域，</span><br><span class="line"></span><br><span class="line">&#123; <span class="keyword">let</span> girl = <span class="string">&#x27;刘亦菲&#x27;</span> &#125;</span><br><span class="line">在大括号内的都属于作用域内</span><br><span class="line"><span class="number">3.</span>不存在变量提升</span><br><span class="line"><span class="number">4.</span>不影响作用域链</span><br><span class="line"><span class="keyword">const</span>声明常量：</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">SCHOOL</span> = ‘学校’;一般习惯把常量全用大写字母</span><br><span class="line"><span class="number">1.</span>一定要赋初始值</span><br><span class="line"><span class="number">2.</span>一般常量使用大写（潜规则）</span><br><span class="line"><span class="number">3.</span>常量值不能修改</span><br><span class="line"><span class="number">4.</span>块级作用域</span><br><span class="line"><span class="number">5.</span>对数组和对象的元素修改，不算对常量的修改，不会报错</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">变量的结构赋值：es6语序按照一定的模式从数组和对象中提取值，对变量进行赋值。</span><br><span class="line">被称为结构赋值</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组的解构</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">F4</span> = [<span class="string">&quot;小沈阳&quot;</span>, <span class="string">&quot;刘能&quot;</span>, <span class="string">&quot;赵四&quot;</span>, <span class="string">&quot;宋小宝&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> [xiao, liu, zhao, song] = <span class="variable constant_">F4</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(xiao);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(liu);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(zhao);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(song);</span><br><span class="line"></span><br><span class="line"><span class="comment">//对象的解构</span></span><br><span class="line">  <span class="keyword">const</span> zhaob = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;赵本山&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&quot;no&quot;</span>,</span><br><span class="line">    <span class="attr">xiaopin</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我会小品&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">let</span> &#123; name, age, xiaopin &#125; = zhaob;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(xiaopin);</span><br></pre></td></tr></table></figure>

<h2 id="二、模版字符串-96-96-反引号"><a href="#二、模版字符串-96-96-反引号" class="headerlink" title="二、模版字符串&#96;&#96;(反引号)"></a>二、模版字符串&#96;&#96;(反引号)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">`我也是一个字符串哦`</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;ul&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;a&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;b&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;c&lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;/ul&gt; </span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">//变量拼接</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let name1 = &quot;jelly&quot;;</span></span><br><span class="line"><span class="string">let job = `</span>$&#123;name1&#125;是女神是刘亦菲<span class="string">`;</span></span><br><span class="line"><span class="string">console.log(job);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//<span class="subst">$&#123;&#125;</span>是变量拼接的固定格式</span></span><br></pre></td></tr></table></figure>



<h2 id="三、大括号里直接写入变量和函数"><a href="#三、大括号里直接写入变量和函数" class="headerlink" title="三、大括号里直接写入变量和函数"></a>三、大括号里直接写入变量和函数</h2><p>作为对象的属性和方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name1 = <span class="string">&quot;jelly&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> job = <span class="string">`<span class="subst">$&#123;name1&#125;</span>是女神是刘亦菲`</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(job);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> school = &#123;</span><br><span class="line">      name1,</span><br><span class="line">      job,</span><br><span class="line">      <span class="title function_">fun</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//当变量作为对象的属性时，不用再写成name1：name1，方法fun：fuction()&#123;&#125;也可以直接简写成fun()&#123;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="四、箭头函数"><a href="#四、箭头函数" class="headerlink" title="四、箭头函数"></a>四、箭头函数</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">以前的函数为：<span class="keyword">let</span> fun = <span class="keyword">function</span>(<span class="params">a,b</span>)&#123;&#125;</span><br><span class="line">箭头函数则改为：<span class="keyword">let</span> <span class="title function_">fun</span> = (<span class="params">a,b</span>)=&gt;&#123;&#125;</span><br><span class="line"><span class="number">1.</span><span class="variable language_">this</span>是静态的，<span class="variable language_">this</span>始终指向函数声明时所在作用域下的<span class="variable language_">this</span>的值</span><br><span class="line"><span class="number">2.</span>不能作为构造函数实例化对象</span><br><span class="line"><span class="number">3.</span>不能使用<span class="variable language_">arguments</span>变量</span><br><span class="line"><span class="number">4.</span>箭头函数的简写</span><br><span class="line">（<span class="number">1</span>）当形参只有一个时候，可以省略小括号</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fun</span> = a=&gt;&#123;&#125;</span><br><span class="line">(<span class="number">2</span>)当大括号内只有一句话的时候，大括号可以省略,而且语句执行结果就是函数的返回值</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fun</span> = a=&gt; a+b</span><br><span class="line">(<span class="number">3</span>)箭头函数适合与<span class="variable language_">this</span>无关的回调，如定时器，数组方法的回调。不适合与<span class="variable language_">this</span>有关的回调，如事件回调，对象方法</span><br></pre></td></tr></table></figure>

<h2 id="五、函数参数赋初始值"><a href="#五、函数参数赋初始值" class="headerlink" title="五、函数参数赋初始值"></a>五、函数参数赋初始值</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//形参初始值，是具有默认值的参数，这种参数一般都在最后（潜规则）并且可以进行解构赋值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">connect</span>(<span class="params">&#123; a, b, c = <span class="number">101</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">connect</span>(&#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="六、rest参数"><a href="#六、rest参数" class="headerlink" title="六、rest参数"></a>六、rest参数</h2><p>用来获取函数实参，形式是：…args，用来代替arguments,并且rest参数必须放到最后，当多个实参时候，…args会形成数组</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params">a, b, ...args</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(args);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fun</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);</span><br></pre></td></tr></table></figure>

<h2 id="七、扩展运算符：…"><a href="#七、扩展运算符：…" class="headerlink" title="七、扩展运算符：…"></a>七、扩展运算符：…</h2><p>能将数组转化为逗号分隔的参数序列</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">fun</span>(...arr);</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>扩展运算符的应用合并数组</span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="string">&quot;奇拉&quot;</span>, <span class="string">&quot;少卡&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">&quot;舒克都&quot;</span>, <span class="string">&quot;放假&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> arr = [...arr1, ...arr2];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>数组克隆</span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="string">&quot;奇拉&quot;</span>, <span class="string">&quot;少卡&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">&quot;舒克都&quot;</span>, <span class="string">&quot;放假&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> arr = [...arr1, ...arr2];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line"><span class="keyword">let</span> arr3 = [...arr2];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr3);</span><br></pre></td></tr></table></figure>

<h2 id="八、symbol"><a href="#八、symbol" class="headerlink" title="八、symbol"></a>八、symbol</h2><p>一种新的原始数据类型，表示独一无二的值，他的特点</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>symbol的值是唯一的，用来解决命名冲突问题</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>symbol不能与其他值进行运算</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>symbol定义的对象属性不能用<span class="keyword">for</span>…<span class="keyword">in</span>遍历循环，单可以使用<span class="title class_">Reflect</span>.<span class="property">ownKeys</span>来获取所有对象的键名</span><br><span class="line"><span class="comment">//创建symbol</span></span><br><span class="line"><span class="keyword">let</span> s = <span class="title class_">Symbol</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s);</span><br><span class="line"><span class="keyword">let</span> s2 = <span class="title class_">Symbol</span>(<span class="string">&quot;速度快&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s2);</span><br><span class="line"><span class="keyword">let</span> s3 = <span class="title class_">Symbol</span>(<span class="string">&quot;速度快&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s2 === s3);</span><br><span class="line"><span class="comment">//symbol.for创建</span></span><br><span class="line"><span class="keyword">let</span> s4 = <span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&quot;速度快&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s4);</span><br><span class="line"><span class="keyword">let</span> s5 = <span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&quot;速度快&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s5);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s4 === s5);</span><br><span class="line"></span><br><span class="line">symbol的使用：向对象中添加symbol类型的方法</span><br></pre></td></tr></table></figure>

<h2 id="九、迭代器"><a href="#九、迭代器" class="headerlink" title="九、迭代器"></a>九、迭代器</h2><p>是一种接口，为各种不同的数据提供统一的访问机制。任何数据结构只要部署了iterator接口，就可以完成遍历操作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="title class_">ES6</span>创造了一种新的遍历命令：<span class="keyword">for</span>…<span class="keyword">of</span>循环，iterator接口主要提供<span class="keyword">for</span>…<span class="keyword">of</span>消费</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>原生具备iterator接口的数据(可用<span class="keyword">for</span>…<span class="keyword">of</span>遍历)</span><br><span class="line"></span><br><span class="line">a)<span class="title class_">Array</span></span><br><span class="line"></span><br><span class="line">b)<span class="title class_">Arguments</span></span><br><span class="line"></span><br><span class="line">c)<span class="title class_">Set</span></span><br><span class="line"></span><br><span class="line">d)<span class="title class_">Map</span></span><br><span class="line"></span><br><span class="line">e)<span class="title class_">String</span></span><br><span class="line"></span><br><span class="line">f)<span class="title class_">TypeArray</span></span><br><span class="line"></span><br><span class="line">g)<span class="title class_">NodeList</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>工作原理</span><br><span class="line"></span><br><span class="line">a)创建一个指针对象，指向当前数据的起始位置</span><br><span class="line"></span><br><span class="line">b)第一次调用对象的next方法，指针自动指向数据结构的第一个成员</span><br><span class="line"></span><br><span class="line">c)接下来不断调用next方法，指针一直往后移动，直到指向最后一个成员</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Uname</span> = [<span class="string">&quot;搜到&quot;</span>, <span class="string">&quot;的撒&quot;</span>, <span class="string">&quot;的风格&quot;</span>, <span class="string">&quot;范德萨&quot;</span>, <span class="string">&quot;公司发&quot;</span>, <span class="string">&quot;告诉对方&quot;</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> a <span class="keyword">of</span> <span class="title class_">Uname</span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title class_">Uname</span>[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());</span><br><span class="line"><span class="comment">//false表示数组成员没遍历结束，true表示结束。</span></span><br></pre></td></tr></table></figure>

<h2 id="十、生成器"><a href="#十、生成器" class="headerlink" title="十、生成器"></a>十、生成器</h2><p>是es6提供的一种异步编程解决方案，是一个特殊的函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> * <span class="title function_">fun2</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="keyword">yield</span><span class="string">&#x27;一直没有耳朵&#x27;</span>;</span><br><span class="line">   <span class="keyword">yield</span><span class="string">&#x27;一直没有尾巴&#x27;</span>;</span><br><span class="line">   <span class="keyword">yield</span><span class="string">&#x27;真奇怪&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> tor = <span class="title function_">fun2</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tor.<span class="title function_">next</span>())</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tor.<span class="title function_">next</span>())</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tor.<span class="title function_">next</span>())</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tor.<span class="title function_">next</span>())</span><br><span class="line"></span><br><span class="line">生成器的函数参数：<span class="title function_">next</span>()方法在调用的时候可以传递实参的，</span><br><span class="line">第二个next传递的参数将作为第一个<span class="keyword">yield</span>整体的返回结果，后面的依次，</span><br><span class="line">第三个next传递的参数将作为第二个<span class="keyword">yield</span>的整体返回结果</span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">fun2</span>(<span class="params">arg</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg)</span><br><span class="line">    <span class="keyword">let</span> A =  <span class="keyword">yield</span><span class="string">&#x27;一直没有耳朵&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(A)</span><br><span class="line">    <span class="keyword">let</span> B = <span class="keyword">yield</span><span class="string">&#x27;一直没有尾巴&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(B)</span><br><span class="line">    <span class="keyword">let</span> C = <span class="keyword">yield</span><span class="string">&#x27;真奇怪&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(C)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> tor = <span class="title function_">fun2</span>(<span class="string">&#x27;aaa&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tor.<span class="title function_">next</span>())</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tor.<span class="title function_">next</span>(<span class="string">&#x27;bbb&#x27;</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tor.<span class="title function_">next</span>(<span class="string">&#x27;ccc&#x27;</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tor.<span class="title function_">next</span>(<span class="string">&#x27;ddd&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">生成器的实例：模拟获取 用户数据 订单数据 商品数据，每隔一秒显示。</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getUser</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;用户数据&#x27;</span></span><br><span class="line">        <span class="comment">//调用next方法，并且把数据传入</span></span><br><span class="line">        iterator2.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getOrder</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;订单数据&#x27;</span></span><br><span class="line">        iterator2.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getFGoods</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="string">&#x27;商品数据&#x27;</span></span><br><span class="line">        iterator2.<span class="title function_">next</span>(data)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">fun3</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> user = <span class="keyword">yield</span> <span class="title function_">getUser</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(user)</span><br><span class="line">    <span class="keyword">let</span> <span class="title class_">Order</span> = <span class="keyword">yield</span> <span class="title function_">getOrder</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Order</span>)</span><br><span class="line">    <span class="keyword">let</span> <span class="title class_">Goods</span> = <span class="keyword">yield</span> <span class="title function_">getFGoods</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Goods</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> iterator2 = <span class="title function_">fun3</span>()</span><br><span class="line">iterator2.<span class="title function_">next</span>()</span><br></pre></td></tr></table></figure>

<h2 id="十一、Promise"><a href="#十一、Promise" class="headerlink" title="十一、Promise"></a>十一、Promise</h2><p>是es6引入的异步编程新的解决方案。用来封装异步操作并且可以获取其成功或者失败的结果,promise是一个对象，对象和函数的区别就是对象可以保存状态，函数不可以（闭包除外）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> data = <span class="string">&#x27;大奥古斯&#x27;</span></span><br><span class="line">        <span class="title function_">resolve</span>(data)</span><br><span class="line">    &#125;,<span class="number">4000</span>)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">&#125;,<span class="function">(<span class="params">reason</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//promise有三个状态：</span></span><br><span class="line"><span class="number">1</span>、pending[待定]初始状态</span><br><span class="line"><span class="number">2</span>、fulfilled[实现]操作成功</span><br><span class="line"><span class="number">3</span>、rejected[被否决]操作失败</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>含有两个参数，resolve,reject。</span><br><span class="line">resolve作用是，将<span class="title class_">Promise</span>对象的状态从“未完成”变为“成功”（即从 pending 变为 resolved），</span><br><span class="line">  在异步操作成功时调用，并将异步操作的结果，作为参数传递出去；</span><br><span class="line">reject作用是，将<span class="title class_">Promise</span>对象的状态从“未完成”变为“失败”（即从 pending 变为 rejected），</span><br><span class="line">  在异步操作失败时调用，并将异步操作报出的错误，作为参数传递出去。</span><br><span class="line">当promise状态发生改变，就会触发<span class="title function_">then</span>()里的响应函数处理后续步骤；promise状态一经改变，不会再变。</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> data = <span class="string">&quot;大奥古斯&quot;</span>;</span><br><span class="line">        <span class="title function_">resolve</span>(data);</span><br><span class="line">      &#125;, <span class="number">4000</span>);</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">reason</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(reason)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//错误可以用catch进行抓取</span></span><br></pre></td></tr></table></figure>

<h2 id="十二、set"><a href="#十二、set" class="headerlink" title="十二、set"></a>十二、set</h2><p>ES6提供了新的数据结构set（集合），它类似于数组，但成员的值都是唯一的，集合实现了 iterator接口，所以可以使用扩展运算符和for of进行遍历，</p>
<p>集合的属性和方法：(1)size:返回集合的个数，(2)add:增加一个新元素，返回当前集合，(3)delete：删除元素，返回布尔值，(4)has：检测集合中是否包含某个元素，返回布尔值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//声明一个set</span></span><br><span class="line">    <span class="keyword">let</span> se = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">    <span class="keyword">let</span> se2 = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="string">&quot;da&quot;</span>, <span class="string">&quot;xiao&quot;</span>, <span class="string">&quot;gao&quot;</span>, <span class="string">&quot;pang&quot;</span>]);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(se2);</span><br><span class="line">    <span class="comment">//添加新元素</span></span><br><span class="line">    se2.<span class="title function_">add</span>(<span class="string">&quot;xishi&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(se2);</span><br><span class="line">    <span class="comment">//删除元素</span></span><br><span class="line">    se2.<span class="title function_">delete</span>(<span class="string">&quot;gao&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(se2);</span><br><span class="line">    <span class="comment">//检测</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(se2.<span class="title function_">has</span>(<span class="string">&quot;da&quot;</span>));</span><br><span class="line">    <span class="comment">//清空</span></span><br><span class="line">    se2.<span class="title function_">clear</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(se2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">set</span>:<span class="title class_">ES6</span>提供了数据结构<span class="title class_">Map</span>，它类似于对象，也是键值对的集合。但键的范围不限于字符串，</span><br><span class="line">  各种类型的值（包括对象）都可以当做键。<span class="title class_">Map</span>也实现了iterator接口，</span><br><span class="line">    所以可以使用扩展运算符和<span class="keyword">for</span> <span class="keyword">of</span>进行遍历，</span><br><span class="line"></span><br><span class="line"><span class="title class_">Map</span>的属性和方法：(<span class="number">1</span>)<span class="attr">size</span>:返回<span class="title class_">Map</span>元素的个数，(<span class="number">2</span>)<span class="attr">set</span>:增加一个新元素，返回当前<span class="title class_">Map</span>，</span><br><span class="line">  (<span class="number">3</span>)get：返回键名对象的键值，(<span class="number">4</span>)has：检测<span class="title class_">Map</span>中是否包含某个元素，返回布尔值,</span><br><span class="line">  (<span class="number">5</span>)<span class="attr">clear</span>:清空集合，返回<span class="literal">undefined</span></span><br><span class="line"><span class="comment">//声明一个Map</span></span><br><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">m.<span class="title function_">set</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;zmy&quot;</span>);</span><br><span class="line">m.<span class="title function_">set</span>(<span class="string">&quot;change&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">11111</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">let</span> key = &#123;</span><br><span class="line"><span class="attr">school</span>: <span class="string">&quot;ahgy&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line">m.<span class="title function_">set</span>(key, <span class="string">&quot;mm&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m);</span><br><span class="line"><span class="comment">//size</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m.<span class="property">size</span>);</span><br><span class="line"><span class="comment">//其中键值可以是字符串，也可以是对象</span></span><br></pre></td></tr></table></figure>

<h2 id="十三、class类"><a href="#十三、class类" class="headerlink" title="十三、class类"></a>十三、class类</h2><p>通过class，可以定义类。基本上es6中可以看作是一个语法糖，新的class写法只是让对象原型的写法更加清晰、更加面向对象编程的语法而已。</p>
<p>(1)class声明类，<br>(2)constructor定义构造函数初始化，当使用new 方法名()，就会执行constructor<br>(3)extends继承父类，<br>(4)super调用父级构造方法，<br>(5)static定义静态方法和属性，<br>(6)父类方法可以重写</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">phone</span> &#123;</span><br><span class="line"><span class="comment">//构造方法，名字不能修改</span></span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">price, name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">price</span> = price;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//方法必须使用该语法，不能使用es5对象完整形式call：function&#123;&#125;</span></span><br><span class="line"><span class="title function_">call</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;打电话&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> oneplus = <span class="keyword">new</span> <span class="title function_">phone</span>(<span class="number">2000</span>, <span class="string">&quot;华为&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(oneplus );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//class静态成员</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">phone</span>&#123;</span><br><span class="line">  <span class="keyword">static</span> num = <span class="number">123</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">change</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我可以改变世界&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造函数继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span> &#123;</span><br><span class="line">  <span class="comment">//构造方法</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">price, name</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">price</span> = price</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">calll</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我可以改变世界&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">smallcall</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Phone</span> &#123;</span><br><span class="line">  <span class="comment">//构造方法</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">price, name, color, size</span>) &#123;</span><br><span class="line">      <span class="variable language_">super</span>(price, name) <span class="comment">//调用父类的constructor方法</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">color</span> = color</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">size</span> = size</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">photo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;111&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> mi = <span class="keyword">new</span> <span class="title function_">smallcall</span>(<span class="number">133</span>, <span class="string">&#x27;小米&#x27;</span>, <span class="string">&#x27;red&#x27;</span>, <span class="number">4.7</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mi);</span><br></pre></td></tr></table></figure>



<h2 id="十四、数值扩展"><a href="#十四、数值扩展" class="headerlink" title="十四、数值扩展"></a>十四、数值扩展</h2><h3 id="1-Number-EPSILON-是JavaScript表示的最小精度-2-Number-isNaN-检测一个值是否为NaN-3-Number-isInteger-判断一个数是否为整数-4-Math-trunc-将数字的小数部分抹掉"><a href="#1-Number-EPSILON-是JavaScript表示的最小精度-2-Number-isNaN-检测一个值是否为NaN-3-Number-isInteger-判断一个数是否为整数-4-Math-trunc-将数字的小数部分抹掉" class="headerlink" title="1.Number.EPSILON:是JavaScript表示的最小精度  2.Number.isNaN:检测一个值是否为NaN  3.Number.isInteger:判断一个数是否为整数  4.Math.trunc:将数字的小数部分抹掉"></a>1.Number.EPSILON:是JavaScript表示的最小精度  2.Number.isNaN:检测一个值是否为NaN  3.Number.isInteger:判断一个数是否为整数  4.Math.trunc:将数字的小数部分抹掉</h3><h2 id="十五、对象方法扩展"><a href="#十五、对象方法扩展" class="headerlink" title="十五、对象方法扩展"></a>十五、对象方法扩展</h2><h3 id="1-Object-is-判断两个值是否相等-2-Object-assign-对象的合并-3-Object-setPrototypeOf-设置原型对象"><a href="#1-Object-is-判断两个值是否相等-2-Object-assign-对象的合并-3-Object-setPrototypeOf-设置原型对象" class="headerlink" title="1.Object.is:判断两个值是否相等 2.Object.assign:对象的合并 3.Object.setPrototypeOf:设置原型对象"></a>1.Object.is:判断两个值是否相等 2.Object.assign:对象的合并 3.Object.setPrototypeOf:设置原型对象</h3><h2 id="十六、闭包"><a href="#十六、闭包" class="headerlink" title="十六、闭包"></a>十六、闭包</h2><ol>
<li>闭包是什么：闭包是一个函数（一个作用域可以访问另外一个函数的局部变量）。</li>
<li>闭包的作用是什么：延伸变量的作用范围。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">let</span> name = <span class="string">&#x27;The Window&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> object = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;My Object&#x27;</span>,</span><br><span class="line">        <span class="title function_">getNameFunc</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> f = object.<span class="title function_">getNameFunc</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f</span>()) <span class="comment">//The Window</span></span><br><span class="line">产生了闭包：因为 <span class="variable language_">this</span> 在函数内部被赋值给了 that，指向的是 object 这个对象。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">let</span> name = <span class="string">&#x27;The Window&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> object = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;My Object&#x27;</span>,</span><br><span class="line">        <span class="title function_">getNameFunc</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">let</span> that = <span class="variable language_">this</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">               <span class="keyword">return</span> that.<span class="property">name</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> f = object.<span class="title function_">getNameFunc</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f</span>()) <span class="comment">//My Object</span></span><br></pre></td></tr></table></figure>

<h2 id="十七、Es6模块化"><a href="#十七、Es6模块化" class="headerlink" title="十七、Es6模块化"></a>十七、Es6模块化</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>分别暴露：就是在每个需要暴露的变量前加<span class="keyword">export</span></span><br><span class="line"><span class="keyword">export</span>  <span class="keyword">let</span> mi = <span class="string">&#x27;xiaomi&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">name</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">111</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>统一暴露</span><br><span class="line"><span class="keyword">let</span> mi = <span class="string">&#x27;xiaomi&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">name</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">111</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123;mi,name&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>默认暴露</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">mi</span>:<span class="string">&#x27;xiaomi&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>:<span class="keyword">function</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">引入模块</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>通用导入模块：<span class="keyword">import</span> * <span class="keyword">as</span> m <span class="keyword">from</span> ‘/xx.<span class="property">js</span>’,其中用<span class="keyword">as</span>定义别名为m。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>解构赋值：<span class="keyword">import</span> &#123;a,b <span class="keyword">as</span> c&#125; <span class="keyword">from</span> ‘/xx.<span class="property">js</span>’ 如果多个引入的值中有重复的会报错，可以用<span class="keyword">as</span>如把b的值换成c，在默认暴露<span class="keyword">default</span>的引入中：<span class="keyword">import</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> s2&#125;，不能使用<span class="keyword">default</span>，需要用<span class="keyword">as</span>把<span class="keyword">default</span>重定义一个值s2</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>只有默认暴露可以使用简便的方法：<span class="keyword">import</span> m <span class="keyword">from</span> ‘/xx.<span class="property">js</span>’</span><br></pre></td></tr></table></figure>

<h2 id="十八、ES7部分特性"><a href="#十八、ES7部分特性" class="headerlink" title="十八、ES7部分特性"></a>十八、ES7部分特性</h2><h3 id="1-includes：检测数组中是否包含某个元素，返回值是布尔值"><a href="#1-includes：检测数组中是否包含某个元素，返回值是布尔值" class="headerlink" title="1.includes：检测数组中是否包含某个元素，返回值是布尔值"></a>1.includes：检测数组中是否包含某个元素，返回值是布尔值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="string">&#x27;米&#x27;</span>, <span class="string">&#x27;jaj&#x27;</span>, <span class="string">&#x27;midq&#x27;</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr1.<span class="title function_">includes</span>(<span class="string">&#x27;jaj&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h3 id="2-指数操作符：-console-log-2-5-x2F-x2F-32"><a href="#2-指数操作符：-console-log-2-5-x2F-x2F-32" class="headerlink" title="2.指数操作符：**   console.log(2**5) &#x2F;&#x2F;32"></a>2.指数操作符：**   console.log(2**5) &#x2F;&#x2F;32</h3><h2 id="十九、async和await"><a href="#十九、async和await" class="headerlink" title="十九、async和await"></a>十九、async和await</h2><p>async用于申明function异步，await用于等待一个异步方法执行完成</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="keyword">async</span>函数返回一个 <span class="title class_">Promise</span> 对象</span><br><span class="line"><span class="comment">//一个普通函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;syy&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getData</span>())  <span class="comment">//syy</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//加上async后</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;syy&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getData</span>());  <span class="comment">//Promise &#123;&lt;resolved&gt;: &quot;syy&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、<span class="keyword">async</span>函数内部<span class="keyword">return</span>语句返回的值，会成为then方法回调函数的参数</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;syy&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getData</span>().<span class="title function_">then</span>(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)  <span class="comment">//syy</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="number">3</span>、<span class="keyword">async</span>函数内部抛出错误，会导致返回的 <span class="title class_">Promise</span> 对象变为reject状态，抛出的错误对象会被<span class="keyword">catch</span>方法回调函数接收到</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;出错了&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getData</span>()</span><br><span class="line">.<span class="title function_">then</span>(</span><br><span class="line">    <span class="function"><span class="params">v</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(v),</span><br><span class="line">    <span class="function"><span class="params">e</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(e)   <span class="comment">//Error: 出错了</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">await</span>:<span class="number">1.</span><span class="keyword">await</span>必须放在<span class="keyword">async</span>中。</span><br><span class="line"><span class="number">2.</span><span class="keyword">await</span>右侧一般都是promise对象。</span><br><span class="line"><span class="number">3.</span><span class="keyword">await</span>一般返回的都是promise成功过的值</span><br><span class="line"><span class="number">4.</span><span class="keyword">await</span>的promise失败了，会抛出异常需要<span class="keyword">try</span>-<span class="keyword">catch</span>进行捕获</span><br><span class="line"></span><br><span class="line">正常情况下，<span class="keyword">await</span>命令后面是一个<span class="title class_">Promise</span>对象。如果不是，会被转成一个立即resolve的<span class="title class_">Promise</span>对象。</span><br><span class="line"> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> name = <span class="string">&quot;syy&quot;</span>;</span><br><span class="line">            <span class="title function_">resolve</span>(name)</span><br><span class="line">        &#125;,<span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> p = <span class="keyword">await</span> <span class="title function_">getData</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">test</span>(); <span class="comment">//syy</span></span><br></pre></td></tr></table></figure>



<h2 id="二十、ES8对象方法的扩展"><a href="#二十、ES8对象方法的扩展" class="headerlink" title="二十、ES8对象方法的扩展"></a>二十、ES8对象方法的扩展</h2><p>Object.values():返回一个给定对象所有可枚举属性值的数组</p>
<p>Object.entries():返回一个给定对象自身可遍历属性[key,value]的数组，方便map()方法遍历</p>
<p>对象的扩展运算符</p>
<p>对象的解构赋值用于从一个对象取值，相当于将所有哦可遍历的、但尚未被读取的属性，分配到指定的对象上面。所有的键和它们的值，都会拷贝到新对象上面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; x, y, ...z &#125; = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">4</span> &#125;;</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line">y <span class="comment">// 2</span></span><br><span class="line">z <span class="comment">// &#123; a: 3, b: 4 &#125;</span></span><br><span class="line"></span><br><span class="line">对象扩展方法</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">fromEntries</span>():将二维数组转换为对象。和<span class="title class_">Object</span>.<span class="title function_">entries</span>()是将对象转换成二维数组。正好相反</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">字符串扩展方法：trimStart，trimEnd</span><br><span class="line"></span><br><span class="line">在es5中<span class="title function_">trim</span>()方法用来清除字符串两端的空格。所以在es10中引入trimStart清除左边空白，trimEnd</span><br><span class="line">清除右边的空白</span><br><span class="line"><span class="keyword">let</span> arr14 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,[<span class="number">5</span>,<span class="number">5</span>,<span class="number">6</span>]]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr14.<span class="title function_">flat</span>())</span><br></pre></td></tr></table></figure>

<h2 id="二一、ES10数组扩展方法flat"><a href="#二一、ES10数组扩展方法flat" class="headerlink" title="二一、ES10数组扩展方法flat"></a>二一、ES10数组扩展方法flat</h2><p>将多维数组转换为低维数组</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr14 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,[<span class="number">5</span>,<span class="number">5</span>,<span class="number">6</span>]]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr14.<span class="title function_">flat</span>())</span><br></pre></td></tr></table></figure>

<h2 id="二二、私有属性"><a href="#二二、私有属性" class="headerlink" title="二二、私有属性"></a>二二、私有属性</h2><p>私有属性用#进行标识，私有属性无法在外部使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">//公有属性</span></span><br><span class="line">    name;</span><br><span class="line">    <span class="comment">//私有属性</span></span><br><span class="line">    #age;</span><br><span class="line">    #weight;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name,age,weight</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.#age = age</span><br><span class="line">        <span class="variable language_">this</span>.#weight = weight</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">con</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.#age)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.#weight)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> girl = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;Lisa&#x27;</span>,<span class="number">17</span>,<span class="string">&#x27;45g&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(girl)</span><br><span class="line">girl.<span class="title function_">con</span>()</span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-javasrcipt"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/01/29/javasrcipt/"
    >JavaScript</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/01/29/javasrcipt/" class="article-date">
  <time datetime="2023-01-29T13:23:15.000Z" itemprop="datePublished">2023-01-29</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="一、JavaScript的组成"><a href="#一、JavaScript的组成" class="headerlink" title="一、JavaScript的组成"></a>一、JavaScript的组成</h2><p><img src="https://pic.imgdb.cn/item/63d67236face21e9ef119c8b.png"></p>
<h2 id="二、变量"><a href="#二、变量" class="headerlink" title="二、变量"></a>二、变量</h2><p>声明变量&#x3D;&gt;赋值变量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name=<span class="string">&#x27;jelly&#x27;</span></span><br><span class="line"><span class="comment">/*var 是一个 JS关键字，用来声明变量( variable 变量的意思 )。</span></span><br><span class="line"><span class="comment">使用该关键字声明变量后，计算机会自动为变量分配内存空间，不需要程序员管</span></span><br><span class="line"><span class="comment">name是程序员定义的变量名，我们要通过变量名来访问内存中分配的空间*/</span></span><br><span class="line">name = <span class="string">&#x27;gd&#x27;</span>;   <span class="comment">// 最后的结果就是gd因为jelly被覆盖掉了     </span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">10</span>,  name = <span class="string">&#x27;zs&#x27;</span>, sex = <span class="number">2</span>;<span class="comment">//连续声明变量</span></span><br></pre></td></tr></table></figure>



<h2 id="三、数据类型"><a href="#三、数据类型" class="headerlink" title="三、数据类型"></a>三、数据类型</h2><p>js常用的基本数据类型包括undefined、null、number、boolean、string；</p>
<p>js的引用数据类型也就是对象类型Object，比如：Object、array、function、data等；</p>
<h2 id="四、运算符"><a href="#四、运算符" class="headerlink" title="四、运算符"></a>四、运算符</h2><p>JavaScript中常用的运算符有： 算数运算符 递增和递减运算符 比较运算符 逻辑运算符 赋值运算符</p>
<p><img src="https://pic.imgdb.cn/item/63d6725cface21e9ef11e3f9.png"></p>
<h3 id="（1）浮点数精度问题（0-1-0-2-x3D-0-3）"><a href="#（1）浮点数精度问题（0-1-0-2-x3D-0-3）" class="headerlink" title="（1）浮点数精度问题（0.1+0.2!&#x3D;0.3）"></a>（1）浮点数精度问题（0.1+0.2!&#x3D;0.3）<img src="https://pic.imgdb.cn/item/63d6726aface21e9ef11fee0.png"></h3><h3 id="（2）递增与递减"><a href="#（2）递增与递减" class="headerlink" title="（2）递增与递减"></a>（2）递增与递减</h3><p>如果需要反复给数字变量添加或减去1，可以使用递增（++）和递减（ – ）运算符来完成。在 JavaScript 中，递增（++）和递减（ – ）既可以放在变量前面，也可以放在变量后面。放在变量前面时，我们可以称为前置递增（递减）运算符，放在变量后面时，我们可以称为后置递增（递减）运算符。注意：递增和递减运算符必须和变量配合使用。 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> count=<span class="number">1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span>（count++）;<span class="comment">//2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span>（count--）;</span><br><span class="line"><span class="comment">//前置递增</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span>（++count+<span class="number">10</span>）<span class="comment">//12;</span></span><br></pre></td></tr></table></figure>



<h3 id="（3）比较运算符"><a href="#（3）比较运算符" class="headerlink" title="（3）比较运算符"></a>（3）比较运算符</h3><p><img src="https://pic.imgdb.cn/item/63d6727dface21e9ef1228ae.png"></p>
<h3 id="（4）逻辑运算符"><a href="#（4）逻辑运算符" class="headerlink" title="（4）逻辑运算符"></a>（4）逻辑运算符</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="number">10</span> ,b=<span class="number">1</span>,c=<span class="number">5</span></span><br><span class="line">a&gt;b&amp;&amp;c=<span class="literal">true</span> <span class="comment">//两者都才成立</span></span><br><span class="line">c&gt;a&amp;&amp;b=<span class="literal">false</span> </span><br><span class="line">c&gt;a||b=<span class="literal">true</span> <span class="comment">// 两者中有一者符合就成立</span></span><br><span class="line">a&lt;<span class="number">10</span>=!<span class="literal">true</span> <span class="comment">// false=!true 取反</span></span><br></pre></td></tr></table></figure>

<h3 id="（5）运算符优先级"><a href="#（5）运算符优先级" class="headerlink" title="（5）运算符优先级"></a>（5）运算符优先级</h3><p><img src="https://pic.imgdb.cn/item/63d6728fface21e9ef124e91.png"></p>
<h2 id="五、流程控制"><a href="#五、流程控制" class="headerlink" title="五、流程控制"></a>五、流程控制</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="number">10</span> , b=<span class="number">5</span> ,c=<span class="number">1</span></span><br><span class="line"><span class="comment">//if语句</span></span><br><span class="line"><span class="keyword">if</span>(a&gt;b+c)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="property">log</span>（<span class="string">&#x27;yes&#x27;</span>）;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="property">log</span>（<span class="string">&#x27;no&#x27;</span>）;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//yes,10&gt;5+1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//switch语句</span></span><br><span class="line"><span class="keyword">var</span> score = <span class="title function_">prompt</span>(<span class="string">&#x27;请您输入分数:&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (score &gt;= <span class="number">90</span>) &#123;</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&#x27;宝贝，你是我的骄傲&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">80</span>) &#123;</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&#x27;宝贝，你已经很出色了&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">70</span>) &#123;</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&#x27;你要继续加油喽&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">60</span>) &#123;</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&#x27;孩子，你很危险&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&#x27;熊孩子，我不想和你说话，我只想用鞭子和你说话&#x27;</span>)</span><br><span class="line">  <span class="comment">//input:85;宝贝，你已经很出色了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//三元表达式</span></span><br><span class="line"><span class="keyword">var</span> res=a&gt;<span class="number">11</span>?:<span class="string">&#x27;yes&#x27;</span>:<span class="string">&#x27;no&#x27;</span></span><br><span class="line">  <span class="comment">//a&lt;11,no</span></span><br></pre></td></tr></table></figure>

<h2 id="六、数组"><a href="#六、数组" class="headerlink" title="六、数组"></a>六、数组</h2><p>数组是指一组数据的集合，其中的每个数据被称作元素，在数组中可以存放任意类型的元素。数组是一种将一组数据存储在单个变量名下的优雅方式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通变量一次只能存储一个值</span></span><br><span class="line"><span class="keyword">var</span>  num = <span class="number">10</span>; </span><br><span class="line"><span class="comment">// 数组一次可以存储多个值</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> 数组名 = <span class="keyword">new</span> <span class="title class_">Array</span>() ; <span class="comment">// 字面量创建数组</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>();   <span class="comment">// 创建一个新的空数组</span></span><br><span class="line"><span class="comment">//数组中可以存放任意类型的数据，例如字符串，数字，布尔值等。</span></span><br><span class="line"><span class="keyword">var</span> arrStus = [<span class="string">&#x27;小白&#x27;</span>,<span class="number">12</span>,<span class="literal">true</span>,<span class="number">28.9</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组的索引</span></span><br><span class="line"><span class="comment">// 定义数组</span></span><br><span class="line"><span class="keyword">var</span> arrStus = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="comment">// 获取数组中的第2个元素</span></span><br><span class="line"><span class="title function_">alert</span>(arrStus[<span class="number">1</span>]);  </span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;red&#x27;</span>,<span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">0</span>]) <span class="comment">// red</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">1</span>]) <span class="comment">// green</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">2</span>]) <span class="comment">// blue</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//for遍历数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;red&#x27;</span>,<span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++)&#123;  <span class="comment">//使用“数组名.length”可以访问数组元素的数量（数组长度）</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arrStus[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历计算</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> average = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    sum += arr[i];</span><br><span class="line">&#125;</span><br><span class="line">average = sum / arr.<span class="property">length</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这组数的和是：&#x27;</span> + sum);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这组数的平均值是：&#x27;</span> + average);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组的属性</span></span><br><span class="line"><span class="comment">/*数组是对象的一种，每次的位置都是从0开始。也就是索引号</span></span><br><span class="line"><span class="comment">数组属性，length会显示数组的长度</span></span><br><span class="line"><span class="comment">（1）：增删数组：pop，unshift，shift，push</span></span><br><span class="line"><span class="comment">unshift：在数组的最前面增加一个或多个值，返回的值是新的数组长度</span></span><br><span class="line"><span class="comment">shift：删除数组最前面的，返回的值是被删除的哪一个</span></span><br><span class="line"><span class="comment">pop：删除最后一个，返回的值是被删除的哪一个</span></span><br><span class="line"><span class="comment">push：在数组的最后面增加一个或多个值，返回的值是新的数组长度</span></span><br><span class="line"><span class="comment">（2）indexOf：查找值在数组的某一位置，返回的值是length（长度），如果没有此值则返回-1.</span></span><br><span class="line"><span class="comment">lastindexOf：如果此数组里有重复值，就可以用这个属性。查到元素在数组里面最后一次出现的位置</span></span><br><span class="line"><span class="comment">（3）slice（start，end）start开始位置，end结束位置，start含有此位置的元素，end不含此位置的元素。返回的值是最新数组</span></span><br><span class="line"><span class="comment">（4）splice（start，end，需要在此中间删除的元素），返回的值是最新数组</span></span><br><span class="line"><span class="comment">（5）reverse：将数组内容反转输出，如：var a=[1,2,3,4]; var b=a.reverse(); //结果4321 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">64</span>, <span class="number">9</span>, <span class="number">6</span>];</span><br><span class="line">arr.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> b - a;      <span class="comment">// 降a序</span></span><br><span class="line">    <span class="comment">// return a - b;   // 升序</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组转字符串</span></span><br><span class="line">toString（）</span><br><span class="line">join（）</span><br></pre></td></tr></table></figure>

<h3 id="数组的遍历方法：（12种）"><a href="#数组的遍历方法：（12种）" class="headerlink" title="数组的遍历方法：（12种）"></a>数组的遍历方法：（12种）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="keyword">for</span>循环</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>;i++  )&#123;</span><br><span class="line">  <span class="comment">//代码</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>forEach循环</span><br><span class="line"> arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item,index,arr</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//代码</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="comment">/*forEach接收一个回调函数作为参数,而这个回调函数有接受三个参数,作为参数。</span></span><br><span class="line"><span class="comment">item是每个元素,index元素在数组中的下标,arr数组本身。没有返回值！*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>map循环 (<span class="title class_">React</span>循环渲染用map)</span><br><span class="line"><span class="keyword">var</span> brr= arr.<span class="title function_">map</span>(<span class="function">(<span class="params">item,index,arr</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//代码</span></span><br><span class="line">        <span class="keyword">return</span> item * <span class="number">2</span>;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="comment">/*map的用法和forEach差不多。但是map是有返回值的。他的返回值是一个新数组</span></span><br><span class="line"><span class="comment">    arr----&gt;[1,2,3]</span></span><br><span class="line"><span class="comment">    brr----&gt;[2,4,6]*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span><span class="keyword">for</span>–<span class="keyword">of</span></span><br><span class="line"><span class="comment">//对象不能遍历</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> item <span class="keyword">of</span> arr)&#123;</span><br><span class="line">        <span class="comment">//代码</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>filter</span><br><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,<span class="attr">age</span>:<span class="string">&#x27;20&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">&#x27;李四&#x27;</span>,<span class="attr">age</span>:<span class="string">&quot;50&quot;</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">    arr.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> item.<span class="property">name</span>;</span><br><span class="line">        <span class="comment">//返回值是 arr本身，所以元素的name都为true</span></span><br><span class="line">    &#125;)</span><br><span class="line">    arr.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> item.<span class="property">age</span>&gt;<span class="number">30</span>;</span><br><span class="line">        <span class="comment">//[&#123;name:&quot;李四&quot;,age:&quot;50&quot;&#125;]</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//接受一个回调函数作为参数,返回值是一个新数组</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>every遍历</span><br><span class="line"><span class="comment">//every()是对数组中的每一项运行给定函数，如果该函数对每一项返回true,则返回true。(全部符合条件)</span></span><br><span class="line">    <span class="keyword">var</span> arr=[<span class="number">50</span>,<span class="number">6</span>,<span class="number">70</span>,<span class="number">80</span>];</span><br><span class="line">    arr.<span class="title function_">every</span>(<span class="function">(<span class="params">item,index,arr</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> item &gt; <span class="number">50</span>; <span class="comment">//每一项数据都要大于50</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//false   </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">7.</span>some遍历</span><br><span class="line"><span class="comment">//some()是对数组中每一项运行指定函数，如果该函数对任一项返回true，则返回true。(只要有一个符合)</span></span><br><span class="line">    <span class="keyword">var</span> arr=[<span class="number">50</span>,<span class="number">6</span>,<span class="number">70</span>,<span class="number">80</span>];</span><br><span class="line">    arr.<span class="title function_">some</span>(<span class="function">(<span class="params">item,index,arr</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> item &gt; <span class="number">50</span>; <span class="comment">//只要有一项数据都要大于50</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">8.</span>reduce （累加器）</span><br><span class="line"><span class="comment">///reduce()方法接收一个函数作为累加器,数组中每个值(从左往右)开始缩减,最重为一个值</span></span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">reduce</span>(<span class="function">(<span class="params">a,b</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;<span class="comment">//6   </span></span><br><span class="line">    &#125;)</span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">reduce</span>(<span class="function">(<span class="params">previousValue,currentValue,index,arr</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> previousValue + currentValue;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//reduce还有第二个参数，我们可以把这个参数作为第一次调用callback时的第一个参数，上面这个例子因为没有第二个参数，所以直接从数组的第二项开始，如果我们给了第二个参数为5</span></span><br><span class="line">     [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">reduce</span>(<span class="function">(<span class="params">previousValue,currentValue,index,arr</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> previousValue + currentValue;</span><br><span class="line">    &#125;,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6, 8 ,11</span></span><br><span class="line">    <span class="comment">//第一次调用的previousValue的值就用传入的第二个参数代替，</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">9.</span>reduceRight</span><br><span class="line"><span class="comment">/*reduceRight()方法的功能和reduce()功能是一样的，不同的是reduceRight()从数组的末尾向前将数组中的数组项做累加。</span></span><br><span class="line"><span class="comment">    reduceRight()首次调用回调函数callbackfn时，prevValue 和 curValue 可以是两个值之一。</span></span><br><span class="line"><span class="comment">    如果调用 reduceRight() 时提供了 initialValue 参数，则 prevValue 等于 initialValue，curValue 等于数组中的最后一个值。</span></span><br><span class="line"><span class="comment">    如果没有提供 initialValue 参数，则 prevValue 等于数组最后一个值， curValue 等于数组中倒数第二个值。*/</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">    arr.<span class="title function_">reduceRight</span>(<span class="keyword">function</span> (<span class="params">preValue,curValue,index,array</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> preValue + curValue;</span><br><span class="line">    &#125;); <span class="comment">// 10</span></span><br><span class="line">    <span class="number">7</span> = <span class="number">4</span> + <span class="number">3</span>   第一次</span><br><span class="line">    <span class="number">9</span> = <span class="number">2</span> + <span class="number">7</span>   第二次</span><br><span class="line">   <span class="number">10</span> = <span class="number">9</span> + <span class="number">1</span>   第三次</span><br><span class="line">   <span class="number">10</span> = <span class="number">10</span> + <span class="number">0</span>  第四次</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">10.</span>find</span><br><span class="line"> <span class="comment">//find()方法返回数组中符合测试函数条件的第一个元素。否则返回undefined </span></span><br><span class="line">    <span class="keyword">const</span> stu = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">        <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>,</span><br><span class="line">        <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">21</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">        <span class="attr">gender</span>: <span class="string">&#x27;女&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">22</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getStu</span>(<span class="params">element</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> element.<span class="property">name</span> == <span class="string">&#x27;李四&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    stu.<span class="title function_">find</span>(getStu)</span><br><span class="line">    <span class="comment">//返回结果为</span></span><br><span class="line">    <span class="comment">//&#123;name: &quot;李四&quot;, gender: &quot;女&quot;, age: 22&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">11.</span>findIndex</span><br><span class="line"><span class="comment">/*对于数组中的每个元素，findIndex 方法都会调用一次回调函数（采用升序索引顺序），直到有元素返回 true。</span></span><br><span class="line"><span class="comment">只要有一个元素返回 true，findIndex 立即返回该返回 true 的元素的索引值。</span></span><br><span class="line"><span class="comment">如果数组中没有任何元素返回 true，则 findIndex 返回 -1。findIndex 不会改变数组对象!!!!!*/</span></span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">findIndex</span>(<span class="keyword">function</span>(<span class="params">x</span>) &#123; x == <span class="number">2</span>; &#125;);</span><br><span class="line">    <span class="comment">//1</span></span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">findIndex</span>(<span class="function"><span class="params">x</span> =&gt;</span> x == <span class="number">4</span>);</span><br><span class="line">    <span class="comment">//-1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">12.</span>keys,values,entries</span><br><span class="line"><span class="comment">/*ES6 提供三个新的方法 —— entries()，keys()和values() —— 用于遍历数组。它们都返回一个遍历器对象，</span></span><br><span class="line"><span class="comment">可以用for...of循环进行遍历，唯一的区别是keys()是对键名的遍历、values()是对键值的遍历，</span></span><br><span class="line"><span class="comment">entries()是对键值对的遍历*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">of</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>].<span class="title function_">keys</span>()) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(index);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> elem <span class="keyword">of</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>].<span class="title function_">values</span>()) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;a&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;b&#x27;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [index, elem] <span class="keyword">of</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>].<span class="title function_">entries</span>()) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(index, elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0 &quot;a&quot;</span></span><br><span class="line"><span class="comment">// 1 &quot;b&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="七、字符串"><a href="#七、字符串" class="headerlink" title="七、字符串"></a>七、字符串</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//.charAt(index) 返回指定索引位置的字符，（index）表示字符串中某个位置的数字，字符在该字符串中的下标，</span></span><br><span class="line"><span class="comment">//若index超出字符串的length，.charAt（）返回空。</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;abcdef&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">charAt</span>(<span class="number">1</span>));    <span class="comment">//输出字符串中第二个位置的字符，结果为 b</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">charAt</span>(<span class="number">9</span>));    <span class="comment">//选定位置超出字符串的长度，结果为 空</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//.charCodeAt(index)返回指定索引位置字符的Unicode编码。</span></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">charCodeAt</span>(<span class="number">0</span>)); <span class="comment">// 97</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//.fromCharCode(num) 返回的是ASCII码对应的值，num可以是一个或多个ASCII码值，多个用逗号分割。</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">97</span>,<span class="number">98</span>,<span class="number">99</span>));    <span class="comment">//结果为 abc</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//.concat(str) 连接两个或多个字符串，返回连接后的字符串。</span></span><br><span class="line"><span class="keyword">var</span> str1=<span class="string">&#x27;hello&#x27;</span>;<span class="keyword">var</span> str2=<span class="string">&#x27; world&#x27;</span>;</span><br><span class="line"><span class="title function_">alert</span>(str1.<span class="title function_">concat</span>(str2)); <span class="comment">// 返回拼接后的hello world</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//.indexOf(str) 返回指定字符串第一次出现的位置，若没有则返回-1。</span></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&#x27;hello world,hello moee&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">indexOf</span>(<span class="string">&#x27;hello&#x27;</span>)); <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">indexOf</span>(<span class="string">&#x27;o&#x27;</span>)); <span class="comment">//返回第一次出现的o对应的位置 4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">indexOf</span>(<span class="string">&#x27;s&#x27;</span>)); <span class="comment">//若未出现返回 -1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//.lastIndexOf(str) 返回指定字符串最后一次出现的位置，没有返回-1</span></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&#x27;hello world,hello moee&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;hello&#x27;</span>)); <span class="comment">// 12</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;o&#x27;</span>)); <span class="comment">//19</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;s&#x27;</span>)); <span class="comment">//若未出现返回 -1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//.match() 找到一个或多个正则表达式的匹配，没有返回null。正则是全局匹配则返回匹配到的所有字符串组成的数组；</span></span><br><span class="line"><span class="comment">//诺正则并非是全局匹配，因此返回的数组里只匹配到一个，它位于数组的第1项，数组的第2项是匹配到的内容位于字符串起始位置，</span></span><br><span class="line"><span class="comment">//第3项是原始字符串内容，第4项groups一个捕获组数组 或 undefined（如果没有定义命名捕获组）。</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;1 week 1 2 abcd 3 1 2&quot;</span>; <span class="comment">//match方法返回值为数组</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">match</span>(<span class="string">&#x27;1&#x27;</span>)); <span class="comment">//[&quot;1&quot;, index: 0, input: &quot;1 week 1 2 abcd 3 1 2&quot;, groups: undefined]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">match</span>(<span class="regexp">/[0-9]/g</span>)); <span class="comment">//[&quot;1&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;1&quot;, &quot;2&quot;]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//.replace() 替换与正则表达式匹配的子串（默认只替换第一个匹配的子串，加g可以替换所有匹配的子串）。</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;1 week 1 2 abcd 3 1 2 week&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">replace</span>(<span class="regexp">/week/</span>,<span class="string">&#x27;month&#x27;</span>)) <span class="comment">//返回 &quot;1 month 1 2 abcd 3 1 2 week&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">replace</span>(<span class="regexp">/week\g/</span>,<span class="string">&#x27;month&#x27;</span>)) <span class="comment">//返回 &quot;1 week 1 2 abcd 3 1 2 week&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//.search() 返回与正则表达式匹配的子串的起始位置，没有返回-1。</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;1 week 1 2 abcd 3 1 2 week&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">search</span>(<span class="regexp">/week/</span>)) <span class="comment">//返回 2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//.slice(num1,num2) 返回指定开始位置（包括开始位置，若为负数则从末尾处开始计算起始位置，即-1表示倒数第一个）到指定结束位置（不包括结束位置，若未指定此参数，则包括从指定的开始位置开始到字符串结尾的所有字符）的字符串。</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">slice</span>(<span class="number">4</span>,<span class="number">9</span>)) <span class="comment">//返回 &quot;o wor&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str) <span class="comment">//返回 &quot;hello world&quot; 不改变原字符串</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//.split()将字符串分割为子字符串数组（第二个参数可指定返回的数组的最大长度，可选）</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)) <span class="comment">//返回  [&quot;hello&quot;, &quot;world&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str) <span class="comment">//返回 &quot;hello world&quot; 不改变原字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//.substr(index,length) 提取从指定index（索引，必需，若为负数则从末尾处开始计算起始位置，即-1表示倒数第一个）开始的length（长度，可选，若未指定此参数，则包括从指定的index开始到字符串结尾的所有字符）个字符。</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substr</span>(<span class="number">2</span>,<span class="number">4</span>)) <span class="comment">//返回 &quot;llo &quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str) <span class="comment">//返回 &quot;hello world&quot; 不改变原字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//.substring(num1,num2) 提取指定开始位置（包括开始位置）到结束位置（不包括结束位置，可选，若未指定此参数，则包括从指定的开始位置开始到字符串结尾的所有字符）的字符。</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substring</span>(<span class="number">2</span>,<span class="number">4</span>)) <span class="comment">//返回 &quot;ll&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substring</span>(<span class="number">2</span>)) <span class="comment">//返回 &quot;llo world&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str) <span class="comment">//返回 &quot;hello world&quot; 不改变原字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//.toLowerCase() 将字符串转换为小写。</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">toLowerCase</span>()) <span class="comment">//返回 &quot;hello world&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//.toUpperCase() 将字符串转换为大写。</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">toUpperCase</span>()) <span class="comment">//返回 &quot;HELLO WORLD&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//.trim() 可以去除字符串头尾空格。</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;        Hello World    &quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">trim</span>()) <span class="comment">// 返回 &quot;Hello World&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="八、函数"><a href="#八、函数" class="headerlink" title="八、函数"></a>八、函数</h2><p>在 JS 里面，可能会定义非常多的相同代码或者功能相似的代码，这些代码可能需要大量重复使用。虽然 for循环语句也能实现一些简单的重复操作，但是比较具有局限性，此时我们就可以使用 JS 中的函数。函数：就是封装了一段可被重复调用执行的代码块。通过此代码块可以实现大量代码的重复使用。  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明函数</span></span><br><span class="line"><span class="keyword">function</span> 函数名() &#123;</span><br><span class="line">    <span class="comment">//函数体代码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*function 是声明函数的关键字,必须小写</span></span><br><span class="line"><span class="comment">由于函数一般是为了实现某个功能才定义的， 所以通常我们将函数名命名为动词，比如 getSum  </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">   计算1-100之间值的函数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 声明函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getSum</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> sumNum = <span class="number">0</span>;<span class="comment">// 准备一个变量，保存数字和</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">    sumNum += i;<span class="comment">// 把每个数值 都累加 到变量中</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">alert</span>(sumNum);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line"><span class="title function_">getSum</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 带参数的函数声明</span></span><br><span class="line"><span class="keyword">function</span> 函数名(形参<span class="number">1</span>, 形参<span class="number">2</span> , 形参<span class="number">3.</span>..) &#123; <span class="comment">// 可以定义任意多的参数，用逗号分隔</span></span><br><span class="line">  <span class="comment">// 函数体</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 带参数的函数调用</span></span><br><span class="line">函数名(实参<span class="number">1</span>, 实参<span class="number">2</span>, 实参<span class="number">3.</span>..); </span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getSum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(num1 + num2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getSum</span>(<span class="number">1</span>, <span class="number">3</span>); <span class="comment">// 4</span></span><br><span class="line"><span class="title function_">getSum</span>(<span class="number">6</span>, <span class="number">5</span>); <span class="comment">// 11</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明函数</span></span><br><span class="line"><span class="keyword">function</span> 函数名（）&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span>  需要返回的值；</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line">函数名();    <span class="comment">// 此时调用函数就可以得到函数体内return 后面的值</span></span><br><span class="line"> <span class="comment">/*在使用 return 语句时，函数会停止执行，并返回指定的值</span></span><br><span class="line"><span class="comment"> 如果函数没有 return ，返回的值是 undefined*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明函数</span></span><br><span class="line"><span class="keyword">function</span> sum（）&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span>  <span class="number">666</span>；</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line"><span class="title function_">sum</span>();      <span class="comment">// 此时 sum 的值就等于666，因为 return 语句会把自身后面的值返回给调用者 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//return 终止函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">num1，num2</span>)&#123;</span><br><span class="line">    <span class="comment">//函数体</span></span><br><span class="line">    <span class="keyword">return</span> num1 + num2; <span class="comment">// 注意：return 后的代码不执行</span></span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;我不会被执行，因为前面有 return&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> resNum = <span class="title function_">add</span>(<span class="number">21</span>,<span class="number">6</span>); <span class="comment">// 调用函数，传入两个实参，并通过 resNum 接收函数返回值</span></span><br><span class="line"><span class="title function_">alert</span>(resNum);          <span class="comment">// 27</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*函数都是有返回值的，返回最后一个值</span></span><br><span class="line"><span class="comment">如果有return 则返回 return 后面的值</span></span><br><span class="line"><span class="comment">如果没有return 则返回 undefined */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*break ：结束当前的循环体（如 for、while）</span></span><br><span class="line"><span class="comment">continue ：跳出本次循环，继续执行下次循环（如 for、while）</span></span><br><span class="line"><span class="comment">return ：不仅可以退出循环，还能够返回 return 语句中的值，同时还可以结束当前的函数体内的代码</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//函数调用另一个函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">111</span>);</span><br><span class="line">  <span class="title function_">fn2</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn1&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">222</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn2&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn1</span>();</span><br></pre></td></tr></table></figure>

<h2 id="九、作用域"><a href="#九、作用域" class="headerlink" title="九、作用域"></a>九、作用域</h2><p>通常来说，一段程序代码中所用到的名字并不总是有效和可用的，而限定这个名字的可用性的代码范围就是这个名字的作用域。作用域的使用提高了程序逻辑的局部性，增强了程序的可靠性，减少了名字冲突。</p>
<p>JavaScript（es6前）中的作用域有两种：全局作用域局部作用域（函数作用域）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//块级作用域有&#123;&#125;包裹</span></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">  int num = <span class="number">123</span>;</span><br><span class="line">  system.<span class="property">out</span>.<span class="title function_">print</span>(num);  <span class="comment">// 123</span></span><br><span class="line">&#125;</span><br><span class="line">system.<span class="property">out</span>.<span class="title function_">print</span>(num);    <span class="comment">// 报错</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">123</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">f2</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>( num );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">f2</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> num = <span class="number">456</span>;</span><br><span class="line"><span class="title function_">f1</span>();<span class="comment">//123</span></span><br><span class="line"><span class="comment">//作用域链：采取就近原则的方式来查找变量最终的值。</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic.imgdb.cn/item/63d672acface21e9ef128a81.png"></p>
<h2 id="十、预解析"><a href="#十、预解析" class="headerlink" title="十、预解析"></a>十、预解析</h2><p>预解析：在当前作用域下, JS 代码执行之前，浏览器会默认把带有 var 和 function 声明的变量在内存中进行提前声明或者定义。代码执行： 从上到下执行JS语句。预解析只会发生在通过 var 定义的变量和 function 上。学习预解析能够让我们知道为什么在变量声明之前访问变量的值是 undefined，为什么在函数声明之前就可以调用函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//变量提升</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);  <span class="comment">// 结果是多少？</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;      <span class="comment">// 10</span></span><br><span class="line">预解析也叫做变量、函数提升。</span><br><span class="line">变量提升： 变量的声明会被提升到当前作用域的最上面，变量的赋值不会提升。</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数提升</span></span><br><span class="line"><span class="title function_">fn</span>();</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;打印&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">函数提升： 函数的声明会被提升到当前作用域的最上面，但是不会调用函数。</span><br></pre></td></tr></table></figure>



<h2 id="十一、对象"><a href="#十一、对象" class="headerlink" title="十一、对象"></a>十一、对象</h2><p>在 JavaScript 中，对象是一组无序的相关属性和方法的集合，所有的事物都是对象，例如字符串、数值、数组、函数等。对象是由属性和方法组成的。属性：事物的特征，在对象中用属性来表示（常用名词）方法：事物的行为，在对象中用方法来表示（常用动词）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//字面量创建对象</span></span><br><span class="line"><span class="keyword">var</span> star = &#123;</span><br><span class="line">    name : <span class="string">&#x27;pink&#x27;</span>,</span><br><span class="line">    age : <span class="number">18</span>,</span><br><span class="line">    sex : <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    sayHi : <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;大家好啊~&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(star.<span class="property">name</span>)     <span class="comment">// 调用名字属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(star[<span class="string">&#x27;name&#x27;</span>])  <span class="comment">// 调用名字属性</span></span><br><span class="line">star.<span class="title function_">sayHi</span>();              <span class="comment">// 调用 sayHi 方法,注意，一定不要忘记带后面的括号</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//利用newObject创建对象</span></span><br><span class="line"><span class="keyword">var</span> andy = <span class="keyword">new</span> <span class="title class_">Obect</span>();</span><br><span class="line">andy.<span class="property">name</span> = <span class="string">&#x27;pink&#x27;</span>;</span><br><span class="line">andy.<span class="property">age</span> = <span class="number">18</span>;</span><br><span class="line">andy.<span class="property">sex</span> = <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">andy.<span class="property">sayHi</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;大家好啊~&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//利用构造函数创建对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age, sex</span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">sex</span> = sex;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">sayHi</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">&#x27;我的名字叫：&#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;，年龄：&#x27;</span> + <span class="variable language_">this</span>.<span class="property">age</span> + <span class="string">&#x27;，性别：&#x27;</span> + <span class="variable language_">this</span>.<span class="property">sex</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bigbai = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;大白&#x27;</span>, <span class="number">100</span>, <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> smallbai = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;小白&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(bigbai.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(smallbai.<span class="property">name</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历对象属性</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(k);      <span class="comment">// 这里的 k 是属性名</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj[k]); <span class="comment">// 这里的 obj[k] 是属性值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="十二、内置对象"><a href="#十二、内置对象" class="headerlink" title="十二、内置对象"></a>十二、内置对象</h2><p>学习一个内置对象的使用，只要学会其常用成员的使用即可，我们可以通过查文档学习，可以通过MDN&#x2F;W3C来查询。Mozilla 开发者网络（MDN）提供了有关开放网络技术（Open Web）的信息，包括 HTML、CSS 和万维网及 HTML5 应用的 API。MDN:   <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/">https://developer.mozilla.org/zh-CN/</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Math</span>.<span class="property">PI</span>		 <span class="comment">// 圆周率</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">floor</span>() 	 <span class="comment">// 向下取整</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">ceil</span>()            <span class="comment">// 向上取整</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">round</span>()           <span class="comment">// 四舍五入版 就近取整   注意 -3.5   结果是  -3 </span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">abs</span>()		 <span class="comment">// 绝对值</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">max</span>()/<span class="title class_">Math</span>.<span class="title function_">min</span>()	 <span class="comment">// 求最大和最小值 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//随机数方法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRandom</span>(<span class="params">min, max</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (max - min + <span class="number">1</span>)) + min; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Date时间 （建议使用第三方包 moment.js/day.js）</span></span><br><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组对象</span></span><br><span class="line"> <span class="keyword">instanceof</span> 运算符，可以判断一个对象是否属于某种类型</span><br><span class="line"> <span class="title class_">Array</span>.<span class="title function_">isArray</span>()用于判断一个对象是否为数组，<span class="title function_">isArray</span>() 是 <span class="title class_">HTML5</span> 中提供的方法	 </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">23</span>];</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr <span class="keyword">instanceof</span> <span class="title class_">Array</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj <span class="keyword">instanceof</span> <span class="title class_">Array</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr));   <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj));   <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic.imgdb.cn/item/63d672beface21e9ef12ad10.png"></p>
<h2 id="十三、简单型与复杂性数据"><a href="#十三、简单型与复杂性数据" class="headerlink" title="十三、简单型与复杂性数据"></a>十三、简单型与复杂性数据</h2><p>简单类型又叫做基本数据类型或者值类型，复杂类型又叫做引用类型。 值类型：简单数据类型&#x2F;基本数据类型，在存储时变量中存储的是值本身，因此叫做值类型string ，number，boolean，undefined，null 引用类型：复杂数据类型，在存储时变量中存储的仅仅是地址（引用），因此叫做引用数据类型 通过 new 关键字创建的对象（系统对象、自定义对象），如 Object、Array、Date等</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//简单型</span></span><br><span class="line"><span class="comment">//函数的形参也可以看做是一个变量，当我们把一个值类型变量作为参数传给函数的形参时，</span></span><br><span class="line"><span class="comment">//其实是把变量在栈空间里的值复制了一份给形参，那么在方法内部对形参做任何修改，</span></span><br><span class="line"><span class="comment">//都不会影响到的外部变量。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    a++;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="title function_">fn</span>(x);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x)；</span><br><span class="line"></span><br><span class="line"><span class="comment">//复杂型</span></span><br><span class="line"><span class="comment">//函数的形参也可以看做是一个变量，当我们把引用类型变量传给形参时，</span></span><br><span class="line"><span class="comment">//其实是把变量在栈空间里保存的堆地址复制给了形参，形参和实参其实保存的是同一个堆地址，</span></span><br><span class="line"><span class="comment">//所以操作的是同一个对象。</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params">x</span>) &#123; <span class="comment">// x = p</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x.<span class="property">name</span>); <span class="comment">// 2. 这个输出什么 ?    </span></span><br><span class="line">    x.<span class="property">name</span> = <span class="string">&quot;张学友&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x.<span class="property">name</span>); <span class="comment">// 3. 这个输出什么 ?    </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;刘德华&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">name</span>);    <span class="comment">// 1. 这个输出什么 ?   </span></span><br><span class="line"><span class="title function_">f1</span>(p);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">name</span>);    <span class="comment">// 4. 这个输出什么 ?  </span></span><br></pre></td></tr></table></figure>



<h2 id="十四、Dom"><a href="#十四、Dom" class="headerlink" title="十四、Dom"></a>十四、Dom</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用 getElementById() 方法可以获取带有 ID 的元素对象。</span></span><br><span class="line"> <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;id&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 getElementsByTagName() 方法可以返回带有指定标签名的对象的集合。</span></span><br><span class="line"> <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;标签名&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//还可以获取某个元素(父元素)内部所有指定标签名的子元素.</span></span><br><span class="line">element.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;标签名&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过 HTML5 新增的方法获取</span></span><br><span class="line"><span class="number">1.</span> <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(‘类名’)；<span class="comment">// 根据类名返回元素对象集合</span></span><br><span class="line"><span class="number">2.</span> <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;选择器&#x27;</span>);        <span class="comment">// 根据指定选择器返回第一个元素对象</span></span><br><span class="line"><span class="number">3.</span> <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;选择器&#x27;</span>);     <span class="comment">// 根据指定选择器返回</span></span><br><span class="line"></span><br><span class="line"> doucumnet.<span class="property">body</span>  <span class="comment">// 返回body元素对象</span></span><br><span class="line"> <span class="variable language_">document</span>.<span class="property">documentElement</span>  <span class="comment">// 返回html元素对象</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//按钮点击事件</span></span><br><span class="line"><span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>);</span><br><span class="line">btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;你好吗&#x27;</span>);  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//改变元素内容</span></span><br><span class="line">element.<span class="property">innerText</span></span><br><span class="line">element.<span class="property">innerHTML</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//利用 DOM 可以操作如下表单元素的属性：</span></span><br><span class="line">type、value、checked、selected、disabled</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以通过 JS 修改元素的大小、颜色、位置等样式。</span></span><br><span class="line"><span class="number">1.</span> element.<span class="property">style</span>     行内样式操作</span><br><span class="line"><span class="number">2.</span> element.<span class="property">className</span> 类名样式操作</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.imgdb.cn/item/63d672cdface21e9ef12d231.png"></p>
<p>Dom核心</p>
<p>关于dom操作，主要针对于元素的操作。主要有创建、增、删、改、查、属性操作、事件操作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">write</span></span><br><span class="line">innerHTML</span><br><span class="line">createElement</span><br><span class="line"></span><br><span class="line"><span class="comment">//增</span></span><br><span class="line"><span class="number">1.</span> appendChild</span><br><span class="line"><span class="number">2.</span> insertBefore</span><br><span class="line"></span><br><span class="line"><span class="comment">//删</span></span><br><span class="line"><span class="number">1.</span> removeChild</span><br><span class="line"></span><br><span class="line"><span class="comment">//改  主要修改dom的元素属性，dom元素的内容、属性, 表单的值等</span></span><br><span class="line">修改元素属性： src、href、title等</span><br><span class="line">修改普通元素内容： innerHTML 、innerText</span><br><span class="line">修改表单元素： value、type、disabled等</span><br><span class="line">修改元素样式： style、className</span><br><span class="line"></span><br><span class="line"><span class="comment">//查</span></span><br><span class="line"><span class="variable constant_">DOM</span>提供的<span class="variable constant_">API</span> 方法：  getElementById、getElementsByTagName  古老用法 不太推荐 </span><br><span class="line"><span class="variable constant_">H5</span>提供的新方法： querySelector、querySelectorAll   提倡</span><br><span class="line">利用节点操作获取元素： 父(parentNode)、子(children)、兄(previousElementSibling、nextElementSibling)  提倡</span><br><span class="line"></span><br><span class="line"><span class="comment">//属性操作</span></span><br><span class="line"><span class="number">1.</span> setAttribute：设置dom的属性值</span><br><span class="line"><span class="number">2.</span> getAttribute：得到dom的属性值</span><br><span class="line"><span class="number">3.</span> removeAttribute移除属性</span><br></pre></td></tr></table></figure>



<h2 id="十五、Bom"><a href="#十五、Bom" class="headerlink" title="十五、Bom"></a>十五、Bom</h2><p>window 对象是浏览器的顶级对象，它具有双重角色。它是 JS 访问浏览器窗口的一个接口。它是一个全局对象。定义在全局作用域中的变量、函数都会变成 window 对象的属性和方法。在调用的时候可以省略 window，前面学习的对话框都属于 window 对象方法，如 alert()、prompt() 等。注意：window下的一个特殊属性 window.name</p>
<p><img src="https://pic.imgdb.cn/item/63d672e1face21e9ef12fab2.png"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//浏览器页面加载</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">或者 </span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//通知窗口大小</span></span><br><span class="line"> <span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"></span><br><span class="line"> <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//定时器</span></span><br><span class="line"><span class="variable language_">window</span> 对象给我们提供了 <span class="number">2</span> 个非常好用的方法-定时器。</span><br><span class="line"> <span class="built_in">setTimeout</span>() </span><br><span class="line"> <span class="built_in">setInterval</span>()  </span><br><span class="line"></span><br><span class="line"><span class="comment">//this</span></span><br><span class="line"><span class="variable language_">this</span>的指向在函数定义的时候是确定不了的，只有函数执行的时候才能确定<span class="variable language_">this</span>到底指向谁，</span><br><span class="line">一般情况下<span class="variable language_">this</span>的最终指向的是那个调用它的对象</span><br><span class="line">现阶段，我们先了解一下几个<span class="variable language_">this</span>指向</span><br><span class="line"><span class="number">1.</span> 全局作用域或者普通函数中<span class="variable language_">this</span>指向全局对象<span class="variable language_">window</span>（注意定时器里面的<span class="variable language_">this</span>指向<span class="variable language_">window</span>）</span><br><span class="line"><span class="number">2.</span> 方法调用中谁调用<span class="variable language_">this</span>指向谁</span><br><span class="line"><span class="number">3.</span>构造函数中<span class="variable language_">this</span>指向构造函数的实例</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//执行机制（单线程）</span></span><br><span class="line"><span class="comment">//同步</span></span><br><span class="line">前一个任务结束后再执行后一个任务，程序的执行顺序与任务的排列顺序是一致的、同步的。</span><br><span class="line">比如做饭的同步做法：我们要烧水煮饭，等水开了（<span class="number">10</span>分钟之后），再去切菜，炒菜。</span><br><span class="line"></span><br><span class="line"><span class="comment">//异步</span></span><br><span class="line">你在做一件事情时，因为这件事情会花费很长时间，在做这件事的同时，你还可以去处理其他事情。</span><br><span class="line">比如做饭的异步做法，我们在烧水的同时，利用这<span class="number">10</span>分钟，去切菜，炒菜。</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行机制步骤</span></span><br><span class="line"><span class="number">1.</span> 先执行执行栈中的同步任务。</span><br><span class="line"><span class="number">2.</span> 异步任务（回调函数）放入任务队列中。</span><br><span class="line"><span class="number">3.</span> 一旦执行栈中的所有同步任务执行完毕，系统就会按次序读取任务队列中的异步任务，</span><br><span class="line">  于是被读取的异步任务结束等待状态，进入执行栈，开始执行。</span><br><span class="line"></span><br><span class="line"><span class="comment">//location对象</span></span><br><span class="line"><span class="variable language_">window</span> 对象给我们提供了一个 location 属性用于获取或设置窗体的 <span class="variable constant_">URL</span>，并且可以用于解析 <span class="variable constant_">URL</span> 。</span><br><span class="line">因为这个属性返回的是一个对象，所以我们将这个属性也称为 location 对象。</span><br><span class="line"></span><br><span class="line"><span class="comment">//URL</span></span><br><span class="line">统一资源定位符 (<span class="title class_">Uniform</span> <span class="title class_">Resource</span> <span class="title class_">Locator</span>, <span class="variable constant_">URL</span>) 是互联网上标准资源的地址。</span><br><span class="line">互联网上的每个文件都有一个唯一的 <span class="variable constant_">URL</span>，它包含的信息指出文件的位置以及浏览器应该怎么处理它。</span><br><span class="line"><span class="variable constant_">URL</span> 的一般语法格式为：</span><br><span class="line"> <span class="attr">protocol</span>:<span class="comment">//host[:port]/path/[?query]#fragment</span></span><br><span class="line"></span><br><span class="line"> <span class="attr">http</span>:<span class="comment">//www.itcast.cn/index.html?name=andy&amp;age=18#link</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="comment">//navigator对象</span></span><br><span class="line">navigator 对象包含有关浏览器的信息，它有很多属性，我们最常用的是 userAgent，</span><br><span class="line">该属性可以返回由客户机发送服务器的 user-agent 头部的值。</span><br><span class="line">下面前端代码可以判断用户那个终端打开页面，实现跳转</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>((navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i</span>))) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;&quot;</span>;     <span class="comment">//手机</span></span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;&quot;</span>;     <span class="comment">//电脑</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//history对象</span></span><br><span class="line"><span class="variable language_">window</span> 对象给我们提供了一个 history 对象，与浏览器历史记录进行交互。</span><br><span class="line">该对象包含用户（在浏览器窗口中）访问过的 <span class="variable constant_">URL</span>。</span><br><span class="line"></span><br><span class="line"><span class="comment">//本地存储</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">sessionStorage</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">localStorage</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>、数据存储在用户浏览器中</span><br><span class="line"><span class="number">2</span>、设置、读取方便、甚至页面刷新不丢失数据</span><br><span class="line"><span class="number">3</span>、容量较大，sessionStorage约5M、<span class="variable language_">localStorage</span>约20M</span><br><span class="line"><span class="number">4</span>、只能存储字符串，可以将对象<span class="title class_">JSON</span>.<span class="title function_">stringify</span>() 编码后存储</span><br><span class="line"></span><br><span class="line"><span class="comment">//存</span></span><br><span class="line">sessionStorage.<span class="title function_">setItem</span>(key, value)</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, value)</span><br><span class="line"></span><br><span class="line"><span class="comment">//取</span></span><br><span class="line">sessionStorage.<span class="title function_">getItem</span>(key)</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key)</span><br><span class="line"></span><br><span class="line"><span class="comment">//删</span></span><br><span class="line">sessionStorage.<span class="title function_">removeItem</span>(key)</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key)</span><br><span class="line"></span><br><span class="line"><span class="comment">//清除全部</span></span><br><span class="line">sessionStorage.<span class="title function_">clear</span>()</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">clear</span>()</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.imgdb.cn/item/63d672efface21e9ef13160a.png"></p>
<p><img src="https://pic.imgdb.cn/item/63d672fbface21e9ef133071.png"></p>
<p><img src="https://pic.imgdb.cn/item/63d67306face21e9ef134a12.png"></p>
<p><img src="https://pic.imgdb.cn/item/63d67311face21e9ef13649a.png"></p>
<h2 id="十六、事件"><a href="#十六、事件" class="headerlink" title="十六、事件"></a>十六、事件</h2><h3 id="（1）事件绑定"><a href="#（1）事件绑定" class="headerlink" title="（1）事件绑定"></a>（1）事件绑定</h3><p>element.addEventListener</p>
<p>element.onclick</p>
<p>行内元素绑定 <p onclick="alert('click')"></p>
<h3 id="（2）事件冒泡"><a href="#（2）事件冒泡" class="headerlink" title="（2）事件冒泡"></a>（2）事件冒泡</h3><p>事件的触发默认会冒泡</p>
<p>阻止事件冒泡e.stopPropagation()</p>
<h3 id="（3）事件代理"><a href="#（3）事件代理" class="headerlink" title="（3）事件代理"></a>（3）事件代理</h3><p>利用事件冒泡机制，将相似回调绑定在上级DOM，同一处理事件。</p>
<p>可通过target.matches(selector)去区分触发的具体DOM。</p>
<p>优势：减少DOM操作，减少监听器的创建，节约内存。</p>
<h2 id="十七、深拷贝"><a href="#十七、深拷贝" class="headerlink" title="十七、深拷贝"></a>十七、深拷贝</h2><p>简单例子：没有对正则等一些复杂对象进行特殊处理</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">deepClone</span> = (<span class="params">obj = &#123;&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> || obj == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">let</span> result</span><br><span class="line">  <span class="keyword">if</span>(obj <span class="keyword">instanceof</span> <span class="title class_">Array</span>)&#123;</span><br><span class="line">    result = []</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    result = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">    <span class="keyword">if</span>(obj.<span class="title function_">hasOwnProperty</span>(key))&#123;</span><br><span class="line">      result[key] = <span class="title function_">deepClone</span>(obj[key])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-css"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/01/29/css/"
    >基础常用的CSS</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/01/29/css/" class="article-date">
  <time datetime="2023-01-29T13:06:28.000Z" itemprop="datePublished">2023-01-29</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h2><p>基础css样式，此部分就我感觉后期比js还难掌握，毕竟写出炫酷的样式还是需要对css的深度了解去学习，可以说是学无止境了这一门。</p>
<h2 id="一、CSS：层叠样式表（Cascading-style-sheets）"><a href="#一、CSS：层叠样式表（Cascading-style-sheets）" class="headerlink" title="一、CSS：层叠样式表（Cascading style sheets）"></a>一、CSS：层叠样式表（Cascading style sheets）</h2><h3 id="CSS作用是什么？？"><a href="#CSS作用是什么？？" class="headerlink" title="CSS作用是什么？？"></a>CSS作用是什么？？</h3><p>给页面中的HTML标签设置样式，配合HTML使用。</p>
<p><img src="https://pic.imgdb.cn/item/63d66feaface21e9ef0ceee7.png"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">p</span> &#123; //<span class="selector-tag">p</span>为选择器（标签选择器）</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: pink;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-weight</span>: <span class="number">200</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello world！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="二、CSS常见三种方式"><a href="#二、CSS常见三种方式" class="headerlink" title="二、CSS常见三种方式"></a>二、CSS常见三种方式</h2><ol>
<li>内嵌式 </li>
<li>外联式 </li>
<li>行内式</li>
</ol>
<h3 id="CSS常见三种引入方式的特点区别有哪些（书写位置、作用范围、使用场景）-？"><a href="#CSS常见三种引入方式的特点区别有哪些（书写位置、作用范围、使用场景）-？" class="headerlink" title="CSS常见三种引入方式的特点区别有哪些（书写位置、作用范围、使用场景） ？"></a>CSS常见三种引入方式的特点区别有哪些（书写位置、作用范围、使用场景） ？</h3><p><img src="https://pic.imgdb.cn/item/63d67003face21e9ef0d2549.png"></p>
<h2 id="选择器的作用："><a href="#选择器的作用：" class="headerlink" title="选择器的作用："></a>选择器的作用：</h2><ol>
<li>选择页面中对应的标签（找她），方便后续设置样式（改她）</li>
</ol>
<h2 id="三、标签选择器"><a href="#三、标签选择器" class="headerlink" title="三、标签选择器"></a>三、标签选择器</h2><ol>
<li>结构：标签名 { css属性名：属性值； } </li>
<li>作用：通过标签名，找到页面中所有这类标签，设置样式 </li>
<li>注意点： </li>
<li>\1. 标签选择器选择的是一类标签，而不是单独某一个 </li>
<li>\2. 标签选择器无论嵌套关系有多深，都能找到对应的标签</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">p</span> &#123; //<span class="selector-tag">p</span>为选择器（标签选择器）</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: pink;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello world！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="四、类选择器"><a href="#四、类选择器" class="headerlink" title="四、类选择器"></a>四、类选择器</h2><p>结构：.类名 { css属性名：属性值； } </p>
<p>作用：通过类名，找到页面中所有带有这个类名的标签，设置样式 </p>
<p>注意点： </p>
<p>\1. 所有标签上都有class属性，class属性的属性值称为类名（类似于名字） </p>
<p>\2. 类名可以由数字、字母、下划线、中划线组成，但不能以数字或者中划线开头 </p>
<p>\3. 一个标签可以同时有多个类名，类名之间以空格隔开 </p>
<p>\4. 类名可以重复，一个类选择器可以同时选中多个标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.cName</span> &#123; </span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: pink;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;cName&#x27;</span>&gt;</span>Hello world！<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="五、id选择器"><a href="#五、id选择器" class="headerlink" title="五、id选择器"></a>五、id选择器</h2><p>结构：**#id属性值** { css属性名：属性值； } </p>
<p>作用：通过id属性值，找到页面中带有这个id属性值的标签，设置样式 </p>
<p>注意点： </p>
<p>\1. 所有标签上都有id属性 </p>
<p>\2. id属性值类似于身份证号码，在一个页面中是唯一的，不可重复的！ </p>
<p>\3. 一个标签上只能有一个id属性值 </p>
<p>\4. 一个id选择器只能选中一个标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#cName</span> &#123; </span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: pink;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;cName&#x27;</span>&gt;</span>Hello world！<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h3><h3 id="class类名与id属性值的区别"><a href="#class类名与id属性值的区别" class="headerlink" title="class类名与id属性值的区别"></a>class类名与id属性值的区别</h3><p>class类名相当于姓名，可以重复，一个标签可以同时有多个class类名 </p>
<p>id属性值相当于身份证号码，不可重复，一个标签只能有一个id属性值 </p>
<h3 id="类选择器与id选择器的区别"><a href="#类选择器与id选择器的区别" class="headerlink" title="类选择器与id选择器的区别"></a>类选择器与id选择器的区别</h3><p>类选择器以 <strong>.</strong> 开头  </p>
<p>id选择器以 <strong>#</strong> 开头 </p>
<p>实际开发的情况 </p>
<p>类选择器用的最多 </p>
<p>id一般配合js使用，除非特殊情况，否则不要使用id设置样式 </p>
<p>实际开发中会遇到<strong>冗余代码的抽取</strong> （可以将一些公共的代码抽取到一个公共的类中去）</p>
<h2 id="六、通配符选择器"><a href="#六、通配符选择器" class="headerlink" title="六、通配符选择器"></a>六、通配符选择器</h2><p>结构：***** { css属性名：属性值； } </p>
<p>作用：找到页面中所有的标签，设置样式 </p>
<p>注意点： </p>
<p>\1. 开发中使用极少，只会在极特殊情况下才会用到 </p>
<p>\2. 在基础班小页面中可能会用于去除标签默认的margin和padding</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    * &#123; </span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;cName&#x27;</span>&gt;</span>Hello world！<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>2<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="七、字体样式"><a href="#七、字体样式" class="headerlink" title="七、字体样式"></a>七、字体样式</h2><h3 id="字体样式"><a href="#字体样式" class="headerlink" title="字体样式"></a>字体样式</h3><p>\1. 字体大小：font-size </p>
<p>\2. 字体粗细：font-weight </p>
<p>\3. 字体样式：font-style ：normal（正常）italic（倾斜）</p>
<p>\4. 字体类型：font-family </p>
<p>\5. 字体类型：font属性连写 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">p</span> &#123; //<span class="selector-tag">p</span>为选择器（标签选择器）</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: pink;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-weight</span>: <span class="number">200</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-family</span>:<span class="string">&#x27;微软雅黑&#x27;</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-style</span> ：<span class="attribute">normal</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">line-height</span>:<span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello world！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="八、层叠样式问题"><a href="#八、层叠样式问题" class="headerlink" title="八、层叠样式问题"></a>八、层叠样式问题</h2><p>问题： 给同一个标签设置了相同的样式，此时浏览器会如何渲染呢？ </p>
<p>结果： </p>
<p>如果给同一个标签设置了相同的属性，此时样式会层叠（覆盖），写在最下面的会生效 </p>
<p>TIP： </p>
<p>CSS （Cascading style sheets） <strong>层叠样式表</strong> </p>
<p>所谓的层叠即叠加的意思，表示样式可以一层一层的层叠覆盖</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#cName</span> &#123; </span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: pink;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>：yellow;//此时颜色会为黄色</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;cName&#x27;</span>&gt;</span>Hello world！<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="九、文本样式"><a href="#九、文本样式" class="headerlink" title="九、文本样式"></a>九、文本样式</h2><p>\1. 文本缩进：text-indent </p>
<p><img src="https://pic.imgdb.cn/item/63d67022face21e9ef0d6516.png"><br>\2. 文本水平对齐方式：text-align </p>
<p><img src="https://pic.imgdb.cn/item/63d6702bface21e9ef0d783a.png"><br>\3. 文本修饰：text-decoration </p>
<p><img src="https://pic.imgdb.cn/item/63d6705eface21e9ef0de448.png"><br>\3. line-height行高</p>
<h2 id="十、文字水平居中方法总结-text-align-center"><a href="#十、文字水平居中方法总结-text-align-center" class="headerlink" title="十、文字水平居中方法总结 text-align : center"></a>十、文字水平居中方法总结 text-align : center</h2><h2 id="十一、text-align-center-能让那些元素水平居中？"><a href="#十一、text-align-center-能让那些元素水平居中？" class="headerlink" title="十一、text-align : center 能让那些元素水平居中？"></a>十一、text-align : center 能让那些元素水平居中？</h2><ol>
<li>文本 </li>
<li>span标签、a标签 </li>
<li>input标签、img标签</li>
</ol>
<h2 id="十二、水平居中总结"><a href="#十二、水平居中总结" class="headerlink" title="十二、水平居中总结"></a>十二、水平居中总结</h2><p>让div、p、h（大盒子）水平居中</p>
<p>可以通过margin : 0 auto ; 实现 </p>
<p>注意点： </p>
<ol>
<li>如果需要让 div、p、h（大盒子） 水平居中，直接给 当前元素本身 设置即可 </li>
<li>margin：0 auto 一般针对于固定宽度的盒子，如果大盒子没有设置宽度，此时会默认占满父元素的宽度</li>
</ol>
<h2 id="十三、选择器进阶"><a href="#十三、选择器进阶" class="headerlink" title="十三、选择器进阶"></a>十三、选择器进阶</h2><p><img src="https://pic.imgdb.cn/item/63d67085face21e9ef0e3397.png"></p>
<h2 id="十四、伪类选择器"><a href="#十四、伪类选择器" class="headerlink" title="十四、伪类选择器"></a>十四、伪类选择器</h2><h3 id="结构伪类选择器"><a href="#结构伪类选择器" class="headerlink" title="结构伪类选择器"></a>结构伪类选择器</h3><p><img src="https://pic.imgdb.cn/item/63d6708fface21e9ef0e45c7.png"><br><img src="https://pic.imgdb.cn/item/63d670a4face21e9ef0e6f59.png"></p>
<h3 id="伪元素"><a href="#伪元素" class="headerlink" title="伪元素"></a>伪元素</h3><p><img src="https://pic.imgdb.cn/item/63d670b4face21e9ef0e908f.png"><br>效果图：</p>
<p><img src="https://pic.imgdb.cn/item/63d670c2face21e9ef0eaceb.png"></p>
<h2 id="十五、盒子模型"><a href="#十五、盒子模型" class="headerlink" title="十五、盒子模型"></a>十五、盒子模型</h2><p><img src="https://pic.imgdb.cn/item/63d670ccface21e9ef0ebffc.png"></p>
<h2 id="十六、HTML与CSS常见性质与要求（进阶）"><a href="#十六、HTML与CSS常见性质与要求（进阶）" class="headerlink" title="十六、HTML与CSS常见性质与要求（进阶）"></a>十六、HTML与CSS常见性质与要求（进阶）</h2><h3 id="（1）语意化结构"><a href="#（1）语意化结构" class="headerlink" title="（1）语意化结构"></a>（1）语意化结构</h3><ul>
<li>人阅读代码更加易懂</li>
</ul>
<h3 id="（2）默认情况下，哪些是块级元素，哪些是内联元素"><a href="#（2）默认情况下，哪些是块级元素，哪些是内联元素" class="headerlink" title="（2）默认情况下，哪些是块级元素，哪些是内联元素"></a>（2）默认情况下，哪些是块级元素，哪些是内联元素</h3><ul>
<li>display:block&#x2F;table: div h1 h2 table ul ol p等</li>
<li>display:inline&#x2F;inline-block: span img input button等</li>
</ul>
<h3 id="（3）盒子模型宽度如何计算"><a href="#（3）盒子模型宽度如何计算" class="headerlink" title="（3）盒子模型宽度如何计算"></a>（3）盒子模型宽度如何计算</h3><h3 id="offsetWidth-clientWidth-scrollWidth-区别"><a href="#offsetWidth-clientWidth-scrollWidth-区别" class="headerlink" title="offsetWidth, clientWidth, scrollWidth 区别"></a>offsetWidth, clientWidth, scrollWidth 区别</h3><ul>
<li>offset: border + padding + width</li>
<li><img src="https://pic.imgdb.cn/item/63d670d8face21e9ef0ed87a.png"></li>
<li>client: padding + width</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/63d670e9face21e9ef0ef7dc.png"></p>
<ul>
<li>scroll: padding + width + border</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/63d670f7face21e9ef0f1386.png"><br>以上是W3C标准的解释，各大浏览器厂商对其理解稍有偏差。</p>
<h3 id="（4）margin纵向重叠问题"><a href="#（4）margin纵向重叠问题" class="headerlink" title="（4）margin纵向重叠问题"></a>（4）margin纵向重叠问题</h3><ul>
<li>相邻元素的marginTop与marginBottom存在重叠（取最大值）</li>
</ul>
<h3 id="（5）margin负值的效果"><a href="#（5）margin负值的效果" class="headerlink" title="（5）margin负值的效果"></a>（5）margin负值的效果</h3><ul>
<li><p>主要注意，方向不同（上下左右），效果是不同的。所以在开发中避免混淆，我习惯只使用margin-top以及margin-left</p>
</li>
<li><ul>
<li>上和左</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>自身元素向上和左移动</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li>下和右</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>文档流中，自身元素下方和右方的元素被“吸”，往设置的反方向移动，更加准确的来说，是外部的元素认为你减少了文档流所占距离。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="（6）BFC理解和应用"><a href="#（6）BFC理解和应用" class="headerlink" title="（6）BFC理解和应用"></a>（6）BFC理解和应用</h3><ul>
<li><p>BFC全称为 <strong>Block format context</strong>，块级格式化上下文。</p>
</li>
<li><p>BFC是指一类元素的CSS样式类型。</p>
</li>
<li><p>一个BFC的元素，内部渲染不会影响边界以外的元素（容器内部的元素不会超出容器边界，不会影响容器外部）。</p>
</li>
<li><p>形成BFC元素的常见条件：</p>
</li>
<li><ul>
<li>float不是none</li>
<li>position是absolute或者fixed</li>
<li>overflow不是visible</li>
<li>display是flex inline-block等</li>
</ul>
</li>
<li><p>BFC的常见应用</p>
</li>
<li><ul>
<li>浮动清除</li>
</ul>
</li>
</ul>
<h3 id="（7）float布局"><a href="#（7）float布局" class="headerlink" title="（7）float布局"></a>（7）float布局</h3><h4 id="如何实现圣杯布局和双飞翼布局"><a href="#如何实现圣杯布局和双飞翼布局" class="headerlink" title="如何实现圣杯布局和双飞翼布局"></a>如何实现圣杯布局和双飞翼布局</h4><ul>
<li><p>垂直三栏布局，中间一栏（放置重要内容）最先加载和渲染(中间栏放在HTML文档中最前)。</p>
</li>
<li><p>两侧内容固定，中间内容随着屏幕宽度自适应。</p>
</li>
<li><p>一般用于传统的PC网页。</p>
</li>
<li><ul>
<li>实现：</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>使用float布局</li>
<li>两次使用margin负值，以便中间内容横向重叠</li>
<li>防止中间内容被两侧覆盖，一个用padding，一个用margin</li>
</ul>
</li>
</ul>
</li>
<li><p>两种布局方式有什么区别</p>
</li>
<li><ul>
<li>解决的问题一样，三栏布局，实现方式不同。</li>
<li>防止中间内容被两侧覆盖，一个用padding，一个用margin</li>
</ul>
</li>
</ul>
<h4 id="clearfix类怎么写，zoom是做什么的？"><a href="#clearfix类怎么写，zoom是做什么的？" class="headerlink" title="clearfix类怎么写，zoom是做什么的？"></a>clearfix类怎么写，zoom是做什么的？</h4><p>当一个元素的子元素都是设置了float属性，那么元素的高度不会被撑开，我们可以使用clear来清除浮动。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.clearfix::after&#123;</span><br><span class="line">  visibility: hidden;</span><br><span class="line">  display: block;</span><br><span class="line">  font-size: 0;</span><br><span class="line">  content: &quot; &quot;;</span><br><span class="line">  clear: both;</span><br><span class="line">  height: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.clearfix&#123;</span><br><span class="line">	/* 兼容低版本的IE浏览器 */ </span><br><span class="line">  *zoom:1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在因为浮动导致高度没有撑开的容器上添加这个类。</p>
<h3 id="（7）flex布局"><a href="#（7）flex布局" class="headerlink" title="（7）flex布局"></a>（7）flex布局</h3><h4 id="常用语法"><a href="#常用语法" class="headerlink" title="常用语法"></a>常用语法</h4><ul>
<li><p>flex-direction</p>
</li>
<li><p>justify-content</p>
</li>
<li><p>align-items</p>
</li>
<li><p>flex-wrap</p>
</li>
<li><p>align-self</p>
</li>
<li><ul>
<li>自身在交叉轴(副轴)上的对其方式：flex-start, center, flex-end</li>
</ul>
</li>
</ul>
<h3 id="（8）定位相关"><a href="#（8）定位相关" class="headerlink" title="（8）定位相关"></a>（8）定位相关</h3><h4 id="relative和absolute定位"><a href="#relative和absolute定位" class="headerlink" title="relative和absolute定位"></a>relative和absolute定位</h4><ul>
<li>relative依据自身当前所在文档流位置进行定位</li>
<li>absolute依据最近一层的父定位元素进行定位</li>
</ul>
<h4 id="居中对齐的方式"><a href="#居中对齐的方式" class="headerlink" title="居中对齐的方式"></a>居中对齐的方式</h4><h5 id="水平居中"><a href="#水平居中" class="headerlink" title="水平居中"></a>水平居中</h5><ul>
<li>inline元素，可以使用text-aligin: center</li>
<li>block元素，margin:auto</li>
<li>absoulte元素， left: 50% + margin-left负自身50宽度</li>
</ul>
<h5 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h5><ul>
<li>inline元素，设置容器行高等于自身高度</li>
<li>absoulte元素，top:50% + margin-top负自身50高度</li>
<li>absoulte元素，transform(-50%, -50%)</li>
<li>absoulte元素，top,left,bottom,right &#x3D; 0 + margin： auto</li>
</ul>
<h3 id="（9）图文相关"><a href="#（9）图文相关" class="headerlink" title="（9）图文相关"></a>（9）图文相关</h3><h4 id="line-height如何继承"><a href="#line-height如何继承" class="headerlink" title="line-height如何继承"></a>line-height如何继承</h4><p>继承最近一层的父元素。</p>
<p>在父元素设置百分比line-height的时候，line-height并不会直接继承，而是在父元素计算后再继承。</p>
<h3 id="（10）响应式"><a href="#（10）响应式" class="headerlink" title="（10）响应式"></a>（10）响应式</h3><h4 id="rem"><a href="#rem" class="headerlink" title="rem"></a>rem</h4><p>相对根元素(html)的font-size。</p>
<h4 id="em"><a href="#em" class="headerlink" title="em"></a>em</h4><p>相对父元素的font-size。</p>
<h4 id="vw-x2F-vh-x2F-vmax-x2F-vmin"><a href="#vw-x2F-vh-x2F-vmax-x2F-vmin" class="headerlink" title="vw&#x2F;vh&#x2F;vmax&#x2F;vmin"></a>vw&#x2F;vh&#x2F;vmax&#x2F;vmin</h4><ul>
<li>1vw 视口宽度1%</li>
<li>1vh 视口高度1%</li>
<li>1vmax 视口高度&#x2F;宽度取两者较大值为基准的1%</li>
<li>1vmin 视口高度&#x2F;宽度取两者较小值为基准的1%</li>
</ul>
<h4 id="响应式布局原理"><a href="#响应式布局原理" class="headerlink" title="响应式布局原理"></a>响应式布局原理</h4><p>通过媒体查询，实现在不同宽度设备下的不同css样式。</p>
<p>常与rem进行配合，通过媒体查询，动态修改根元素的font-size来保证不同宽度设备下的显示比例一致。</p>
<h4 id="设备高度"><a href="#设备高度" class="headerlink" title="设备高度"></a>设备高度</h4><ul>
<li><p>window.screen.height</p>
</li>
<li><ul>
<li>设备屏幕的高度，包括网页内容以外的东西（地址栏，状态栏）</li>
</ul>
</li>
<li><p>widnow.innerHeight</p>
</li>
<li><ul>
<li>网页的视口高度</li>
</ul>
</li>
<li><p>document.body.clientHeight</p>
</li>
<li><ul>
<li>body元素的高度</li>
</ul>
</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2022-2023
        <i class="ri-heart-fill heart_icon"></i> Jelly Chen
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src=''></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/mypay_alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/mypay_wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.staticfile.org/mathjax/2.7.7/MathJax.js"></script>
<script src="https://cdn.staticfile.org/mathjax/2.7.7/config/TeX-AMS-MML_HTMLorMML-full.js"></script>
<script>
  var ayerConfig = {
    mathjax: true,
  };
</script>

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52"
        src="//music.163.com/outchain/player?type=2&id=2017680379&auto=1&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
    

  </div>
</body>

</html>